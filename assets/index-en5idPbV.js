import{r as y,a as uo,L as F,u as ho,b as yr,R as mo,c as po,d as ye,N as fo,B as go}from"./vendor-BxVSUyRY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var vr={exports:{}},Ht={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=y,yo=Symbol.for("react.element"),vo=Symbol.for("react.fragment"),bo=Object.prototype.hasOwnProperty,wo=xo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jo={key:!0,ref:!0,__self:!0,__source:!0};function br(t,e,s){var i,n={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)bo.call(e,i)&&!jo.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:yo,type:t,key:a,ref:o,props:n,_owner:wo.current}}Ht.Fragment=vo;Ht.jsx=br;Ht.jsxs=br;vr.exports=Ht;var r=vr.exports,wr,Ci=uo;wr=Ci.createRoot,Ci.hydrateRoot;const Pi=({className:t="",animated:e=!0})=>r.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none ${t}`,children:[r.jsxs("div",{className:"absolute w-full h-full",children:[r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(124, 58, 237, 0.06) 1px, transparent 0)",backgroundSize:"40px 40px"}}),[...Array(8)].map((s,i)=>r.jsx("div",{className:`absolute rounded-full bg-purple-600 opacity-${Math.random()>.5?"5":"10"}`,style:{width:`${20+Math.random()*50}px`,height:`${20+Math.random()*50}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,transform:"translate(-50%, -50%)",filter:"blur(10px)",animation:e?`float ${5+Math.random()*10}s ease-in-out infinite alternate`:"none"}},i)),e&&r.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"rgba(124, 58, 237, 0)"}),r.jsx("stop",{offset:"50%",stopColor:"rgba(124, 58, 237, 0.3)"}),r.jsx("stop",{offset:"100%",stopColor:"rgba(124, 58, 237, 0)"})]}),r.jsx("mask",{id:"lineMask",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"})})]}),[...Array(6)].map((s,i)=>r.jsx("rect",{className:"animate-pulse",y:`${15+i*15}%`,width:"100%",height:"1",fill:"url(#lineGradient)",style:{animation:`flowHorizontal ${10+i*2}s linear infinite`,animationDelay:`${i*1.5}s`,opacity:.5}},`h-${i}`)),[...Array(8)].map((s,i)=>r.jsx("rect",{className:"animate-pulse",x:`${10+i*12}%`,width:"1",height:"100%",fill:"url(#lineGradient)",style:{animation:`flowVertical ${8+i*2}s linear infinite`,animationDelay:`${i*1.2}s`,opacity:.3}},`v-${i}`))]})]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-50 via-transparent to-white opacity-70"})]}),ms=({className:t="",color:e="#7C3AED",opacity:s=.1})=>r.jsxs("div",{className:`absolute w-full overflow-hidden ${t}`,style:{zIndex:0},children:[r.jsx("svg",{className:"absolute bottom-0 w-full h-auto",viewBox:"0 0 1440 320",preserveAspectRatio:"none",style:{animation:"float 15s ease-in-out infinite alternate",height:"120px"},children:r.jsx("path",{fill:e,fillOpacity:s,d:"M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})}),r.jsx("svg",{className:"absolute bottom-0 w-full h-auto",viewBox:"0 0 1440 320",preserveAspectRatio:"none",style:{animation:"float 10s ease-in-out infinite alternate-reverse",height:"100px"},children:r.jsx("path",{fill:e,fillOpacity:s*1.5,d:"M0,160L48,176C96,192,192,224,288,218.7C384,213,480,171,576,165.3C672,160,768,192,864,186.7C960,181,1056,139,1152,149.3C1248,160,1344,224,1392,256L1440,288L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})}),r.jsx("svg",{className:"absolute bottom-0 w-full h-auto",viewBox:"0 0 1440 320",preserveAspectRatio:"none",style:{animation:"float 7s ease-in-out infinite alternate",height:"80px"},children:r.jsx("path",{fill:e,fillOpacity:s*2,d:"M0,288L48,272C96,256,192,224,288,213.3C384,203,480,213,576,229.3C672,245,768,267,864,261.3C960,256,1056,224,1152,218.7C1248,213,1344,235,1392,245.3L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})]}),jr=()=>r.jsx("style",{children:`
        @keyframes float {
          0% {
            transform: translateY(0px) translateX(0px);
          }
          50% {
            transform: translateY(-20px) translateX(10px);
          }
          100% {
            transform: translateY(0px) translateX(0px);
          }
        }
        
        @keyframes pulse {
          0% {
            transform: scale(1);
            opacity: 0.8;
          }
          50% {
            transform: scale(1.1);
            opacity: 1;
          }
          100% {
            transform: scale(1);
            opacity: 0.8;
          }
        }
        
        @keyframes flowHorizontal {
          0% {
            transform: translateX(-100%);
          }
          100% {
            transform: translateX(100%);
          }
        }
        
        @keyframes flowVertical {
          0% {
            transform: translateY(-100%);
          }
          100% {
            transform: translateY(100%);
          }
        }
        
        @keyframes fadeIn {
          0% {
            opacity: 0;
          }
          100% {
            opacity: 1;
          }
        }
        
        @keyframes slideUp {
          0% {
            transform: translateY(30px);
            opacity: 0;
          }
          100% {
            transform: translateY(0);
            opacity: 1;
          }
        }
        
        @keyframes gradient {
          0% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
          100% {
            background-position: 0% 50%;
          }
        }
        
        @keyframes shimmer {
          0% {
            background-position: -468px 0;
          }
          100% {
            background-position: 468px 0;
          }
        }
        
        @keyframes bounce {
          0%, 100% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(-15px);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
        
        @keyframes fadeInUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        
        .animate-pulse-slow {
          animation: pulse 3s ease-in-out infinite;
        }
        
        .animate-fade-in {
          animation: fadeIn 1.5s ease-out forwards;
        }
        
        .animate-slide-up {
          animation: slideUp 1s ease-out forwards;
        }
        
        .animate-gradient {
          background-size: 200% 200%;
          animation: gradient 8s ease infinite;
        }
        
        .animate-shimmer {
          background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
          background-size: 200% 100%;
          animation: shimmer 2s infinite;
        }
        
        .animate-bounce {
          animation: bounce 1s infinite;
        }
        
        .animate-spin {
          animation: spin 2s linear infinite;
        }
        
        .animate-fadeInUp {
          animation: fadeInUp 0.8s ease-out forwards;
        }
      `}),zs=({variant:t="default",size:e="md",className:s=""})=>{const i={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"},n={default:{primary:"#7C3AED",secondary:"#A78BFA",accent:"#C4B5FD",text:"#7C3AED"},white:{primary:"#FFFFFF",secondary:"#E5E7EB",accent:"#D1D5DB",text:"#FFFFFF"}},a=n[t]||n.default,o=i[e]||i.md;return r.jsxs("div",{className:`flex items-center ${s}`,children:[r.jsx("div",{className:`${o} relative`,children:r.jsxs("svg",{viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[r.jsx("circle",{cx:"32",cy:"32",r:"28",fill:a.primary,opacity:"0.2"}),r.jsx("path",{d:"M32 12C23.2 12 16 19.2 16 28C16 36.8 23.2 44 32 44C40.8 44 48 36.8 48 28C48 19.2 40.8 12 32 12Z",fill:a.primary}),r.jsx("path",{d:"M32 8C32 8 28 16 28 22C28 28 36 28 36 22C36 16 32 8 32 8Z",fill:a.secondary}),r.jsx("path",{d:"M32 28L24 38H28V46H36V38H40L32 28Z",fill:a.accent}),r.jsx("circle",{cx:"22",cy:"24",r:"3",fill:a.accent}),r.jsx("circle",{cx:"42",cy:"24",r:"3",fill:a.accent}),r.jsx("circle",{cx:"32",cy:"40",r:"2",fill:a.accent})]})}),r.jsxs("div",{className:"ml-2 flex flex-col",children:[r.jsx("span",{className:`font-bold text-${e==="sm"?"md":e==="lg"||e==="xl"?"2xl":"lg"}`,style:{color:a.text},children:"UploadSoul"}),(e==="lg"||e==="xl")&&r.jsx("span",{className:`text-${e==="xl"?"md":"sm"} font-light`,style:{color:a.text},children:"传灵"})]})]})},Je=({type:t,className:e="",size:s="md"})=>{const i={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24",xl:"w-32 h-32"},n=i[s]||i.md,a={digitalImmortality:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"16",y:"16",width:"96",height:"96",rx:"8",fill:"#F3E8FF"}),r.jsx("path",{d:"M64 32C48 32 36 44 36 60C36 76 48 88 64 88C80 88 92 76 92 60C92 44 80 32 64 32Z",fill:"#7C3AED",fillOpacity:"0.8"}),r.jsx("path",{d:"M64 32C64 32 56 48 56 56C56 64 72 64 72 56C72 48 64 32 64 32Z",fill:"#A78BFA"}),r.jsx("circle",{cx:"48",cy:"52",r:"4",fill:"#C4B5FD"}),r.jsx("circle",{cx:"80",cy:"52",r:"4",fill:"#C4B5FD"}),r.jsx("circle",{cx:"64",cy:"76",r:"4",fill:"#C4B5FD"}),r.jsx("path",{d:"M64 96L56 108H60V116H68V108H72L64 96Z",fill:"#7C3AED"}),r.jsx("path",{d:"M44 44C40 44 36 48 36 52C36 56 40 60 44 60C48 60 52 56 52 52",stroke:"#DDD6FE",strokeWidth:"2",fill:"none"}),r.jsx("path",{d:"M52 52C52 48 56 44 60 44C64 44 68 48 68 52C68 56 64 60 60 60C56 60 52 56 52 52Z",stroke:"#DDD6FE",strokeWidth:"2",fill:"none"})]}),emotionalCompanion:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"64",cy:"64",r:"48",fill:"#F3E8FF"}),r.jsx("path",{d:"M64 40L72 32C80 24 92 28 96 36C100 44 96 52 64 80C32 52 28 44 32 36C36 28 48 24 56 32L64 40Z",fill:"#7C3AED"}),r.jsx("circle",{cx:"48",cy:"56",r:"4",fill:"#A78BFA"}),r.jsx("circle",{cx:"80",cy:"56",r:"4",fill:"#A78BFA"}),r.jsx("path",{d:"M48 76C48 76 56 84 64 84C72 84 80 76 80 76",stroke:"#A78BFA",strokeWidth:"3",strokeLinecap:"round",fill:"none"}),r.jsx("circle",{cx:"36",cy:"44",r:"2",fill:"#C4B5FD"}),r.jsx("circle",{cx:"92",cy:"44",r:"2",fill:"#C4B5FD"}),r.jsx("circle",{cx:"40",cy:"92",r:"2",fill:"#C4B5FD"}),r.jsx("circle",{cx:"88",cy:"92",r:"2",fill:"#C4B5FD"}),r.jsx("circle",{cx:"64",cy:"28",r:"2",fill:"#C4B5FD"}),r.jsx("circle",{cx:"64",cy:"100",r:"2",fill:"#C4B5FD"})]}),virtualPartner:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"24",y:"24",width:"80",height:"80",rx:"16",fill:"#F3E8FF"}),r.jsx("circle",{cx:"48",cy:"48",r:"16",fill:"#A78BFA"}),r.jsx("rect",{x:"40",y:"68",width:"16",height:"28",rx:"8",fill:"#A78BFA"}),r.jsx("circle",{cx:"80",cy:"48",r:"16",fill:"#7C3AED"}),r.jsx("rect",{x:"72",y:"68",width:"16",height:"28",rx:"8",fill:"#7C3AED"}),r.jsx("path",{d:"M56 48H72",stroke:"#C4B5FD",strokeWidth:"4",strokeLinecap:"round"}),r.jsx("path",{d:"M56 56H72",stroke:"#C4B5FD",strokeWidth:"4",strokeLinecap:"round"}),r.jsx("path",{d:"M56 64H72",stroke:"#C4B5FD",strokeWidth:"4",strokeLinecap:"round"}),r.jsx("circle",{cx:"44",cy:"44",r:"2",fill:"#F3E8FF"}),r.jsx("circle",{cx:"52",cy:"44",r:"2",fill:"#F3E8FF"}),r.jsx("path",{d:"M42 52C42 52 46 56 48 56C50 56 54 52 54 52",stroke:"#F3E8FF",strokeWidth:"1",fill:"none"}),r.jsx("circle",{cx:"76",cy:"44",r:"2",fill:"#F3E8FF"}),r.jsx("circle",{cx:"84",cy:"44",r:"2",fill:"#F3E8FF"}),r.jsx("path",{d:"M74 52C74 52 78 56 80 56C82 56 86 52 86 52",stroke:"#F3E8FF",strokeWidth:"1",fill:"none"})]}),virtualReality:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"24",y:"40",width:"80",height:"48",rx:"8",fill:"#7C3AED"}),r.jsx("rect",{x:"32",y:"48",width:"64",height:"32",rx:"4",fill:"#A78BFA"}),r.jsx("path",{d:"M24 64C24 64 16 56 16 64C16 72 24 64 24 64",fill:"#7C3AED"}),r.jsx("path",{d:"M104 64C104 64 112 56 112 64C112 72 104 64 104 64",fill:"#7C3AED"}),r.jsx("circle",{cx:"64",cy:"64",r:"12",fill:"#C4B5FD",fillOpacity:"0.6"}),r.jsx("path",{d:"M64 52L68 64L64 76L60 64L64 52Z",fill:"#F3E8FF"}),r.jsx("path",{d:"M52 64L64 68L76 64L64 60L52 64Z",fill:"#F3E8FF"}),r.jsx("circle",{cx:"48",cy:"54",r:"2",fill:"#F3E8FF"}),r.jsx("circle",{cx:"78",cy:"58",r:"1",fill:"#F3E8FF"}),r.jsx("circle",{cx:"54",cy:"78",r:"1",fill:"#F3E8FF"}),r.jsx("circle",{cx:"74",cy:"70",r:"2",fill:"#F3E8FF"})]}),digitalWorld:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"64",cy:"64",r:"40",fill:"#F3E8FF"}),r.jsx("path",{d:"M24 64H104",stroke:"#A78BFA",strokeWidth:"1",strokeDasharray:"2 2"}),r.jsx("path",{d:"M64 24V104",stroke:"#A78BFA",strokeWidth:"1",strokeDasharray:"2 2"}),r.jsx("circle",{cx:"64",cy:"64",r:"32",stroke:"#7C3AED",strokeWidth:"1",fill:"none"}),r.jsx("circle",{cx:"64",cy:"64",r:"24",stroke:"#7C3AED",strokeWidth:"1",fill:"none"}),r.jsx("rect",{x:"60",y:"48",width:"8",height:"8",fill:"#C4B5FD"}),r.jsx("rect",{x:"44",y:"60",width:"8",height:"8",fill:"#C4B5FD"}),r.jsx("rect",{x:"76",y:"60",width:"8",height:"8",fill:"#C4B5FD"}),r.jsx("rect",{x:"60",y:"76",width:"8",height:"8",fill:"#C4B5FD"}),r.jsx("path",{d:"M64 52L48 64L64 76L80 64L64 52Z",stroke:"#7C3AED",strokeWidth:"1",fill:"none"})]}),default:r.jsxs("svg",{viewBox:"0 0 128 128",className:`${n} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{cx:"64",cy:"64",r:"48",fill:"#F3E8FF"}),r.jsx("path",{d:"M64 32C48 32 36 44 36 60C36 76 48 88 64 88C80 88 92 76 92 60C92 44 80 32 64 32Z",stroke:"#7C3AED",strokeWidth:"4",fill:"none"}),r.jsx("circle",{cx:"64",cy:"64",r:"12",fill:"#7C3AED"})]})};return a[t]||a.default},So=()=>r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white overflow-hidden",children:[r.jsx(jr,{}),r.jsxs("section",{className:"py-20 px-4 relative",children:[r.jsx(Pi,{className:"opacity-60"}),r.jsxs("div",{className:"container mx-auto text-center relative z-10",children:[r.jsx("div",{className:"mb-8 flex justify-center",children:r.jsx(zs,{size:"xl",className:"animate-pulse-slow"})}),r.jsx("h1",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-indigo-600 animate-gradient mb-6 animate-fadeInUp",children:"UploadSoul 传灵"}),r.jsx("h2",{className:"text-3xl font-semibold text-purple-600 mb-6 animate-fadeInUp",style:{animationDelay:"0.3s"},children:"虚拟世界，数字永生"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-10 animate-fadeInUp",style:{animationDelay:"0.6s"},children:"打造您专属的数字伴侣，超越时间的永恒陪伴"}),r.jsxs("div",{className:"flex justify-center space-x-4 animate-fadeInUp",style:{animationDelay:"0.9s"},children:[r.jsxs(F,{to:"/companion",className:"relative overflow-hidden group bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[r.jsx("span",{className:"relative z-10",children:"开始体验"}),r.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-indigo-500 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out"})]}),r.jsx(F,{to:"/about",className:"border border-purple-600 text-purple-600 px-8 py-3 rounded-lg hover:bg-purple-50 transition shadow hover:shadow-md",children:"了解更多"})]})]})]}),r.jsxs("section",{className:"py-16 px-4 bg-white relative",children:[r.jsx(ms,{className:"h-24",opacity:.05}),r.jsxs("div",{className:"container mx-auto relative z-10",children:[r.jsx("h2",{className:"text-3xl font-bold text-center bg-clip-text text-transparent bg-gradient-to-r from-purple-700 to-indigo-600 animate-gradient mb-4",children:"平台特色"}),r.jsx("p",{className:"text-gray-600 text-center max-w-2xl mx-auto mb-12 animate-fadeInUp",children:"全维度数字灵魂体验，让每一次互动充满温度与情感"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsx(F,{to:"/digital-human",className:"block",children:r.jsxs("div",{className:"p-8 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl transform hover:scale-105 transition duration-300 shadow-lg group animate-fadeInUp",style:{animationDelay:"0.1s"},children:[r.jsx("div",{className:"flex justify-center mb-6 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3",children:r.jsx(Je,{type:"digitalImmortality",size:"lg"})}),r.jsx("h3",{className:"text-xl font-bold text-center text-white mb-3",children:"数字永生"}),r.jsx("p",{className:"text-white text-center opacity-90",children:"突破时空限制，将您的思想、记忆和性格数字化，实现永恒的生命延续"}),r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-medium",children:"立即体验"})}),r.jsx("div",{className:"w-full h-1 bg-white/30 rounded-full mt-4 overflow-hidden",children:r.jsx("div",{className:"h-full w-1/2 bg-white animate-shimmer"})})]})}),r.jsxs("div",{className:"p-8 bg-white border border-purple-100 rounded-xl shadow-lg hover:shadow-xl transition duration-300 group animate-fadeInUp",style:{animationDelay:"0.3s"},children:[r.jsx("div",{className:"flex justify-center mb-6 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-6 animate-bounce",children:r.jsx(Je,{type:"emotionalCompanion",size:"lg"})}),r.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 mb-3",children:"情感陪伴"}),r.jsx("p",{className:"text-gray-600 text-center",children:"基于先进的情感计算技术，为您提供专属的情感支持和理解"}),r.jsx("div",{className:"flex justify-center mt-4",children:r.jsx("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"AI 情感分析"})})]}),r.jsxs("div",{className:"p-8 bg-white border border-purple-100 rounded-xl shadow-lg hover:shadow-xl transition duration-300 group animate-fadeInUp",style:{animationDelay:"0.5s"},children:[r.jsx("div",{className:"flex justify-center mb-6 transition-transform duration-300 group-hover:scale-110",children:r.jsxs("div",{className:"relative",children:[r.jsx(Je,{type:"virtualPartner",size:"lg"}),r.jsx("div",{className:"absolute -top-1 -right-1 bg-indigo-500 rounded-full w-6 h-6 flex items-center justify-center text-white text-xs font-bold animate-pulse-slow",children:"+"})]})}),r.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 mb-3",children:"虚拟伙伴"}),r.jsx("p",{className:"text-gray-600 text-center",children:"多样化的AI虚拟伙伴，满足不同场景下的陪伴需求"}),r.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),r.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),r.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-12",children:[r.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl hover:shadow-md transition duration-300 flex items-center group animate-fadeInUp",style:{animationDelay:"0.7s"},children:[r.jsx("div",{className:"flex-shrink-0 mr-4 transition-transform duration-300 group-hover:rotate-6",children:r.jsx("div",{className:"bg-white p-3 rounded-full shadow-md group-hover:shadow-lg transition-all",children:r.jsx(Je,{type:"virtualReality",size:"md"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors",children:"VR沉浸体验"}),r.jsx("p",{className:"text-gray-600 max-w-sm",children:"通过虚拟现实技术，实现更沉浸式的数字陪伴体验"}),r.jsx("div",{className:"mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:r.jsx("span",{className:"inline-block px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs font-medium",children:"新功能"})})]})]}),r.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl hover:shadow-md transition duration-300 flex items-center group animate-fadeInUp",style:{animationDelay:"0.9s"},children:[r.jsx("div",{className:"flex-shrink-0 mr-4 transition-transform duration-300 group-hover:rotate-6",children:r.jsx("div",{className:"bg-white p-3 rounded-full shadow-md group-hover:shadow-lg transition-all",children:r.jsx(Je,{type:"digitalWorld",size:"md"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors",children:"数字世界构建"}),r.jsx("p",{className:"text-gray-600 max-w-sm",children:"创建属于您的专属数字世界，与您的数字伴侣共同探索"}),r.jsx("div",{className:"w-full h-1 bg-purple-100 rounded-full mt-2 overflow-hidden",children:r.jsx("div",{className:"h-full w-3/4 bg-gradient-to-r from-purple-400 to-indigo-400 animate-shimmer"})})]})]})]})]})]}),r.jsxs("section",{className:"py-20 px-4 relative overflow-hidden",children:[r.jsx(Pi,{animated:!1,className:"opacity-30"}),r.jsxs("div",{className:"container mx-auto text-center relative z-10",children:[r.jsxs("div",{className:"animate-fadeInUp",children:[r.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-indigo-600 animate-gradient mb-6",children:"立即开启您的AI陪伴之旅"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-10",children:"无论何时何地，都有专属于您的数字伙伴"})]}),r.jsxs("div",{className:"flex justify-center space-x-6 animate-fadeInUp",style:{animationDelay:"0.3s"},children:[r.jsxs("div",{className:"group inline-block",children:[r.jsxs(F,{to:"/register",className:"relative overflow-hidden bg-purple-600 text-white px-8 py-4 rounded-lg hover:bg-purple-700 transition shadow-lg hover:shadow-xl transform group-hover:-translate-y-1 text-lg font-medium",children:[r.jsx("span",{className:"relative z-10",children:"免费注册"}),r.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-purple-600 via-indigo-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out animate-gradient"})]}),r.jsx("div",{className:"mt-2 text-purple-500 text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"开启您的数字灵魂之旅"})]}),r.jsxs("div",{className:"group inline-block",children:[r.jsxs(F,{to:"/digital-human",className:"relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-8 py-4 rounded-lg hover:opacity-90 transition shadow-lg hover:shadow-xl transform group-hover:-translate-y-1 text-lg font-medium",children:[r.jsx("span",{className:"relative z-10",children:"数字人体验"}),r.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-purple-500 via-indigo-600 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out animate-gradient"})]}),r.jsx("div",{className:"mt-2 text-indigo-500 text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"创建您的数字永生体验"})]})]}),r.jsx("div",{className:"absolute -right-16 -bottom-16 w-64 h-64 bg-gradient-to-tl from-purple-300/30 to-indigo-300/30 rounded-full blur-3xl animate-pulse-slow"}),r.jsx("div",{className:"absolute -left-16 -bottom-8 w-48 h-48 bg-gradient-to-tr from-indigo-300/30 to-purple-300/30 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"1.5s"}})]}),r.jsx(ms,{className:"bottom-0 left-0",color:"#7C3AED",opacity:.1})]})]}),No=()=>{const[t,e]=y.useState(""),[s,i]=y.useState([]),[n,a]=y.useState(null),[o,c]=y.useState([]),[l,d]=y.useState(!1),u=y.useRef(null);y.useEffect(()=>{c([{id:"1",name:"小艾",personality:"温柔贴心，善解人意",description:"小艾是一位温柔体贴的AI助手，善于倾听和安慰，是您情感支持的最佳伙伴。"},{id:"2",name:"阿智",personality:"幽默风趣，知识渊博",description:"阿智拥有丰富的知识，喜欢用幽默的方式交流，能给您带来欢乐和知识。"},{id:"3",name:"夏夏",personality:"活泼开朗，充满活力",description:"夏夏性格开朗活泼，是您工作疲惫时放松心情的最佳伙伴。"},{id:"4",name:"星辰",personality:"浪漫文艺，思维深邃",description:"星辰有着诗人般的灵魂，擅长文学和艺术交流，能给您带来精神层面的共鸣。"}])},[]),y.useEffect(()=>{var m;(m=u.current)==null||m.scrollIntoView({behavior:"smooth"})},[s]);const h=m=>{if(m.preventDefault(),!t.trim()||!n)return;const f={sender:"user",content:t};i([...s,f]),d(!0),e(""),setTimeout(()=>{let p;switch(n.id){case"1":p={sender:"ai",content:`作为${n.name}，我能理解你的感受。有什么我能帮到你的吗？`,character:n};break;case"2":p={sender:"ai",content:`有趣的问题！让${n.name}来思考一下这个...`,character:n};break;case"3":p={sender:"ai",content:`嗨！${n.name}在这里！我们来聊点开心的事情吧！`,character:n};break;case"4":p={sender:"ai",content:`${n.name}思考了一下你说的话...这让我想起了一首诗...`,character:n};break;default:p={sender:"ai",content:"我理解你的意思了。请继续告诉我更多。",character:n}}i(g=>[...g,p]),d(!1)},1e3)};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsx("div",{className:"container mx-auto",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 min-h-[80vh]",children:[r.jsxs("div",{className:"md:col-span-1 border-r border-gray-200",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx("h2",{className:"font-bold text-xl text-gray-800",children:"选择您的AI伙伴"})}),r.jsx("div",{className:"overflow-y-auto h-[calc(80vh-64px)]",children:o.map(m=>r.jsxs("div",{className:`p-4 flex items-center cursor-pointer hover:bg-gray-50 transition ${(n==null?void 0:n.id)===m.id?"bg-purple-50 border-l-4 border-purple-500":""}`,onClick:()=>{a(m),i([])},children:[r.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mr-3 flex-shrink-0",children:r.jsx("div",{className:"bg-purple-200 w-full h-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-700 font-medium text-xs",children:m.name})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:m.name}),r.jsx("p",{className:"text-sm text-gray-500",children:m.personality})]})]},m.id))})]}),r.jsx("div",{className:"md:col-span-3 flex flex-col",children:n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mr-3",children:r.jsx("div",{className:"bg-purple-200 w-full h-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-700 font-medium text-xs",children:n.name})})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-medium text-gray-900",children:n.name}),r.jsx("p",{className:"text-sm text-gray-500",children:n.personality})]})]}),r.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:s.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),r.jsxs("h3",{className:"text-lg font-medium text-gray-800",children:["开始与",n.name,"的对话"]}),r.jsx("p",{className:"mt-2 text-gray-600",children:n.description})]}):r.jsxs("div",{className:"space-y-4",children:[s.map((m,f)=>r.jsx("div",{className:`flex ${m.sender==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-xs md:max-w-md lg:max-w-lg px-4 py-2 rounded-lg ${m.sender==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:m.content})},f)),l&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"max-w-xs md:max-w-md lg:max-w-lg px-4 py-2 rounded-lg bg-gray-100 text-gray-800 rounded-bl-none",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.2s"}})]})})}),r.jsx("div",{ref:u})]})}),r.jsxs("div",{className:"p-4 border-t border-gray-200",children:[r.jsxs("form",{onSubmit:h,className:"flex",children:[r.jsx("input",{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"输入消息...",className:"flex-1 border border-gray-300 rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),r.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded-r-lg hover:bg-purple-700 transition",disabled:l,children:"发送"})]}),r.jsxs("div",{className:"mt-2 flex justify-center space-x-3 text-xs text-gray-500",children:[r.jsx("button",{className:"hover:text-purple-600",children:"录音"}),r.jsx("span",{children:"|"}),r.jsx("button",{className:"hover:text-purple-600",children:"上传图片"}),r.jsx("span",{children:"|"}),r.jsx("button",{className:"hover:text-purple-600",children:"添加表情"})]})]})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center p-4 md:p-10 text-center",children:r.jsxs("div",{className:"max-w-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"选择一个AI伙伴开始对话"}),r.jsx("p",{className:"text-gray-600",children:"从左侧选择一个AI角色，开始您的情感陪伴之旅。每个角色都有独特的性格和特点。"})]})})})]})})})})},Co=(t,e,s,i)=>{var a,o,c,l;const n=[s,{code:e,...i||{}}];if((o=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&o.forward)return t.services.logger.forward(n,"warn","react-i18next::",!0);Le(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),(l=(c=t==null?void 0:t.services)==null?void 0:c.logger)!=null&&l.warn?t.services.logger.warn(...n):console!=null&&console.warn&&console.warn(...n)},Ti={},ps=(t,e,s,i)=>{Le(s)&&Ti[s]||(Le(s)&&(Ti[s]=new Date),Co(t,e,s,i))},Sr=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},fs=(t,e,s)=>{t.loadNamespaces(e,Sr(t,s))},ki=(t,e,s,i)=>{if(Le(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return fs(t,s,i);s.forEach(n=>{t.options.ns.indexOf(n)<0&&t.options.ns.push(n)}),t.loadLanguages(e,Sr(t,i))},Po=(t,e,s={})=>!e.languages||!e.languages.length?(ps(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(i,n)=>{var a;if(((a=s.bindI18n)==null?void 0:a.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!n(i.isLanguageChangingTo,t))return!1}}),Le=t=>typeof t=="string",To=t=>typeof t=="object"&&t!==null,ko=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ao={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Mo=t=>Ao[t],Eo=t=>t.replace(ko,Mo);let gs={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Eo};const Do=(t={})=>{gs={...gs,...t}},Lo=()=>gs;let Nr;const Ro=t=>{Nr=t},Vo=()=>Nr,Fo={type:"3rdParty",init(t){Do(t.options.react),Ro(t)}},Io=y.createContext();class Oo{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const $o=(t,e)=>{const s=y.useRef();return y.useEffect(()=>{s.current=t},[t,e]),s.current},Cr=(t,e,s,i)=>t.getFixedT(e,s,i),Bo=(t,e,s,i)=>y.useCallback(Cr(t,e,s,i),[t,e,s,i]),xe=(t,e={})=>{var k,N,R,D;const{i18n:s}=e,{i18n:i,defaultNS:n}=y.useContext(Io)||{},a=s||i||Vo();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Oo),!a){ps(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const w=(T,E)=>Le(E)?E:To(E)&&Le(E.defaultValue)?E.defaultValue:Array.isArray(T)?T[T.length-1]:T,C=[w,{},!1];return C.t=w,C.i18n={},C.ready=!1,C}(k=a.options.react)!=null&&k.wait&&ps(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Lo(),...a.options.react,...e},{useSuspense:c,keyPrefix:l}=o;let d=n||((N=a.options)==null?void 0:N.defaultNS);d=Le(d)?[d]:d||["translation"],(D=(R=a.reportNamespaces).addUsedNamespaces)==null||D.call(R,d);const u=(a.isInitialized||a.initializedStoreOnce)&&d.every(w=>Po(w,a,o)),h=Bo(a,e.lng||null,o.nsMode==="fallback"?d:d[0],l),m=()=>h,f=()=>Cr(a,e.lng||null,o.nsMode==="fallback"?d:d[0],l),[p,g]=y.useState(m);let x=d.join();e.lng&&(x=`${e.lng}${x}`);const v=$o(x),j=y.useRef(!0);y.useEffect(()=>{const{bindI18n:w,bindI18nStore:C}=o;j.current=!0,!u&&!c&&(e.lng?ki(a,e.lng,d,()=>{j.current&&g(f)}):fs(a,d,()=>{j.current&&g(f)})),u&&v&&v!==x&&j.current&&g(f);const T=()=>{j.current&&g(f)};return w&&(a==null||a.on(w,T)),C&&(a==null||a.store.on(C,T)),()=>{j.current=!1,a&&(w==null||w.split(" ").forEach(E=>a.off(E,T))),C&&a&&C.split(" ").forEach(E=>a.store.off(E,T))}},[a,x]),y.useEffect(()=>{j.current&&u&&g(m)},[a,l,u]);const S=[p,a,u];if(S.t=p,S.i18n=a,S.ready=u,u||!u&&!c)return S;throw new Promise(w=>{e.lng?ki(a,e.lng,d,()=>w()):fs(a,d,()=>w())})};let Uo={data:""},Ho=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Uo,zo=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Wo=/\/\*[^]*?\*\/|  +/g,Ai=/\n+/g,je=(t,e)=>{let s="",i="",n="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?s=a+" "+o+";":i+=a[1]=="f"?je(o,a):a+"{"+je(o,a[1]=="k"?"":e)+"}":typeof o=="object"?i+=je(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,c):c?c+" "+l:l)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=je.p?je.p(a,o):a+":"+o+";")}return s+(e&&n?e+"{"+n+"}":n)+i},he={},Pr=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Pr(t[s]);return e}return t},Ko=(t,e,s,i,n)=>{let a=Pr(t),o=he[a]||(he[a]=(l=>{let d=0,u=11;for(;d<l.length;)u=101*u+l.charCodeAt(d++)>>>0;return"go"+u})(a));if(!he[o]){let l=a!==t?t:(d=>{let u,h,m=[{}];for(;u=zo.exec(d.replace(Wo,""));)u[4]?m.shift():u[3]?(h=u[3].replace(Ai," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(Ai," ").trim();return m[0]})(t);he[o]=je(n?{["@keyframes "+o]:l}:l,s?"":"."+o)}let c=s&&he.g?he.g:null;return s&&(he.g=he[o]),((l,d,u,h)=>{h?d.data=d.data.replace(h,l):d.data.indexOf(l)===-1&&(d.data=u?l+d.data:d.data+l)})(he[o],e,i,c),o},_o=(t,e,s)=>t.reduce((i,n,a)=>{let o=e[a];if(o&&o.call){let c=o(s),l=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=l?"."+l:c&&typeof c=="object"?c.props?"":je(c,""):c===!1?"":c}return i+n+(o??"")},"");function zt(t){let e=this||{},s=t.call?t(e.p):t;return Ko(s.unshift?s.raw?_o(s,[].slice.call(arguments,1),e.p):s.reduce((i,n)=>Object.assign(i,n&&n.call?n(e.p):n),{}):s,Ho(e.target),e.g,e.o,e.k)}let Tr,xs,ys;zt.bind({g:1});let fe=zt.bind({k:1});function Go(t,e,s,i){je.p=e,Tr=t,xs=s,ys=i}function Ce(t,e){let s=this||{};return function(){let i=arguments;function n(a,o){let c=Object.assign({},a),l=c.className||n.className;s.p=Object.assign({theme:xs&&xs()},c),s.o=/ *go\d+/.test(l),c.className=zt.apply(s,i)+(l?" "+l:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),ys&&d[0]&&ys(c),Tr(d,c)}return n}}var qo=t=>typeof t=="function",vs=(t,e)=>qo(t)?t(e):t,Yo=(()=>{let t=0;return()=>(++t).toString()})(),Xo=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Zo=20,kr=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Zo)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:s}=e;return kr(t,{type:t.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+n}))}}},Jo=[],Yt={toasts:[],pausedAt:void 0},Ws=t=>{Yt=kr(Yt,t),Jo.forEach(e=>{e(Yt)})},Qo=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Yo()}),xt=t=>(e,s)=>{let i=Qo(e,t,s);return Ws({type:2,toast:i}),i.id},G=(t,e)=>xt("blank")(t,e);G.error=xt("error");G.success=xt("success");G.loading=xt("loading");G.custom=xt("custom");G.dismiss=t=>{Ws({type:3,toastId:t})};G.remove=t=>Ws({type:4,toastId:t});G.promise=(t,e,s)=>{let i=G.loading(e.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let a=e.success?vs(e.success,n):void 0;return a?G.success(a,{id:i,...s,...s==null?void 0:s.success}):G.dismiss(i),n}).catch(n=>{let a=e.error?vs(e.error,n):void 0;a?G.error(a,{id:i,...s,...s==null?void 0:s.error}):G.dismiss(i)}),t};var el=fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tl=fe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sl=fe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,il=Ce("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${el} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,nl=fe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rl=Ce("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${nl} 1s linear infinite;
`,al=fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ol=fe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ll=Ce("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${al} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ol} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,cl=Ce("div")`
  position: absolute;
`,dl=Ce("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ul=fe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hl=Ce("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ul} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ml=({toast:t})=>{let{icon:e,type:s,iconTheme:i}=t;return e!==void 0?typeof e=="string"?y.createElement(hl,null,e):e:s==="blank"?null:y.createElement(dl,null,y.createElement(rl,{...i}),s!=="loading"&&y.createElement(cl,null,s==="error"?y.createElement(il,{...i}):y.createElement(ll,{...i})))},pl=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fl=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,gl="0%{opacity:0;} 100%{opacity:1;}",xl="0%{opacity:1;} 100%{opacity:0;}",yl=Ce("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,vl=Ce("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bl=(t,e)=>{let s=t.includes("top")?1:-1,[i,n]=Xo()?[gl,xl]:[pl(s),fl(s)];return{animation:e?`${fe(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${fe(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};y.memo(({toast:t,position:e,style:s,children:i})=>{let n=t.height?bl(t.position||e||"top-center",t.visible):{opacity:0},a=y.createElement(ml,{toast:t}),o=y.createElement(vl,{...t.ariaProps},vs(t.message,t));return y.createElement(yl,{className:t.className,style:{...n,...s,...t.style}},typeof i=="function"?i({icon:a,message:o}):y.createElement(y.Fragment,null,a,o))});Go(y.createElement);zt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var wl=G;const Ar="/api",ve={GET_ALL:"/digital-humans",GET_ONE:"/digital-humans/:id",CREATE:"/digital-humans",UPDATE:"/digital-humans/:id",DELETE:"/digital-humans/:id",ADD_MEMORY:"/digital-humans/:id/memories",GET_MEMORIES:"/digital-humans/:id/memories",UPLOAD_FILES:"/digital-humans/:id/upload"};let le=[],be={},jl=1;const Fe=(t,e)=>{let s=t;for(const i in e)s=s.replace(`:${i}`,e[i]);return s},Te=async(t,e={},s)=>{try{const i=`${Ar}${t}`,n=await fetch(i,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!n.ok)throw new Error(`API request failed with status ${n.status}`);return await n.json()}catch(i){return console.warn(`API request failed: ${i.message}. Using fallback.`),s()}},se={getAll:async()=>await Te(ve.GET_ALL,{method:"GET"},()=>le),getById:async t=>{const e=Fe(ve.GET_ONE,{id:t});return await Te(e,{method:"GET"},()=>le.find(s=>s.id===t)||null)},create:async t=>await Te(ve.CREATE,{method:"POST",body:JSON.stringify(t)},()=>{const e=String(jl++),s={id:e,name:t.name,relationship:t.relationship,avatar:t.avatar,description:t.description||"",memories:0,createdAt:t.createdAt||new Date().toISOString().split("T")[0],voiceModel:t.voiceModel||!1,mediaFiles:t.mediaFiles||0};return be[e]=[],le.push(s),s}),uploadFiles:async(t,e)=>{const s=Fe(ve.UPLOAD_FILES,{id:t});try{const i=`${Ar}${s}`,n=await fetch(i,{method:"POST",body:e});if(!n.ok)throw new Error(`File upload failed with status ${n.status}`);return await n.json()}catch(i){return console.warn(`File upload failed: ${i.message}. Using fallback.`),{success:!0,message:"Files processed in demo mode"}}},update:async(t,e)=>{const s=Fe(ve.UPDATE,{id:t});return await Te(s,{method:"PUT",body:JSON.stringify(e)},()=>{const i=le.findIndex(a=>a.id===t);if(i===-1)return null;const n={...le[i],...e};return le[i]=n,n})},delete:async t=>{const e=Fe(ve.DELETE,{id:t});return await Te(e,{method:"DELETE"},()=>{const s=le.length;return le=le.filter(i=>i.id!==t),be[t]&&delete be[t],le.length<s})},addMemory:async(t,e)=>{const s=Fe(ve.ADD_MEMORY,{id:t});return await Te(s,{method:"POST",body:JSON.stringify(e)},async()=>{if(!await se.getById(t))return null;const n={id:Date.now().toString(),content:e.content,type:e.type||"text",tags:e.tags||[],date:e.date||new Date().toISOString().split("T")[0]};return be[t]||(be[t]=[]),be[t].push(n),await se.update(t,{memories:be[t].length}),n})},getMemories:async t=>{const e=Fe(ve.GET_MEMORIES,{id:t});return await Te(e,{method:"GET"},()=>be[t]||[])},search:async t=>{const e=await se.getAll();if(!t)return e;const s=t.toLowerCase();return e.filter(i=>i.name.toLowerCase().includes(s)||i.relationship.toLowerCase().includes(s))}},Sl="modulepreload",Nl=function(t,e){return new URL(t,e).href},Mi={},Cl=function(e,s,i){let n=Promise.resolve();if(s&&s.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=Nl(l,i),l in Mi)return;Mi[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(!!i)for(let f=a.length-1;f>=0;f--){const p=a[f];if(p.href===l&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Sl,d||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((f,p)=>{m.addEventListener("load",f),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},bs="/api",Xt={PROCESS_AUDIO:"/voice-chat/process",GET_VOICES:"/voice-models",CREATE_VOICE_MODEL:"/voice-models/create"},Pl=async(t,e={},s)=>{try{const i=`${bs}${t}`,n=await fetch(i,{...e,headers:{Accept:"application/json",...e.headers}});if(!n.ok)throw new Error(`API request failed with status ${n.status}`);return await n.json()}catch(i){return console.warn(`API request failed: ${i.message}. Using fallback.`),s?s():null}},W={mediaRecorder:null,audioChunks:[],stream:null,startRecording:async()=>{try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});W.stream=t;const e=new MediaRecorder(t);return W.mediaRecorder=e,W.audioChunks=[],e.ondataavailable=s=>{s.data.size>0&&W.audioChunks.push(s.data)},e.start(),Promise.resolve()}catch(t){return console.error("Error starting recording:",t),Promise.reject(t)}},stopRecording:()=>new Promise((t,e)=>{if(!W.mediaRecorder){e(new Error("No recording in progress"));return}W.mediaRecorder.onstop=()=>{const s=new Blob(W.audioChunks,{type:"audio/webm"});W.stream&&(W.stream.getTracks().forEach(i=>i.stop()),W.stream=null),t(s)},W.mediaRecorder.stop()}),cancelRecording:()=>{W.mediaRecorder&&W.mediaRecorder.state!=="inactive"&&W.mediaRecorder.stop(),W.stream&&(W.stream.getTracks().forEach(t=>t.stop()),W.stream=null),W.audioChunks=[]},checkMicrophonePermission:async()=>{try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audioinput");if(e.length===0)return!1;for(const i of e)if(i.label!=="")return!0;return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(i=>i.stop()),!0}catch(t){return console.error("Error checking microphone permission:",t),!1}},playAudio:t=>new Promise((e,s)=>{const i=new Audio(t);i.onended=()=>e(i),i.onerror=n=>s(n),i.play().catch(s)}),textToSpeech:(t,e={})=>new Promise((s,i)=>{if(!("speechSynthesis"in window)){i(new Error("Speech synthesis not supported"));return}const n=new SpeechSynthesisUtterance(t);e.lang&&(n.lang=e.lang),e.voice&&(n.voice=e.voice),e.rate&&(n.rate=e.rate),e.pitch&&(n.pitch=e.pitch),e.volume&&(n.volume=e.volume),n.onstart=()=>s(),n.onerror=a=>i(new Error(`Speech synthesis error: ${a.error}`)),window.speechSynthesis.speak(n)}),getVoices:()=>"speechSynthesis"in window?window.speechSynthesis.getVoices():[],processAudio:async(t,e={})=>{const s=new FormData;s.append("audio",t,"user_audio.webm"),e.digitalHumanId&&s.append("digitalHumanId",e.digitalHumanId),e.language&&s.append("language",e.language);try{const i=await fetch(`${bs}${Xt.PROCESS_AUDIO}`,{method:"POST",body:s});if(!i.ok)throw new Error(`Audio processing failed with status ${i.status}`);return await i.json()}catch(i){return console.warn(`Audio processing failed: ${i.message}. Using fallback.`),{success:!0,text:"This is a simulated response in demo mode.",audioUrl:null}}},getVoiceModels:async(t=null)=>{let e=Xt.GET_VOICES;return t&&(e+=`?digitalHumanId=${encodeURIComponent(t)}`),await Pl(e,{method:"GET"},()=>[{id:"demo-1",name:"Default Voice",gender:"female"},{id:"demo-2",name:"Male Voice",gender:"male"}])},createVoiceModel:async t=>{const e=new FormData;e.append("name",t.name),e.append("digitalHumanId",t.digitalHumanId);let s=0,i=0;t.audioSamples&&t.audioSamples.length&&(console.log(`Processing ${t.audioSamples.length} audio samples for voice model creation`),await Promise.all(t.audioSamples.map(async(n,a)=>{const o=n.name?n.name.split(".").pop():"wav",c=`sample_${a}.${o}`;if(e.append(`sample_${a}`,n,c),n.size>1e4&&n.type.includes("audio")){s++;try{const l=URL.createObjectURL(n),d=new Audio;d.src=l,await new Promise(u=>{d.onloadedmetadata=()=>{i+=d.duration,URL.revokeObjectURL(l),u()},d.onerror=()=>u()})}catch(l){console.log("Could not determine audio duration:",l)}}}))),console.log(`Valid samples: ${s}, Total duration: ${Math.round(i)}s`),s<3&&console.warn("Not enough valid audio samples for voice cloning. Minimum required: 3");try{if(window.digitalAvatarAdapterInitialized===!0){const a=await Cl(()=>Promise.resolve().then(()=>Dl),void 0,import.meta.url).then(o=>o.default);if(a&&typeof a.createVoiceModel=="function")return console.log("Using digitalAvatarAdapter for voice model creation"),await a.createVoiceModel(t)}const n=await fetch(`${bs}${Xt.CREATE_VOICE_MODEL}`,{method:"POST",body:e});if(!n.ok)throw new Error(`Voice model creation failed with status ${n.status}`);return await n.json()}catch(n){return console.warn(`Voice model creation failed: ${n.message}. Using fallback.`),{success:!0,modelId:`demo-${Date.now()}`,message:s>=3?"Voice model created successfully in demo mode":"Voice model created in demo mode. For best results, provide at least 3 clear audio samples."}}}},Tl=({onClose:t,onSubmit:e})=>{const{t:s}=xe(),[i,n]=y.useState(1),a=5,[o,c]=y.useState({name:"",relationship:"",description:"",photo:null,photoFiles:[],voiceFiles:[],videoFiles:[],memories:[]}),[l,d]=y.useState(null),[u,h]=y.useState(""),m=b=>{const{name:P,value:M}=b.target;c({...o,[P]:M})},f=(b,P)=>{const M=Array.from(b.target.files);P==="photo"&&M.length>0?(c({...o,photo:M[0]}),d(URL.createObjectURL(M[0]))):c({...o,[P]:[...o[P]||[],...M]})},p=()=>{u.trim()&&(c({...o,memories:[...o.memories,u]}),h(""))},g=b=>{const P=o.memories.filter((M,O)=>O!==b);c({...o,memories:P})},x=(b,P)=>{const M=o[b].filter((O,U)=>U!==P);c({...o,[b]:M})},v=async b=>{b.preventDefault();const P=G.loading(s("digitalHuman.creation.processing"));try{const M={name:o.name,relationship:o.relationship,description:o.description,memories:o.memories.length},O=await se.create(M);if(O&&O.id){if(o.photo){const I=new FormData;I.append("main_photo",o.photo,"main_photo.jpg"),await se.uploadFiles(O.id,I)}if(o.photoFiles.length){const I=new FormData;o.photoFiles.forEach((Y,H)=>{I.append(`photo_${H}`,Y,`photo_${H}.jpg`)}),await se.uploadFiles(O.id,I)}if(o.videoFiles.length){const I=new FormData;o.videoFiles.forEach((Y,H)=>{I.append(`video_${H}`,Y,`video_${H}.mp4`)}),await se.uploadFiles(O.id,I)}if(o.voiceFiles.length&&(await W.createVoiceModel({name:`${o.name}'s Voice`,digitalHumanId:O.id,audioSamples:o.voiceFiles}),await se.update(O.id,{voiceModel:!0})),o.memories.length)for(const I of o.memories)await se.addMemory(O.id,{content:I,type:"text"});let U=0;o.photo&&(U+=1),o.photoFiles.length&&(U+=o.photoFiles.length),o.videoFiles.length&&(U+=o.videoFiles.length),o.voiceFiles.length&&(U+=o.voiceFiles.length),await se.update(O.id,{mediaFiles:U,avatar:!!o.photo}),G.success(s("digitalHuman.creation.success")),G.dismiss(P),e(O.id)}else throw new Error("Failed to create digital human")}catch(M){console.error("Error creating digital human:",M),G.error(s("digitalHuman.creation.error")),G.dismiss(P)}},j=()=>n(Math.min(i+1,a)),S=()=>n(Math.max(i-1,1)),k=()=>r.jsxs("div",{className:"w-full mb-6",children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-purple-700",children:s(`digitalHuman.creation.step${i}Title`)}),r.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[i,"/",a]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-purple-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${i/a*100}%`}})})]}),N=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-medium mb-2",children:[s("digitalHuman.creation.nameLabel"),"*"]}),r.jsx("input",{type:"text",name:"name",value:o.name,onChange:m,placeholder:s("digitalHuman.creation.namePlaceholder"),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-medium mb-2",children:[s("digitalHuman.creation.relationshipLabel"),"*"]}),r.jsxs("select",{name:"relationship",value:o.relationship,onChange:m,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[r.jsx("option",{value:"",children:s("digitalHuman.creation.selectRelationship")}),r.jsx("option",{value:"parent",children:s("digitalHuman.creation.relationships.parent")}),r.jsx("option",{value:"child",children:s("digitalHuman.creation.relationships.child")}),r.jsx("option",{value:"sibling",children:s("digitalHuman.creation.relationships.sibling")}),r.jsx("option",{value:"grandparent",children:s("digitalHuman.creation.relationships.grandparent")}),r.jsx("option",{value:"grandchild",children:s("digitalHuman.creation.relationships.grandchild")}),r.jsx("option",{value:"friend",children:s("digitalHuman.creation.relationships.friend")}),r.jsx("option",{value:"spouse",children:s("digitalHuman.creation.relationships.spouse")}),r.jsx("option",{value:"other",children:s("digitalHuman.creation.relationships.other")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:s("digitalHuman.creation.descriptionLabel",{defaultValue:"Description"})}),r.jsx("textarea",{name:"description",value:o.description,onChange:m,placeholder:s("digitalHuman.creation.descriptionPlaceholder",{defaultValue:"Describe this person..."}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 h-32 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]})]}),R=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-medium mb-2",children:[s("digitalHuman.creation.photoUploadLabel"),"*"]}),r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all ${l?"border-purple-300":"border-gray-300 hover:border-purple-500"}`,onClick:()=>document.getElementById("mainPhotoUpload").click(),children:[l?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("img",{src:l,alt:"Preview",className:"h-48 object-cover rounded-lg mb-3"}),r.jsx("span",{className:"text-sm text-purple-600",children:s("digitalHuman.creation.changePhoto",{defaultValue:"Click to change photo"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-gray-500 mb-2",children:s("digitalHuman.creation.photoUploadInstruction")}),r.jsx("div",{className:"text-xs text-gray-400",children:s("digitalHuman.creation.photoUploadFormats")})]}),r.jsx("input",{id:"mainPhotoUpload",type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:b=>f(b,"photo"),className:"hidden"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:s("digitalHuman.creation.additionalPhotosLabel")}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-purple-500 transition-all",onClick:()=>document.getElementById("additionalPhotos").click(),children:[r.jsx("div",{className:"text-gray-500 mb-2",children:s("digitalHuman.creation.photoUploadInstruction")}),r.jsx("div",{className:"text-xs text-gray-400",children:s("digitalHuman.creation.photoUploadFormats")}),r.jsx("input",{id:"additionalPhotos",type:"file",multiple:!0,accept:"image/jpeg,image/png,image/jpg",onChange:b=>f(b,"photoFiles"),className:"hidden"})]}),o.photoFiles.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[o.photoFiles.length," ",s("digitalHuman.creation.files")]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.photoFiles.slice(0,4).map((b,P)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(b),alt:`Preview ${P}`,className:"h-16 w-16 object-cover rounded-md"}),r.jsx("button",{type:"button",onClick:()=>x("photoFiles",P),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]},P)),o.photoFiles.length>4&&r.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded-md flex items-center justify-center",children:r.jsxs("span",{className:"text-sm text-gray-500",children:["+",o.photoFiles.length-4]})})]})]})]})]}),D=()=>r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:s("digitalHuman.creation.voiceUploadLabel")}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-purple-700 mb-1",children:s("digitalHuman.creation.voiceUploadInstruction")}),r.jsx("p",{className:"text-xs text-purple-600",children:s("digitalHuman.creation.voiceUploadFormats")}),r.jsxs("div",{className:"mt-2 border-t border-purple-100 pt-2",children:[r.jsx("p",{className:"text-xs text-purple-800 font-medium",children:s("digitalHuman.creation.voiceTipsTitle",{defaultValue:"Tips for best results:"})}),r.jsxs("ul",{className:"text-xs text-purple-700 list-disc ml-4 mt-1 space-y-1",children:[r.jsx("li",{children:s("digitalHuman.creation.voiceTip1",{defaultValue:"Upload at least 3 audio samples of the person speaking"})}),r.jsx("li",{children:s("digitalHuman.creation.voiceTip2",{defaultValue:"Each clip should be 5-30 seconds in length"})}),r.jsx("li",{children:s("digitalHuman.creation.voiceTip3",{defaultValue:"Clear audio without background noise works best"})}),r.jsx("li",{children:s("digitalHuman.creation.voiceTip4",{defaultValue:"Samples should capture the person's natural speaking voice"})})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-purple-500 transition-all",onClick:()=>document.getElementById("voiceFiles").click(),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),r.jsx("div",{className:"text-gray-500",children:s("digitalHuman.creation.uploadVoiceSamples",{defaultValue:"Upload Voice Samples"})}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select MP3, WAV, or M4A files"}),r.jsx("input",{id:"voiceFiles",type:"file",multiple:!0,accept:"audio/mpeg,audio/wav,audio/mp4",onChange:b=>f(b,"voiceFiles"),className:"hidden"})]}),r.jsxs("div",{className:"flex-1 border-2 border-gray-200 rounded-lg p-6 text-center relative",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-purple-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),r.jsx("div",{className:"text-gray-700",children:s("digitalHuman.creation.recordVoice")}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Coming soon"}),r.jsx("div",{className:"absolute top-2 right-2 bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded",children:"Beta"})]})]}),o.voiceFiles.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[o.voiceFiles.length," ",s("digitalHuman.creation.files")]}),r.jsx("div",{className:"space-y-2",children:o.voiceFiles.map((b,P)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),r.jsx("span",{className:"text-sm",children:b.name})]}),r.jsx("button",{type:"button",onClick:()=>x("voiceFiles",P),className:"text-red-500 hover:text-red-700",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},P))})]})]})}),w=()=>r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:s("digitalHuman.creation.videoUploadLabel")}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-purple-700 mb-1",children:s("digitalHuman.creation.videoUploadInstruction")}),r.jsx("p",{className:"text-xs text-purple-600",children:s("digitalHuman.creation.videoUploadFormats")})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-purple-500 transition-all",onClick:()=>document.getElementById("videoFiles").click(),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),r.jsx("div",{className:"text-gray-500",children:s("digitalHuman.creation.uploadVideos",{defaultValue:"Click or drag to upload videos"})}),r.jsx("input",{id:"videoFiles",type:"file",multiple:!0,accept:"video/mp4,video/quicktime",onChange:b=>f(b,"videoFiles"),className:"hidden"})]}),o.videoFiles.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[o.videoFiles.length," ",s("digitalHuman.creation.files")]}),r.jsx("div",{className:"space-y-2",children:o.videoFiles.map((b,P)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm",children:b.name})]}),r.jsx("button",{type:"button",onClick:()=>x("videoFiles",P),className:"text-red-500 hover:text-red-700",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},P))})]})]})}),C=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:s("digitalHuman.creation.memoryLabel")}),r.jsx("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-sm text-purple-700",children:s("digitalHuman.creation.memoryInstruction",{defaultValue:"Add stories, memories, and characteristics that make this person special"})})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("textarea",{value:u,onChange:b=>h(b.target.value),placeholder:s("digitalHuman.creation.memoryPlaceholder"),className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none h-20"}),r.jsx("button",{type:"button",onClick:p,disabled:!u.trim(),className:"bg-purple-600 text-white rounded-lg px-4 py-2 hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed",children:s("digitalHuman.creation.addButton",{defaultValue:"Add"})})]}),o.memories.length>0&&r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:s("digitalHuman.creation.addedMemories",{defaultValue:"Added Memories:"})}),o.memories.map((b,P)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-700",children:b}),r.jsx("button",{type:"button",onClick:()=>g(P),className:"text-red-500 hover:text-red-700 ml-2",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},P))]})]})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-4",children:s("digitalHuman.creation.privacyNote")})]}),T=()=>{switch(i){case 1:return N();case 2:return R();case 3:return D();case 4:return w();case 5:return C();default:return N()}},E=()=>{switch(i){case 1:return o.name&&o.relationship;case 2:return o.photo!==null;case 3:case 4:case 5:return!0;default:return!1}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-auto",children:r.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s("digitalHuman.creation.title")}),r.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:s("digitalHuman.creation.description")}),k(),r.jsxs("form",{onSubmit:v,className:"space-y-8",children:[T(),r.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:S,disabled:i===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s("digitalHuman.creation.previous")}),i<a?r.jsx("button",{type:"button",onClick:j,disabled:!E(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s("digitalHuman.creation.next")}):r.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:s("digitalHuman.creation.createButton")})]})]})]})})})},kl="digitalHumanMemoryDB",Al=1,ke={CONVERSATION:"conversation",FACT:"fact",PREFERENCE:"preference",RELATIONSHIP:"relationship",EMOTION:"emotion",EVENT:"event"},Ml=(t,e)=>{if(!t||!e)return 0;const s=t.toLowerCase().split(/\s+/),i=e.toLowerCase();let n=0;return s.forEach(a=>{a.length>2&&i.includes(a)&&n++}),n/s.length},V={db:null,initialize:async()=>new Promise((t,e)=>{try{if(!window.indexedDB){console.warn("Your browser doesn't support IndexedDB. Using fallback memory storage."),V.setupInMemoryFallback(),t(!0);return}const s=window.indexedDB.open(kl,Al);s.onupgradeneeded=i=>{const n=i.target.result;if(!n.objectStoreNames.contains("memories")){const a=n.createObjectStore("memories",{keyPath:"id"});a.createIndex("digitalHumanId","digitalHumanId",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}if(!n.objectStoreNames.contains("conversations")){const a=n.createObjectStore("conversations",{keyPath:"id"});a.createIndex("digitalHumanId","digitalHumanId",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}},s.onsuccess=i=>{V.db=i.target.result,console.log("Memory database initialized successfully"),t(!0)},s.onerror=i=>{console.error("Error initializing memory database:",i.target.error),V.setupInMemoryFallback(),t(!1)}}catch(s){console.error("Error in memory database initialization:",s),V.setupInMemoryFallback(),t(!1)}}),setupInMemoryFallback:()=>{V.inMemoryMemories={},V.inMemoryConversations={},V.isUsingFallback=!0,console.log("Using in-memory fallback for memory storage")},storeMemory:async t=>{if(!t.digitalHumanId||!t.content)throw new Error("Memory must have digitalHumanId and content properties");const e={id:t.id||`memory-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,digitalHumanId:t.digitalHumanId,content:t.content,type:t.type||ke.FACT,importance:t.importance||.5,timestamp:t.timestamp||Date.now(),metadata:t.metadata||{},tags:t.tags||[]};return V.isUsingFallback?(V.inMemoryMemories[e.digitalHumanId]||(V.inMemoryMemories[e.digitalHumanId]=[]),V.inMemoryMemories[e.digitalHumanId].push(e),e.id):new Promise((s,i)=>{try{const o=V.db.transaction(["memories"],"readwrite").objectStore("memories").add(e);o.onsuccess=()=>s(e.id),o.onerror=c=>i(new Error(`Memory storage failed: ${c.target.error}`))}catch(n){console.error("Error in memory storage:",n),i(n)}})},storeConversationMessage:async t=>{if(!t.digitalHumanId||!t.content||!t.role)throw new Error("Message must have digitalHumanId, content, and role properties");const e={id:t.id||`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,digitalHumanId:t.digitalHumanId,content:t.content,role:t.role,timestamp:t.timestamp||Date.now(),metadata:t.metadata||{}};return V.isUsingFallback?(V.inMemoryConversations[e.digitalHumanId]||(V.inMemoryConversations[e.digitalHumanId]=[]),V.inMemoryConversations[e.digitalHumanId].push(e),e.id):new Promise((s,i)=>{try{const o=V.db.transaction(["conversations"],"readwrite").objectStore("conversations").add(e);o.onsuccess=()=>s(e.id),o.onerror=c=>i(new Error(`Message storage failed: ${c.target.error}`))}catch(n){console.error("Error in message storage:",n),i(n)}})},getMemories:async(t,e={})=>{if(V.isUsingFallback){let s=V.inMemoryMemories[t]||[];return e.type&&(s=s.filter(i=>i.type===e.type)),s.sort((i,n)=>n.timestamp-i.timestamp),e.limit&&e.limit>0&&(s=s.slice(0,e.limit)),s}return new Promise((s,i)=>{try{const c=V.db.transaction(["memories"],"readonly").objectStore("memories").index("digitalHumanId").getAll(IDBKeyRange.only(t));c.onsuccess=l=>{let d=l.target.result||[];e.type&&(d=d.filter(u=>u.type===e.type)),d.sort((u,h)=>h.timestamp-u.timestamp),e.limit&&e.limit>0&&(d=d.slice(0,e.limit)),s(d)},c.onerror=l=>i(new Error(`Memory retrieval failed: ${l.target.error}`))}catch(n){console.error("Error retrieving memories:",n),i(n)}})},getConversationHistory:async(t,e={})=>{if(V.isUsingFallback){let s=V.inMemoryConversations[t]||[];return e.before&&(s=s.filter(i=>i.timestamp<e.before)),e.after&&(s=s.filter(i=>i.timestamp>e.after)),s.sort((i,n)=>i.timestamp-n.timestamp),e.limit&&e.limit>0&&(s=s.slice(-e.limit)),s}return new Promise((s,i)=>{try{const c=V.db.transaction(["conversations"],"readonly").objectStore("conversations").index("digitalHumanId").getAll(IDBKeyRange.only(t));c.onsuccess=l=>{let d=l.target.result||[];e.before&&(d=d.filter(u=>u.timestamp<e.before)),e.after&&(d=d.filter(u=>u.timestamp>e.after)),d.sort((u,h)=>u.timestamp-h.timestamp),e.limit&&e.limit>0&&(d=d.slice(-e.limit)),s(d)},c.onerror=l=>i(new Error(`Conversation retrieval failed: ${l.target.error}`))}catch(n){console.error("Error retrieving conversation:",n),i(n)}})},searchMemories:async(t,e,s={})=>{const n=(await V.getMemories(t)).map(c=>{const l=Ml(e,c.content);return{...c,relevance:l}}),a=s.minRelevance||.1;let o=n.filter(c=>c.relevance>=a);return o.sort((c,l)=>l.relevance-c.relevance),s.limit&&s.limit>0&&(o=o.slice(0,s.limit)),o},generateMemorySummary:async t=>{try{const e=await V.getMemories(t,{limit:20});return!e||e.length===0?"No memories available.":(e.sort((n,a)=>a.importance-n.importance),`Memory Summary:
${e.slice(0,5).map(n=>`[${new Date(n.timestamp).toLocaleDateString()}] ${n.content}`).join(`
`)}

Total memories: ${e.length}`)}catch(e){return console.error("Error generating memory summary:",e),"Unable to generate memory summary at this time."}},clearMemories:async t=>V.isUsingFallback?(delete V.inMemoryMemories[t],delete V.inMemoryConversations[t],!0):new Promise((e,s)=>{try{const i=V.db.transaction(["memories"],"readwrite"),n=i.objectStore("memories"),o=n.index("digitalHumanId").openKeyCursor(IDBKeyRange.only(t));o.onsuccess=h=>{const m=h.target.result;m&&(n.delete(m.primaryKey),m.continue())};const c=V.db.transaction(["conversations"],"readwrite"),l=c.objectStore("conversations"),u=l.index("digitalHumanId").openKeyCursor(IDBKeyRange.only(t));u.onsuccess=h=>{const m=h.target.result;m&&(l.delete(m.primaryKey),m.continue())},i.oncomplete=()=>{c.oncomplete=()=>{e(!0)},c.onerror=h=>{s(new Error(`Conversation clear failed: ${h.target.error}`))}},i.onerror=h=>{s(new Error(`Memory clear failed: ${h.target.error}`))}}catch(i){console.error("Error clearing memories:",i),s(i)}}),formatConversationForLLM:async(t,e={})=>{try{return(await V.getConversationHistory(t,{limit:e.limit||10})).map(i=>({role:i.role,content:i.content}))}catch(s){return console.error("Error formatting conversation for LLM:",s),[]}},extractMemoriesFromConversation:async(t,e=5)=>{try{const s=await V.getConversationHistory(t,{limit:e}),i=[{regex:/my name is (\w+)/i,type:ke.FACT,importance:.9},{regex:/I (like|love|enjoy|prefer) (.+)/i,type:ke.PREFERENCE,importance:.7},{regex:/I (hate|dislike|don't like) (.+)/i,type:ke.PREFERENCE,importance:.7},{regex:/I (feel|am) (happy|sad|angry|excited|worried|nervous)/i,type:ke.EMOTION,importance:.6},{regex:/I (work as|am) a (.+)/i,type:ke.FACT,importance:.8},{regex:/my (birthday|anniversary) is (.+)/i,type:ke.FACT,importance:.9}],n=[];return s.filter(c=>c.role==="user").forEach(c=>{const l=c.content;i.forEach(d=>{const u=l.match(d.regex);if(u){const h=u[0],m={digitalHumanId:t,content:h,type:d.type,importance:d.importance,timestamp:Date.now(),metadata:{source:"conversation",messageId:c.id}};n.push(V.storeMemory(m))}})}),await Promise.all(n)}catch(s){return console.error("Error extracting memories from conversation:",s),[]}}},$={config:{keys:{openai:"",elevenlabs:""},endpoints:{openai:"https://api.openai.com/v1",elevenlabs:"https://api.elevenlabs.io/v1"},timeouts:{openai:6e4,elevenlabs:3e4}},initialize:t=>($.config={...$.config,...t},console.log("API Manager initialized with config"),!0),getAuthHeaders:t=>{switch(t){case"openai":return{Authorization:`Bearer ${$.config.keys.openai}`,"Content-Type":"application/json"};case"elevenlabs":return{"xi-api-key":$.config.keys.elevenlabs,"Content-Type":"application/json"};default:return{"Content-Type":"application/json"}}}},it={config:{language:"auto",model:"whisper-1",options:{vadSensitivity:.5,filterProfanity:!1}},initialize:t=>(it.config={...it.config,...t},console.log("Speech Recognition Service initialized"),!0),transcribeAudio:async(t,e="auto")=>{try{if($.config.keys.openai){const s=new File([t],"recording.webm",{type:"audio/webm"}),i=new FormData;i.append("file",s),i.append("model",it.config.model),e&&e!=="auto"&&i.append("language",e);const n=await fetch(`${$.config.endpoints.openai}/audio/transcriptions`,{method:"POST",headers:{Authorization:`Bearer ${$.config.keys.openai}`},body:i,signal:AbortSignal.timeout($.config.timeouts.openai)});if(!n.ok)throw new Error(`Whisper API error: ${n.status}`);return(await n.json()).text||""}else return"webkitSpeechRecognition"in window||"SpeechRecognition"in window?new Promise(s=>{setTimeout(()=>{s("I couldn't transcribe your speech due to missing API key. Please provide what you said in text form.")},1e3)}):"Your browser doesn't support speech recognition. Please enable API integration."}catch(s){return console.error("Error in speech recognition:",s),"I couldn't understand what you said. Could you try again?"}}},te={config:{primaryModel:"gpt-4o-mini",fallbackModel:"gpt-3.5-turbo",systemPrompt:"You are a helpful digital avatar assistant representing a specific person. Keep responses concise, engaging, and in character with your assigned personality. Respond with empathy and personal warmth.",temperature:.7,maxTokens:512},initialize:t=>(te.config={...te.config,...t},console.log("Dialogue Service initialized"),!0),generateResponse:async(t,e)=>{var s,i;try{if($.config.keys.openai){const n=[];let a=te.config.systemPrompt;(s=e==null?void 0:e.avatarPersonality)!=null&&s.background&&(a+=` Your background: ${e.avatarPersonality.background}`),n.push({role:"system",content:a}),e!=null&&e.history&&Array.isArray(e.history)?e.history.slice(-10).forEach(l=>{n.push({role:l.role==="user"?"user":"assistant",content:l.content})}):n.push({role:"user",content:t}),e!=null&&e.history&&e.history.length>0&&e.history[e.history.length-1].role!=="user"&&n.push({role:"user",content:t});const o=await fetch(`${$.config.endpoints.openai}/chat/completions`,{method:"POST",headers:$.getAuthHeaders("openai"),body:JSON.stringify({model:te.config.primaryModel,messages:n,temperature:te.config.temperature,max_tokens:te.config.maxTokens}),signal:AbortSignal.timeout($.config.timeouts.openai)});if(!o.ok){if(te.config.primaryModel!==te.config.fallbackModel){console.warn(`Primary model failed, trying fallback model ${te.config.fallbackModel}`);const l=await fetch(`${$.config.endpoints.openai}/chat/completions`,{method:"POST",headers:$.getAuthHeaders("openai"),body:JSON.stringify({model:te.config.fallbackModel,messages:n,temperature:te.config.temperature,max_tokens:te.config.maxTokens}),signal:AbortSignal.timeout($.config.timeouts.openai)});if(l.ok)return(await l.json()).choices[0].message.content}throw new Error(`OpenAI API error: ${o.status}`)}return(await o.json()).choices[0].message.content}else return console.log("No API key available. Using rule-based fallback."),t.toLowerCase().includes("hello")||t.toLowerCase().includes("hi")?"Hello! It's nice to talk with you today.":t.toLowerCase().includes("how are you")?"I'm doing well, thank you for asking. How are you feeling today?":t.toLowerCase().includes("name")?(i=e==null?void 0:e.avatarPersonality)!=null&&i.name?`My name is ${e.avatarPersonality.name}. It's wonderful to chat with you.`:"I'm your digital companion. I'm here to chat with you and keep you company.":"That's interesting! Tell me more about what's on your mind."}catch(n){return console.error("Error in dialogue generation:",n),"I'm having trouble thinking clearly at the moment. Could we try again in a moment?"}}},Q={config:{defaultVoiceId:"premade/adam",stability:.5,similarityBoost:.75,style:0,useSpeakerBoost:!0},cachedVoices:null,initialize:async t=>(Q.config={...Q.config,...t},console.log("Speech Synthesis Service initialized"),!0),getVoices:async(t=!1)=>{try{if(Q.cachedVoices&&!t)return Q.cachedVoices;if($.config.keys.elevenlabs){const e=await fetch(`${$.config.endpoints.elevenlabs}/voices`,{method:"GET",headers:$.getAuthHeaders("elevenlabs"),signal:AbortSignal.timeout($.config.timeouts.elevenlabs)});if(!e.ok)throw new Error(`ElevenLabs API error: ${e.status}`);const i=(await e.json()).voices.map(n=>{var a;return{id:n.voice_id,name:n.name,gender:((a=n.labels)==null?void 0:a.gender)||"neutral",preview:n.preview_url}});return Q.cachedVoices=i,i}else{const e=[{id:"premade/adam",name:"Adam",gender:"male"},{id:"premade/rachel",name:"Rachel",gender:"female"},{id:"premade/antoni",name:"Antoni",gender:"male"},{id:"premade/elli",name:"Elli",gender:"female"}];return Q.cachedVoices=e,e}}catch(e){return console.error("Error getting voices:",e),[{id:"premade/adam",name:"Adam",gender:"male"},{id:"premade/rachel",name:"Rachel",gender:"female"}]}},synthesizeSpeech:async(t,e,s={})=>{try{if($.config.keys.elevenlabs&&t){const i=e||Q.config.defaultVoiceId;let n=Q.config.stability,a=Q.config.similarityBoost;s&&(s.emphasis>.5&&(n-=.1),s.joy>.5&&(a+=.1),s.sadness>.5&&(n+=.1),n=Math.max(0,Math.min(1,n)),a=Math.max(0,Math.min(1,a)));const o={text:t,model_id:"eleven_multilingual_v2",voice_settings:{stability:n,similarity_boost:a,style:Q.config.style,use_speaker_boost:Q.config.useSpeakerBoost}},c=await fetch(`${$.config.endpoints.elevenlabs}/text-to-speech/${i}`,{method:"POST",headers:$.getAuthHeaders("elevenlabs"),body:JSON.stringify(o),signal:AbortSignal.timeout($.config.timeouts.elevenlabs)});if(!c.ok)throw new Error(`ElevenLabs API error: ${c.status}`);const l=await c.arrayBuffer();return await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(l)}else return console.warn("No ElevenLabs API key. Using browser speech synthesis."),new(window.AudioContext||window.webkitAudioContext)().createBuffer(1,1,22050)}catch(i){return console.error("Error synthesizing speech:",i),new(window.AudioContext||window.webkitAudioContext)().createBuffer(1,1,22050)}}},Zt=new Map,El=async()=>{try{const t=window.OPENAI_API_KEY||"",e=window.ELEVENLABS_API_KEY||"";return console.log("Initializing with API keys available:",{openai:t?"Available":"Not available",elevenlabs:e?"Available":"Not available"}),$.initialize({keys:{openai:t,elevenlabs:e},endpoints:{openai:"https://api.openai.com/v1",elevenlabs:"https://api.elevenlabs.io/v1"},timeouts:{openai:6e4,elevenlabs:3e4}}),it.initialize({language:"auto",model:"whisper-1",options:{vadSensitivity:.5,filterProfanity:!1}}),te.initialize({primaryModel:"gpt-4o-mini",fallbackModel:"gpt-3.5-turbo",systemPrompt:"You are a helpful digital avatar assistant. Keep responses concise and engaging.",temperature:.7,maxTokens:512}),await Q.initialize({defaultVoiceId:"",stability:.5,similarityBoost:.75,style:0,useSpeakerBoost:!0}),!0}catch(t){return console.error("Error initializing Digital Avatar services:",t),!1}},Tt=async t=>{if(await V.initialize(),!Zt.has(t)){const e={history:[],relevantMemories:[],userProfile:{id:`user-${t}`,name:"User",preferences:{language:"en",theme:"light",notifications:!1,voiceInteraction:!0,avatarPreferences:{}},interactionHistory:[]},avatarPersonality:{traits:{},background:"",interests:[],communication:{formality:.5,humor:.5,empathy:.8}}};try{const s=await V.getConversationHistory(t,{limit:20});s&&s.length>0&&(e.history=s.map(n=>({id:n.id,role:n.role,content:n.content,timestamp:n.timestamp,language:"en"})));const i=await V.getMemories(t,{limit:10});i&&i.length>0&&(e.relevantMemories=i)}catch(s){console.warn("Failed to load memories from MemoryAdapter:",s)}Zt.set(t,e)}return Zt.get(t)},Ei=async(t,e,s)=>{const i=await Tt(t),n=`msg-${Date.now()}`,a=Date.now(),o={id:n,role:e,content:s,timestamp:a,language:"en"};i.history.push(o),i.history.length>50&&(i.history=i.history.slice(i.history.length-50));try{if(await V.storeConversationMessage({id:n,digitalHumanId:t,role:e,content:s,timestamp:a,metadata:{language:"en",source:"digitalAvatarAdapter"}}),e==="assistant"&&s.length>50)try{await V.extractMemoriesFromConversation(t,5)}catch(c){console.warn("Failed to extract memories from conversation:",c)}}catch(c){console.error("Failed to store conversation in MemoryAdapter:",c)}},Et={initialize:async()=>{const t=await El();return t?console.log("Digital Avatar Adapter initialized successfully"):console.warn("Digital Avatar Adapter initialization failed, falling back to default behavior"),t},processAudio:async(t,e={})=>{var s;try{const{digitalHumanId:i="default",language:n="en"}=e;let a="";try{a=await it.transcribeAudio(t,n),console.log("Transcription result:",a)}catch(l){console.error("Error in speech recognition:",l),a="I couldn't understand what you said."}let o="";try{const l=await Tt(i);await Ei(i,"user",a);try{const u=await V.searchMemories(i,a,{limit:3});u&&u.length>0&&(l.relevantMemories=u,console.log("Retrieved relevant memories:",u.length))}catch(u){console.warn("Failed to retrieve relevant memories:",u)}let d={...l};if(l.relevantMemories&&l.relevantMemories.length>0){const u=l.relevantMemories.map(h=>`Memory: ${h.content}`).join(`
`);d.avatarPersonality&&(d.avatarPersonality.background=(d.avatarPersonality.background||"")+`

Relevant memories to consider:
${u}`)}o=await te.generateResponse(a,d),console.log("Dialogue response:",o),await Ei(i,"assistant",o)}catch(l){console.error("Error generating dialogue:",l),o="Sorry, I encountered an issue while processing your request."}let c=null;try{const l=await Q.getVoices();let d=null;const u=await Tt(i);(s=u==null?void 0:u.avatarPersonality)!=null&&s.voiceId?d=u.avatarPersonality.voiceId:d=l.length>0?l[0].id:null;const h=Et.detectEmotionsFromText(o);if(d){const m=await Q.synthesizeSpeech(o,d,h),f=new(window.AudioContext||window.webkitAudioContext),p=f.createBufferSource();p.buffer=m;const g=f.createMediaStreamDestination();p.connect(g),p.start(0);const x=new MediaRecorder(g.stream),v=[];x.ondataavailable=S=>{S.data.size>0&&v.push(S.data)};const j=await new Promise(S=>{x.onstop=()=>{const k=new Blob(v,{type:"audio/mp3"});S(k)},x.start(),setTimeout(()=>x.stop(),Math.max(1500,o.length*80))});c=URL.createObjectURL(j)}}catch(l){console.error("Error in speech synthesis:",l)}return{success:!0,text:o,transcription:a,audioUrl:c}}catch(i){return console.error("Error processing audio with Digital Avatar platform:",i),{success:!1,text:"I'm having trouble connecting right now. Please try again in a moment.",audioUrl:null}}},getVoiceModels:async(t=null)=>{try{return(await Q.getVoices()).map(s=>({id:s.id,name:s.name,gender:s.gender||"neutral"}))}catch(e){return console.error("Error getting voice models from Digital Avatar platform:",e),[{id:"demo-1",name:"Default Voice",gender:"female"},{id:"demo-2",name:"Male Voice",gender:"male"}]}},createVoiceModel:async t=>{try{if(!$.config.keys.elevenlabs)throw new Error("ElevenLabs API key is required for voice model creation");const e=new FormData;if(e.append("name",t.name||`Voice Model ${Date.now()}`),e.append("description",`Digital human voice model created from audio samples. ID: ${t.digitalHumanId}`),!t.audioSamples||t.audioSamples.length<3)throw new Error("At least 3 audio samples are required to create a voice model");const s=Math.min(t.audioSamples.length,10);for(let a=0;a<s;a++)e.append("files",t.audioSamples[a]);console.log("Sending voice creation request to ElevenLabs");const i=await fetch(`${$.config.endpoints.elevenlabs}/voices/add`,{method:"POST",headers:$.getAuthHeaders("elevenlabs"),body:e,signal:AbortSignal.timeout($.config.timeouts.elevenlabs*2)});if(!i.ok){const a=await i.text();throw new Error(`Voice model creation failed: ${i.status} - ${a}`)}const n=await i.json();if(console.log("Voice model created successfully:",n),t.digitalHumanId){const a=Tt(t.digitalHumanId);a&&(a.avatarPersonality.voiceId=n.voice_id)}return{success:!0,modelId:n.voice_id,name:n.name,message:"Voice model created successfully"}}catch(e){return console.error("Error creating voice model:",e),{success:!1,message:`Error creating voice model: ${e.message}`,error:e.message}}},detectEmotionsFromText:t=>{const e={joy:0,sadness:0,anger:0,surprise:0,emphasis:0},s=t.toLowerCase();return(s.includes("happy")||s.includes("glad")||s.includes("great")||s.includes("wonderful")||s.includes("excellent")||s.includes("😊")||s.includes("😄")||s.includes("joy"))&&(e.joy=.8),(s.includes("sad")||s.includes("sorry")||s.includes("unfortunate")||s.includes("regret")||s.includes("unhappy")||s.includes("😢")||s.includes("😔"))&&(e.sadness=.8),(s.includes("angry")||s.includes("upset")||s.includes("frustrat")||s.includes("annoy")||s.includes("mad")||s.includes("😠")||s.includes("😡"))&&(e.anger=.8),(s.includes("wow")||s.includes("amazing")||s.includes("surpris")||s.includes("unbelievable")||s.includes("incredible")||s.includes("😮")||s.includes("😲"))&&(e.surprise=.8),(s.includes("important")||s.includes("critical")||s.includes("essential")||s.includes("crucial")||s.includes("key")||s.includes("vital")||s.includes("!"))&&(e.emphasis=.8),e}},Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),Ll=({digitalHuman:t,onClose:e})=>{const{t:s}=xe(),[i,n]=y.useState(!1),[a,o]=y.useState([]),[c,l]=y.useState(!1),[d,u]=y.useState(!1),[h,m]=y.useState(null),[f,p]=y.useState(!1),[g,x]=y.useState(!1),v=y.useRef(null),j=y.useRef(null);y.useEffect(()=>{(async()=>{try{if(!(typeof AudioContext<"u"||typeof webkitAudioContext<"u")||!(typeof MediaRecorder<"u")){console.warn("Browser does not support required audio APIs"),x(!0);return}const E=Et.initialize(),b=new Promise((M,O)=>setTimeout(()=>O(new Error("Initialization timeout")),5e3)),P=await Promise.race([E,b]).catch(M=>(console.error("Adapter initialization error or timeout:",M),!1));p(P),x(!P),P?console.log("Digital Avatar adapter initialized successfully"):console.warn("Digital Avatar adapter initialization failed, using standard audioService")}catch(C){console.error("Error initializing Digital Avatar adapter:",C),x(!0)}})()},[]),y.useEffect(()=>{const w={id:Date.now(),sender:"ai",content:s("digitalHuman.voiceChat.welcome",{name:(t==null?void 0:t.name)||s("digitalHuman.voiceChat.defaultName")}),audioUrl:null};o([w])},[t,s]),y.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[a]);const S=async()=>{try{if(typeof MediaRecorder>"u")throw new Error("MediaRecorder not supported in this browser");await W.startRecording(),n(!0),m(null)}catch(w){console.error("Failed to start recording:",w),m(s("digitalHuman.voiceChat.microphoneError")),setTimeout(()=>{o(C=>[...C,{id:Date.now(),sender:"ai",content:s("digitalHuman.voiceChat.fallbackToText",{defaultValue:"Voice recording is not available. Please use text chat instead."}),isError:!1}]),m(null)},2e3)}},k=async()=>{n(!1);try{const w=await W.stopRecording(),C=Date.now();o(T=>[...T,{id:C,sender:"user",content:s("digitalHuman.voiceChat.userAudioMessage"),audioUrl:URL.createObjectURL(w),audioBlob:w}]),N(w,C)}catch(w){console.error("Error processing recording:",w),m("Failed to process voice recording")}},N=async(w,C)=>{l(!0);try{const T=f?Et:W,E=(t==null?void 0:t.language)||s("common:languageCode",{defaultValue:"en-US"}),b=await T.processAudio(w,{digitalHumanId:(t==null?void 0:t.id)||"default",language:E});b.transcription&&(o(U=>U.map(I=>I.id===C?{...I,content:b.transcription,transcription:!0}:I)),console.log("Updated with transcription:",b.transcription));const P=b.text,M=b.audioUrl,O={id:Date.now(),sender:"ai",content:P,audioUrl:M};if(o(U=>[...U,O]),l(!1),M)v.current&&(v.current.src=M,v.current.play(),u(!0));else{const U=new SpeechSynthesisUtterance(P);U.lang=(t==null?void 0:t.language)||"en-US",speechSynthesis.speak(U)}}catch(T){console.error("Error processing AI response:",T),m(s("digitalHuman.voiceChat.processingError")),l(!1);const E={id:Date.now(),sender:"ai",content:s("digitalHuman.voiceChat.serverError"),isError:!0};o(b=>[...b,E]),setTimeout(()=>{const b=[s("digitalHuman.voiceChat.responses.howAreYou"),s("digitalHuman.voiceChat.responses.goodMemories"),s("digitalHuman.voiceChat.responses.missYou"),s("digitalHuman.voiceChat.responses.loveTalking"),s("digitalHuman.voiceChat.responses.rememberWhen")],P=b[Math.floor(Math.random()*b.length)],M={id:Date.now(),sender:"ai",content:`${s("digitalHuman.voiceChat.fallbackMessage")} ${P}`,audioUrl:null};o(U=>[...U,M]);const O=new SpeechSynthesisUtterance(P);O.lang=(t==null?void 0:t.language)||"en-US",speechSynthesis.speak(O)},1e3)}},R=w=>{v.current&&(v.current.src=w,v.current.play(),u(!0))},D=()=>{u(!1)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center",children:[t!=null&&t.avatar?r.jsx("img",{src:t.avatar,alt:t.name,className:"w-10 h-10 rounded-full object-cover mr-3"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-purple-600 font-medium text-lg",children:((t==null?void 0:t.name)||s("digitalHuman.voiceChat.defaultName")).charAt(0)})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"font-medium",children:(t==null?void 0:t.name)||s("digitalHuman.voiceChat.defaultName")}),f&&r.jsx("span",{className:"ml-2 bg-green-100 text-green-800 text-xs px-1 rounded",children:"Enhanced"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:s("digitalHuman.voiceChat.companion")})]})]}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",ref:j,children:[a.map(w=>r.jsx("div",{className:`flex ${w.sender==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${w.sender==="user"?"bg-purple-600 text-white rounded-br-none":w.isError?"bg-red-100 text-red-800 rounded-bl-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[w.transcription?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-purple-300 mb-1",children:s("digitalHuman.voiceChat.transcription",{defaultValue:"Transcription"})}),r.jsx("p",{className:"text-sm",children:w.content})]}):r.jsx("p",{className:"text-sm",children:w.content}),w.audioUrl&&r.jsxs("button",{onClick:()=>R(w.audioUrl),className:`mt-2 text-xs flex items-center ${w.sender==="user"?"text-purple-200 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),s("digitalHuman.voiceChat.play")]})]})},w.id)),c&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"max-w-[80%] bg-gray-100 rounded-lg p-3 rounded-bl-none",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:s("digitalHuman.voiceChat.thinking")})]})})})]}),r.jsxs("div",{className:"p-4 border-t",children:[h&&r.jsx("div",{className:"mb-4 bg-red-100 text-red-700 p-2 rounded-lg text-sm",children:h}),r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{onClick:i?k:S,className:`rounded-full w-16 h-16 flex items-center justify-center ${i?"bg-red-600 text-white animate-pulse":f?"bg-green-600 text-white":"bg-purple-600 text-white"}`,disabled:c||d,children:i?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("rect",{x:"6",y:"6",width:"12",height:"12",strokeWidth:2})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})}),r.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:s(i?"digitalHuman.voiceChat.tapToStop":"digitalHuman.voiceChat.tapToTalk")}),f&&r.jsx("p",{className:"text-center text-xs text-green-600 mt-1",children:"Using enhanced Digital Avatar Platform"})]}),r.jsx("audio",{ref:v,onEnded:D,className:"hidden"})]})})},Rl=()=>{const{t}=xe(),e=ho(),[s,i]=y.useState([]),[n,a]=y.useState(!0),[o,c]=y.useState(null);y.useEffect(()=>{async function b(){try{a(!0),c(null);const P=await se.getAll();P&&P.length>0?i(P):i([{id:"1",name:"张伯父",relationship:"祖父",avatar:"/assets/digital-humans/grandpa.jpg",memories:15,createdAt:"2023-11-10",voiceModel:!0,mediaFiles:23},{id:"2",name:"李奶奶",relationship:"外婆",avatar:"/assets/digital-humans/grandma.jpg",memories:7,createdAt:"2023-12-05",voiceModel:!1,mediaFiles:16}])}catch(P){console.error("Error loading digital humans:",P),c(t("digitalHuman.errors.loadFailed")),i([{id:"1",name:"张伯父",relationship:"祖父",avatar:"/assets/digital-humans/grandpa.jpg",memories:15,createdAt:"2023-11-10",voiceModel:!0,mediaFiles:23}])}finally{a(!1)}}b()},[t]);const[l,d]=y.useState(null),[u,h]=y.useState(!1),[m,f]=y.useState(!1),[p,g]=y.useState("memories"),[x,v]=y.useState(""),j={name:"张伯父",avatar:"/assets/digital-humans/grandpa.jpg",spouse:"王奶奶",children:[{name:"张叔叔",avatar:"/assets/digital-humans/uncle.jpg",spouse:"李阿姨",children:[{name:"张小明",avatar:"/assets/digital-humans/cousin1.jpg"},{name:"张小红",avatar:"/assets/digital-humans/cousin2.jpg"}]},{name:"张母",avatar:"/assets/digital-humans/mother.jpg",spouse:"李父",children:[{name:"我",avatar:"/assets/digital-humans/me.jpg",current:!0}]}]},S=[{id:"m1",content:"张伯父教我下棋的时光是最美好的记忆，他总是有无穷的耐心，一遍遍教我如何思考下一步。",date:"2022-05-15",tags:["童年","家庭","游戏"]},{id:"m2",content:"记得每年春节，伯父都会给我准备红包，还会讲述他年轻时候的故事，那些战争年代的经历让我深受启发。",date:"2023-01-21",tags:["春节","故事","历史"]},{id:"m3",content:"伯父最喜欢的食物是红烧肉，每次奶奶做这道菜，他总会多吃两碗饭。我现在做红烧肉的方法，就是跟奶奶学的。",date:"2022-10-03",tags:["美食","家庭","技艺"]}],k=[{id:1,sender:"user",content:"伯父，您还记得您是如何遇见奶奶的吗？"},{id:2,sender:"ai",content:"当然记得，那是1955年的春天，我在县城参加教师会议的时候遇见了你奶奶。她当时在文化馆工作，负责安排我们的住宿。她温柔大方，我第一眼见到她就被吸引住了。"},{id:3,sender:"user",content:"那您是怎么追到奶奶的呢？"},{id:4,sender:"ai",content:'哈哈，那时候不像你们现在这么开放。我每周都会去文化馆"偶遇"她，帮她整理书籍，一起讨论文学作品。大约三个月后，我鼓起勇气邀请她去看露天电影。半年后我们就订婚了，第二年结的婚。'}],N=[{id:"media1",type:"image",url:"/assets/digital-humans/memory1.jpg",date:"1965-03-12",description:"结婚照"},{id:"media2",type:"image",url:"/assets/digital-humans/memory2.jpg",date:"1970-10-01",description:"全家福"},{id:"media3",type:"audio",url:"/assets/digital-humans/audio1.mp3",date:"1985-07-15",description:"讲述战争经历"},{id:"media4",type:"video",url:"/assets/digital-humans/video1.mp4",date:"1995-02-03",description:"80大寿视频"},{id:"media5",type:"image",url:"/assets/digital-humans/memory3.jpg",date:"2000-01-01",description:"千禧年新年"},{id:"media6",type:"image",url:"/assets/digital-humans/memory4.jpg",date:"2010-06-18",description:"与孙子们"}],R=b=>{d(b),g("memories")},D=()=>{x.trim()&&l&&(se.addMemory(l.id,{type:"text",content:x,tags:[t("digitalHuman.memories.manuallyAdded")]}),alert(t("digitalHuman.memories.added")),v(""))},w=async b=>{try{const P=await se.getById(b);if(P)i(M=>[...M,P]),d(P),h(!1);else throw new Error("Failed to load created digital human")}catch(P){console.error("Error processing created digital human:",P),alert(t("digitalHuman.creation.error")),h(!1)}},C=()=>{l&&f(!0)},T=({file:b})=>b.type==="image"?r.jsxs("div",{className:"relative group overflow-hidden rounded-lg",children:[r.jsx("img",{src:b.url,alt:b.description,className:"w-full h-24 object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:b.description})})]}):b.type==="audio"?r.jsxs("div",{className:"relative group overflow-hidden rounded-lg bg-purple-100 p-2 flex items-center justify-center h-24",children:[r.jsx("div",{className:"text-purple-600 text-3xl",children:"🎵"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:b.description})})]}):b.type==="video"?r.jsxs("div",{className:"relative group overflow-hidden rounded-lg bg-blue-100 p-2 flex items-center justify-center h-24",children:[r.jsx("div",{className:"text-blue-600 text-3xl",children:"🎬"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:b.description})})]}):null,E=({node:b,level:P=0})=>r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:`flex items-center ${b.current?"bg-purple-50 border border-purple-200 rounded-lg p-2":""}`,children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mr-3",children:r.jsx("img",{src:b.avatar,alt:b.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-medium ${b.current?"text-purple-700":"text-gray-900"}`,children:b.name}),b.spouse&&r.jsxs("p",{className:"text-xs text-gray-500",children:[t("digitalHuman.familyTree.spouse"),": ",b.spouse]})]})]}),b.children&&b.children.length>0&&r.jsx("div",{className:"pl-8 mt-2 border-l-2 border-gray-200",children:b.children.map((M,O)=>r.jsx(E,{node:M,level:P+1},`${M.name}-${O}`))})]});return r.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:[r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:t("digitalHuman.title")}),r.jsx("p",{className:"text-gray-600 mt-1",children:t("digitalHuman.description")})]}),r.jsx("button",{onClick:()=>h(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition",children:t("digitalHuman.createButton")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:t("digitalHuman.myDigitalHumans")}),r.jsxs("div",{className:"space-y-3",children:[s.map(b=>r.jsxs("div",{onClick:()=>R(b),className:`p-3 flex items-center rounded-lg cursor-pointer transition ${(l==null?void 0:l.id)===b.id?"bg-purple-50 border-l-4 border-purple-500":"hover:bg-gray-50"}`,children:[r.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mr-3",children:r.jsx("img",{src:b.avatar,alt:b.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:b.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:[b.relationship," · ",b.memories," ",t("digitalHuman.memories.title")," · ",b.mediaFiles," ",t("digitalHuman.mediaFiles")]}),r.jsx("div",{className:"mt-1 flex items-center",children:b.voiceModel&&r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded",children:t("digitalHuman.voiceModel")})})]})]},b.id)),s.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("p",{className:"text-gray-500",children:t("digitalHuman.noDigitalHumans")}),r.jsx("button",{onClick:()=>h(!0),className:"mt-3 text-purple-600 hover:text-purple-800 transition",children:t("digitalHuman.createNew")})]})]})]})}),r.jsx("div",{className:"lg:col-span-3",children:l?r.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[r.jsx("div",{className:"h-40 md:h-60 relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500",children:r.jsx("div",{className:"absolute inset-0 flex items-end",children:r.jsx("div",{className:"w-32 h-32 md:w-48 md:h-48 relative mx-auto mb-[-24px] md:mb-[-40px]",children:r.jsx("img",{src:l.avatar,alt:l.name,className:"w-full h-full object-cover rounded-full border-4 border-white shadow-lg"})})})}),r.jsxs("div",{className:"pt-10 md:pt-14 px-4 md:px-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:l.name}),r.jsxs("p",{className:"text-gray-500",children:[l.relationship," · ",t("digitalHuman.created")," ",l.createdAt]})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsxs("nav",{className:"-mb-px flex space-x-6",children:[r.jsx("button",{onClick:()=>g("memories"),className:`py-3 border-b-2 font-medium text-sm ${p==="memories"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t("digitalHuman.memories.title")}),r.jsx("button",{onClick:()=>g("conversation"),className:`py-3 border-b-2 font-medium text-sm ${p==="conversation"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t("digitalHuman.conversation")}),r.jsx("button",{onClick:()=>g("media"),className:`py-3 border-b-2 font-medium text-sm ${p==="media"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t("digitalHuman.mediaFiles")}),r.jsx("button",{onClick:()=>g("tree"),className:`py-3 border-b-2 font-medium text-sm ${p==="tree"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t("digitalHuman.familyTree")})]})}),p==="memories"&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t("digitalHuman.memories.addNew")}),r.jsxs("div",{className:"flex",children:[r.jsx("textarea",{value:x,onChange:b=>v(b.target.value),placeholder:t("digitalHuman.memories.placeholder"),className:"flex-1 border border-gray-300 rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",rows:"2"}),r.jsx("button",{onClick:D,className:"bg-purple-600 text-white px-4 py-2 rounded-r-lg hover:bg-purple-700 transition",children:t("digitalHuman.memories.save")})]}),r.jsx("div",{className:"mt-2 text-sm text-gray-500",children:t("digitalHuman.memories.description")})]}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t("digitalHuman.memories.title")}),r.jsx("div",{className:"space-y-4",children:S.map(b=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-gray-800 mb-3",children:b.content}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"flex space-x-2",children:b.tags.map((P,M)=>r.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:P},M))}),r.jsx("span",{className:"text-xs text-gray-500",children:b.date})]})]},b.id))})]}),p==="conversation"&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"mb-4 bg-purple-50 rounded-lg p-3 flex justify-between items-center",children:[r.jsx("p",{className:"text-sm text-purple-700",children:t("digitalHuman.conversation.intro")}),l.voiceModel&&r.jsxs("button",{onClick:C,className:"flex items-center gap-1 bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),t("digitalHuman.conversation.startVoiceChat")]})]}),r.jsx("div",{className:"space-y-4 mb-4",children:k.map(b=>r.jsxs("div",{className:`flex ${b.sender==="user"?"justify-end":"justify-start"}`,children:[b.sender==="ai"&&r.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden mr-2 flex-shrink-0",children:r.jsx("img",{src:l.avatar,alt:l.name,className:"w-full h-full object-cover"})}),r.jsx("div",{className:`max-w-xs md:max-w-md lg:max-w-lg px-4 py-2 rounded-lg ${b.sender==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:b.content})]},b.id))}),r.jsxs("div",{className:"flex",children:[r.jsx("input",{type:"text",placeholder:t("digitalHuman.conversation.inputPlaceholder"),className:"flex-1 border border-gray-300 rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),r.jsx("button",{className:"bg-purple-600 text-white px-4 py-2 rounded-r-lg hover:bg-purple-700 transition",children:t("digitalHuman.conversation.send")})]})]}),p==="media"&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t("digitalHuman.mediaFiles")}),r.jsx("button",{className:"text-sm text-purple-600 hover:text-purple-800 transition",children:t("digitalHuman.uploadNewFile")})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[N.map(b=>r.jsx(T,{file:b},b.id)),r.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center h-24 cursor-pointer hover:border-purple-500",children:r.jsx("span",{className:"text-gray-500 text-2xl",children:"+"})})]})]}),p==="tree"&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t("digitalHuman.familyTree")}),r.jsx("button",{onClick:()=>e(`/digital-human/family-tree/${l.id}`),className:"text-sm bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition",children:t("digitalHuman.reunionFeatures.title")})]}),r.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-5",children:r.jsx("p",{className:"text-purple-700",children:t("digitalHuman.reunionFeatures.description")})}),r.jsx(E,{node:j}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs(F,{to:`/digital-human/family-tree/${l.id}`,className:"text-purple-600 hover:text-purple-800 transition font-medium",children:[t("digitalHuman.visualTree")," →"]})})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto bg-purple-100 rounded-full flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:t("digitalHuman.createButton")}),r.jsx("p",{className:"text-gray-600 mb-6",children:t("digitalHuman.createDescription")}),r.jsx("button",{onClick:()=>h(!0),className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition",children:t("digitalHuman.startCreating")})]})})]})]}),u&&r.jsx(Tl,{onClose:()=>h(!1),onSubmit:w}),m&&l&&r.jsx(Ll,{digitalHuman:l,onClose:()=>f(!1)})]})},Vl=()=>{const{t}=xe(),{digitalHumanId:e}=yr(),[s,i]=y.useState(!0),[n,a]=y.useState(null),[o,c]=y.useState("visual");y.useState(!1);const[l,d]=y.useState(!1),u=[{id:"1",name:"张伯父",relationship:"祖父",avatar:"/assets/digital-humans/grandpa.jpg"},{id:"2",name:"李奶奶",relationship:"外婆",avatar:"/assets/digital-humans/grandma.jpg"}],h=u.find(p=>p.id===e)||u[0],m={id:"root",name:"张伯父",relationship:"祖父",avatar:"/assets/digital-humans/grandpa.jpg",birthDate:"1930-05-15",deathDate:"2015-11-23",bio:"张伯父是一位退休教师，喜欢园艺和下象棋。他曾是家族的精神支柱，为后代树立了勤劳和奉献的榜样。",spouse:{name:"王奶奶",avatar:"/assets/digital-humans/grandma.jpg",birthDate:"1932-08-22",deathDate:"2018-03-10",bio:"王奶奶是一位慈爱的家庭主妇，擅长烹饪传统菜肴，尤其是红烧肉和饺子。她的爱心和关怀温暖了整个家族。"},children:[{id:"child1",name:"张叔叔",relationship:"叔叔",avatar:"/assets/digital-humans/uncle.jpg",birthDate:"1955-02-18",bio:"张叔叔是一位成功的企业家，在电子行业有自己的公司。他热爱旅行和摄影。",spouse:{name:"李阿姨",avatar:"/assets/digital-humans/aunt.jpg",birthDate:"1957-11-30",bio:"李阿姨曾是一名医生，现已退休。她热爱园艺和阅读。"},children:[{id:"grandchild1",name:"张小明",avatar:"/assets/digital-humans/cousin1.jpg",birthDate:"1985-07-12",bio:"张小明在IT行业工作，是一名软件工程师。他喜欢打篮球和旅游。"}]},{id:"child2",name:"张母",relationship:"母亲",avatar:"/assets/digital-humans/mother.jpg",birthDate:"1958-09-25",bio:"张母是一名小学教师，热爱教育事业。她擅长讲故事，常常用自己的经历教育孩子们。",spouse:{name:"李父",avatar:"/assets/digital-humans/father.jpg",birthDate:"1956-12-10",bio:"李父是一名机械工程师，喜欢修理各种家用电器。他的动手能力很强，总能解决家里的各种问题。"},children:[{id:"self",name:"我",avatar:"/assets/digital-humans/me.jpg",birthDate:"1985-06-23",bio:"我喜欢科技和历史，目前在一家科技公司工作。空闲时间喜欢研究家族历史和数字技术。",current:!0}]}],memories:[{id:"mem1",title:"第一次教我下象棋",date:"1992-07-15",description:"爷爷在我7岁时教我下象棋，那是夏天的一个下午，我们坐在院子的老槐树下，阳光透过树叶斑驳地洒在棋盘上。"}]};t("digitalHuman.grandparentsBorn"),`${m.name}`,t("digitalHuman.parentsBorn"),`${m.children[0].name}${m.children[1].name}`,t("digitalHuman.selfBorn"),`${m.children[1].children[0].name}`,`${m.name}${t("digitalHuman.dateOfDeath")}`,t("digitalHuman.digitalHumanCreated"),`${m.name}`,y.useEffect(()=>{(async()=>{i(!0);try{a(m)}catch(g){console.error("Error fetching family data:",g)}finally{i(!1)}})()},[e]);const f=(p,g=0)=>p?r.jsxs("div",{className:`mb-6 ${g>0?"ml-8 border-l-2 border-gray-200 pl-6":""}`,children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mr-4 border-4 border-white shadow-lg",children:r.jsx("img",{src:p.avatar,alt:p.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:p.name}),p.current&&r.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded",children:t("digitalHuman.relationshipTypes.self")})]}),p.birthDate&&r.jsxs("p",{className:"text-sm text-gray-600",children:[t("digitalHuman.dateOfBirth"),": ",p.birthDate,p.deathDate&&` · ${t("digitalHuman.dateOfDeath")}: ${p.deathDate}`]}),p.bio&&r.jsx("p",{className:"text-gray-700 mt-2",children:p.bio})]})]}),p.spouse&&r.jsx("div",{className:"ml-8 mt-4 border-l-2 border-pink-200 pl-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden mr-4 border-2 border-pink-200",children:r.jsx("img",{src:p.spouse.avatar,alt:p.spouse.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:p.spouse.name}),r.jsx("p",{className:"text-sm text-gray-500",children:t("digitalHuman.relationshipTypes.spouse")})]})]})}),p.children&&p.children.length>0&&r.jsxs("div",{className:"mt-6 pl-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-500 mb-3",children:[t("digitalHuman.relationshipTypes.child"),":"]}),p.children.map(x=>f(x,g+1))]})]},p.id||p.name):null;return s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin h-10 w-10 text-purple-600 mx-auto mb-4",children:"Loading..."}),r.jsx("p",{className:"text-gray-600",children:t("digitalHuman.loadingFamilyTree")})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-2",children:r.jsx("div",{children:r.jsxs(F,{to:"/digital-human",className:"text-gray-500 hover:text-gray-700 transition flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),t("digitalHuman.title")]})})}),r.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:[h==null?void 0:h.name," ",t("digitalHuman.familyTree")]}),r.jsx("p",{className:"text-gray-600 mt-1",children:t("digitalHuman.loveNeverDies")})]}),r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-6 mb-8 text-white shadow-lg",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[r.jsxs("div",{className:"mb-4 md:mb-0",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:t("digitalHuman.reunionFeatures.title")}),r.jsx("p",{className:"opacity-90",children:t("digitalHuman.reunionFeatures.description")})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsx("button",{onClick:()=>d(!0),className:"bg-white text-purple-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition",children:t("digitalHuman.reunionFeatures.createRoom")})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:o==="visual"&&n&&r.jsx("div",{className:"family-tree-container",children:f(n)})})]})})},Fl=()=>{const[t,e]=y.useState([]),[s,i]=y.useState([]),[n,a]=y.useState(!1),[o,c]=y.useState("all");y.useEffect(()=>{e([{id:"1",name:"高级会员月卡",price:30,image:"/assets/shop/membership.jpg",category:"membership",description:"30天高级会员权限，解锁所有角色和无限对话次数",popular:!0},{id:"2",name:"高级会员年卡",price:298,image:"/assets/shop/membership-year.jpg",category:"membership",description:"365天高级会员权限，比月卡更划算，享受全年无限服务",popular:!0,discount:!0,originalPrice:360},{id:"3",name:"时尚风衣",price:15,image:"/assets/shop/coat.jpg",category:"character",description:"给你的AI角色穿上这件时尚风衣，展现不同风格",forType:"character"},{id:"4",name:"复古眼镜",price:8,image:"/assets/shop/glasses.jpg",category:"character",description:"复古风格眼镜，为AI角色增添知性魅力",forType:"character"},{id:"5",name:"豪华猫窝",price:12,image:"/assets/shop/pet-bed.jpg",category:"pet",description:"舒适的豪华猫窝，提升宠物幸福感和休息质量",forType:"pet"},{id:"6",name:"宠物玩具套装",price:20,image:"/assets/shop/pet-toys.jpg",category:"pet",description:"多种互动玩具组合，让您的虚拟宠物玩得更开心",forType:"pet",discount:!0,originalPrice:25},{id:"7",name:"海滩别墅场景",price:25,image:"/assets/shop/beach-scene.jpg",category:"scene",description:"浪漫的海滩别墅场景，适合放松心情和特别的约会",forType:"scene"},{id:"8",name:"雪山木屋场景",price:25,image:"/assets/shop/snow-scene.jpg",category:"scene",description:"温馨的雪山木屋场景，壁炉、热巧克力和皑皑白雪",forType:"scene"},{id:"9",name:"声音模型训练",price:50,image:"/assets/shop/voice-training.jpg",category:"digital-human",description:"为您的数字人创建定制声音模型，让交流更加真实",forType:"digital-human"},{id:"10",name:"高清3D模型定制",price:99,image:"/assets/shop/3d-model.jpg",category:"digital-human",description:"根据照片创建高清3D人物模型，支持VR互动",forType:"digital-human"}])},[]);const l=p=>{const g=s.find(x=>x.id===p.id);i(g?s.map(x=>x.id===p.id?{...x,quantity:x.quantity+1}:x):[...s,{...p,quantity:1}])},d=p=>{i(s.filter(g=>g.id!==p))},u=(p,g)=>{g<1||i(s.map(x=>x.id===p?{...x,quantity:g}:x))},h=s.reduce((p,g)=>p+g.price*g.quantity,0),m=o==="all"?t:t.filter(p=>p.category===o),f=({product:p})=>r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden transition hover:shadow-md",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:p.image,alt:p.name,className:"w-full h-48 object-cover"}),p.popular&&r.jsx("span",{className:"absolute top-2 left-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"热门"}),p.discount&&r.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"优惠"})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.name}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsxs("span",{className:"text-purple-600 font-bold",children:["¥",p.price]}),p.originalPrice&&r.jsxs("span",{className:"text-gray-400 text-sm line-through ml-2",children:["¥",p.originalPrice]})]}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:p.description}),r.jsx("button",{onClick:()=>l(p),className:"mt-3 w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700 transition",children:"添加到购物车"})]})]});return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"模拟商城"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"选购虚拟物品，升级您的AI伙伴体验"})]}),r.jsx("div",{className:"mt-4 md:mt-0 flex items-center",children:r.jsxs("button",{onClick:()=>a(!n),className:"flex items-center bg-white text-gray-800 px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"购物车 (",s.reduce((p,g)=>p+g.quantity,0),")"]})})]}),r.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4 overflow-x-auto",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg ${o==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"全部"}),r.jsx("button",{onClick:()=>c("membership"),className:`px-4 py-2 rounded-lg ${o==="membership"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"会员服务"}),r.jsx("button",{onClick:()=>c("character"),className:`px-4 py-2 rounded-lg ${o==="character"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"角色装扮"}),r.jsx("button",{onClick:()=>c("pet"),className:`px-4 py-2 rounded-lg ${o==="pet"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"宠物用品"}),r.jsx("button",{onClick:()=>c("scene"),className:`px-4 py-2 rounded-lg ${o==="scene"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"场景背景"}),r.jsx("button",{onClick:()=>c("digital-human"),className:`px-4 py-2 rounded-lg ${o==="digital-human"?"bg-purple-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"数字人服务"})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(p=>r.jsx(f,{product:p},p.id))}),n&&r.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",onClick:()=>a(!1),children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity"}),r.jsx("div",{className:"absolute inset-y-0 right-0 max-w-full flex",children:r.jsx("div",{className:"w-screen max-w-md",onClick:p=>p.stopPropagation(),children:r.jsxs("div",{className:"h-full flex flex-col bg-white shadow-xl",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"购物车"}),r.jsx("button",{onClick:()=>a(!1),className:"ml-3 h-7 w-7 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"mt-8",children:s.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("p",{className:"mt-4 text-gray-500",children:"您的购物车是空的"}),r.jsx("button",{onClick:()=>a(!1),className:"mt-4 text-purple-600 hover:text-purple-800",children:"继续购物"})]}):r.jsx("div",{className:"flow-root",children:r.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:s.map(p=>r.jsxs("li",{className:"py-6 flex",children:[r.jsx("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:r.jsx("img",{src:p.image,alt:p.name,className:"h-full w-full object-cover"})}),r.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[r.jsx("h3",{children:p.name}),r.jsxs("p",{className:"ml-4",children:["¥",p.price*p.quantity]})]}),r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[p.description.substring(0,40),"..."]})]}),r.jsxs("div",{className:"flex-1 flex items-end justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center border rounded",children:[r.jsx("button",{onClick:()=>u(p.id,p.quantity-1),className:"px-2 py-1 text-gray-600 hover:bg-gray-100",children:"-"}),r.jsx("span",{className:"px-4 py-1 border-x",children:p.quantity}),r.jsx("button",{onClick:()=>u(p.id,p.quantity+1),className:"px-2 py-1 text-gray-600 hover:bg-gray-100",children:"+"})]}),r.jsx("div",{className:"flex",children:r.jsx("button",{onClick:()=>d(p.id),className:"font-medium text-red-600 hover:text-red-800",children:"删除"})})]})]})]},p.id))})})})]}),s.length>0&&r.jsxs("div",{className:"border-t border-gray-200 p-6 space-y-4",children:[r.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[r.jsx("p",{children:"合计"}),r.jsxs("p",{children:["¥",h]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"运费与税费将在结账时计算"}),r.jsx("div",{children:r.jsx("button",{onClick:()=>{alert("此功能仅作演示，不会实际处理支付")},className:"w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition font-medium",children:"支付"})}),r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{onClick:()=>a(!1),className:"text-sm font-medium text-purple-600 hover:text-purple-800",children:"继续购物 →"})})]})]})})})]}),r.jsxs("div",{className:"mt-10 bg-white rounded-xl shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"会员特权"}),r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg overflow-hidden",children:r.jsxs("div",{className:"md:flex items-center",children:[r.jsxs("div",{className:"md:w-2/3 p-6 md:p-8",children:[r.jsx("div",{className:"inline-block bg-white bg-opacity-20 px-3 py-1 rounded-full text-white text-sm font-medium mb-3",children:"限时优惠"}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"高级会员年卡"}),r.jsx("p",{className:"text-white text-opacity-90 mb-4 max-w-md",children:"解锁所有高级功能，包括无限对话、优先客服、专属角色定制、VR高级场景等特权。"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"text-3xl font-bold text-white",children:"¥298"}),r.jsx("span",{className:"text-xl line-through text-white text-opacity-70 ml-2",children:"¥360"}),r.jsx("span",{className:"ml-2 bg-yellow-400 text-yellow-800 text-xs font-bold px-2 py-1 rounded",children:"省¥62"})]}),r.jsx("button",{onClick:()=>l(t.find(p=>p.id==="2")),className:"bg-white text-purple-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition",children:"立即订购"})]}),r.jsx("div",{className:"md:w-1/3 p-6",children:r.jsx("img",{src:"/assets/shop/vip-card.png",alt:"VIP Card",className:"w-full max-w-xs mx-auto"})})]})})]})]})})},Mr=y.createContext({});function Il(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ks=typeof window<"u",Ol=Ks?y.useLayoutEffect:y.useEffect,_s=y.createContext(null),Er=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function $l(t=!0){const e=y.useContext(_s);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:i,register:n}=e,a=y.useId();y.useEffect(()=>{if(t)return n(a)},[t]);const o=y.useCallback(()=>t&&i&&i(a),[a,i,t]);return!s&&i?[!1,o]:[!0]}function Gs(t,e){t.indexOf(e)===-1&&t.push(e)}function qs(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const ie=t=>t;let ws=ie;const Bl={skipAnimations:!1,useManualTiming:!1};function Ys(t){let e;return()=>(e===void 0&&(e=t()),e)}const _e=(t,e,s)=>{const i=e-t;return i===0?1:(s-t)/i};class Xs{constructor(){this.subscriptions=[]}add(e){return Gs(this.subscriptions,e),()=>qs(this.subscriptions,e)}notify(e,s,i){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,s,i);else for(let a=0;a<n;a++){const o=this.subscriptions[a];o&&o(e,s,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const me=t=>t*1e3,pe=t=>t/1e3;function Dr(t,e){return e?t*(1e3/e):0}const Ul=Ys(()=>window.ScrollTimeline!==void 0);class Hl{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=s}attachTimeline(e,s){const i=this.animations.map(n=>{if(Ul()&&n.attachTimeline)return n.attachTimeline(e);if(typeof s=="function")return s(n)});return()=>{i.forEach((n,a)=>{n&&n(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class zl extends Hl{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function Zs(t,e){return t?t[e]||t.default||t:void 0}const js=2e4;function Lr(t){let e=0;const s=50;let i=t.next(e);for(;!i.done&&e<js;)e+=s,i=t.next(e);return e>=js?1/0:e}function Js(t){return typeof t=="function"}function Di(t,e){t.timeline=e,t.onfinish=null}const Qs=t=>Array.isArray(t)&&typeof t[0]=="number",Wl={linearEasing:void 0};function Kl(t,e){const s=Ys(t);return()=>{var i;return(i=Wl[e])!==null&&i!==void 0?i:s()}}const Dt=Kl(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rr=(t,e,s=10)=>{let i="";const n=Math.max(Math.round(e/s),2);for(let a=0;a<n;a++)i+=t(_e(0,n-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function Vr(t){return!!(typeof t=="function"&&Dt()||!t||typeof t=="string"&&(t in Ss||Dt())||Qs(t)||Array.isArray(t)&&t.every(Vr))}const tt=([t,e,s,i])=>`cubic-bezier(${t}, ${e}, ${s}, ${i})`,Ss={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tt([0,.65,.55,1]),circOut:tt([.55,0,1,.45]),backIn:tt([.31,.01,.66,-.59]),backOut:tt([.33,1.53,.69,.99])};function Fr(t,e){if(t)return typeof t=="function"&&Dt()?Rr(t,e):Qs(t)?tt(t):Array.isArray(t)?t.map(s=>Fr(s,e)||Ss.easeOut):Ss[t]}const jt=["read","resolveKeyframes","update","preRender","render","postRender"],Li={value:null,addProjectionMetrics:null};function _l(t,e){let s=new Set,i=new Set,n=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},l=0;function d(h){o.has(h)&&(u.schedule(h),t()),l++,h(c)}const u={schedule:(h,m=!1,f=!1)=>{const g=f&&n?s:i;return m&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{i.delete(h),o.delete(h)},process:h=>{if(c=h,n){a=!0;return}n=!0,[s,i]=[i,s],s.forEach(d),e&&Li.value&&Li.value.frameloop[e].push(l),l=0,s.clear(),n=!1,a&&(a=!1,u.process(h))}};return u}const Gl=40;function Ir(t,e){let s=!1,i=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=jt.reduce((v,j)=>(v[j]=_l(a,e?j:void 0),v),{}),{read:c,resolveKeyframes:l,update:d,preRender:u,render:h,postRender:m}=o,f=()=>{const v=performance.now();s=!1,n.delta=i?1e3/60:Math.max(Math.min(v-n.timestamp,Gl),1),n.timestamp=v,n.isProcessing=!0,c.process(n),l.process(n),d.process(n),u.process(n),h.process(n),m.process(n),n.isProcessing=!1,s&&e&&(i=!1,t(f))},p=()=>{s=!0,i=!0,n.isProcessing||t(f)};return{schedule:jt.reduce((v,j)=>{const S=o[j];return v[j]=(k,N=!1,R=!1)=>(s||p(),S.schedule(k,N,R)),v},{}),cancel:v=>{for(let j=0;j<jt.length;j++)o[jt[j]].cancel(v)},state:n,steps:o}}const{schedule:B,cancel:Se,state:q,steps:Jt}=Ir(typeof requestAnimationFrame<"u"?requestAnimationFrame:ie,!0),{schedule:ei,cancel:Wp}=Ir(queueMicrotask,!1);let kt;function ql(){kt=void 0}const de={now:()=>(kt===void 0&&de.set(q.isProcessing||Bl.useManualTiming?q.timestamp:performance.now()),kt),set:t=>{kt=t,queueMicrotask(ql)}},oe={x:!1,y:!1};function Or(){return oe.x||oe.y}function Yl(t){return t==="x"||t==="y"?oe[t]?null:(oe[t]=!0,()=>{oe[t]=!1}):oe.x||oe.y?null:(oe.x=oe.y=!0,()=>{oe.x=oe.y=!1})}function Xl(t,e,s){var i;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=(i=void 0)!==null&&i!==void 0?i:n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function $r(t,e){const s=Xl(t),i=new AbortController,n={passive:!0,...e,signal:i.signal};return[s,n,()=>i.abort()]}function Ri(t){return!(t.pointerType==="touch"||Or())}function Zl(t,e,s={}){const[i,n,a]=$r(t,s),o=c=>{if(!Ri(c))return;const{target:l}=c,d=e(l,c);if(typeof d!="function"||!l)return;const u=h=>{Ri(h)&&(d(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,n)};return i.forEach(c=>{c.addEventListener("pointerenter",o,n)}),a}function Vi(t,e){const s=`${e}PointerCapture`;if(t.target instanceof Element&&s in t.target&&t.pointerId!==void 0)try{t.target[s](t.pointerId)}catch{}}const Br=(t,e)=>e?t===e?!0:Br(t,e.parentElement):!1,ti=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Jl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ql(t){return Jl.has(t.tagName)||t.tabIndex!==-1}const st=new WeakSet;function Fi(t){return e=>{e.key==="Enter"&&t(e)}}function Qt(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ec=(t,e)=>{const s=t.currentTarget;if(!s)return;const i=Fi(()=>{if(st.has(s))return;Qt(s,"down");const n=Fi(()=>{Qt(s,"up")}),a=()=>Qt(s,"cancel");s.addEventListener("keyup",n,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",i,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),e)};function Ii(t){return ti(t)&&!Or()}function tc(t,e,s={}){const[i,n,a]=$r(t,s),o=c=>{const l=c.currentTarget;if(!l||!Ii(c)||st.has(l))return;st.add(l),Vi(c,"set");const d=e(l,c),u=(f,p)=>{l.removeEventListener("pointerup",h),l.removeEventListener("pointercancel",m),Vi(f,"release"),!(!Ii(f)||!st.has(l))&&(st.delete(l),typeof d=="function"&&d(f,{success:p}))},h=f=>{(f.isTrusted?sc(f,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?u(f,!1):u(f,!(l instanceof Element)||Br(l,f.target))},m=f=>{u(f,!1)};l.addEventListener("pointerup",h,n),l.addEventListener("pointercancel",m,n),l.addEventListener("lostpointercapture",m,n)};return i.forEach(c=>{c=s.useGlobalTarget?window:c;let l=!1;c instanceof HTMLElement&&(l=!0,!Ql(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0)),c.addEventListener("pointerdown",o,n),l&&c.addEventListener("focus",d=>ec(d,n),n)}),a}function sc(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}const Oi=30,ic=t=>!isNaN(parseFloat(t));class nc{constructor(e,s={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,n=!0)=>{const a=de.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=de.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ic(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Xs);const i=this.events[e].add(s);return e==="change"?()=>{i(),B.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,i){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=de.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Oi)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Oi);return Dr(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ct(t,e){return new nc(t,e)}const Ur=y.createContext({strict:!1}),$i={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ge={};for(const t in $i)Ge[t]={isEnabled:e=>$i[t].some(s=>!!e[s])};function rc(t){for(const e in t)Ge[e]={...Ge[e],...t[e]}}const ac=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lt(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ac.has(t)}let Hr=t=>!Lt(t);function oc(t){t&&(Hr=e=>e.startsWith("on")?!Lt(e):t(e))}try{oc(require("@emotion/is-prop-valid").default)}catch{}function lc(t,e,s){const i={};for(const n in t)n==="values"&&typeof t.values=="object"||(Hr(n)||s===!0&&Lt(n)||!e&&!Lt(n)||t.draggable&&n.startsWith("onDrag"))&&(i[n]=t[n]);return i}function cc(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...i)=>t(...i);return new Proxy(s,{get:(i,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}const Wt=y.createContext({});function Kt(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function dt(t){return typeof t=="string"||Array.isArray(t)}const si=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ii=["initial",...si];function _t(t){return Kt(t.animate)||ii.some(e=>dt(t[e]))}function zr(t){return!!(_t(t)||t.variants)}function dc(t,e){if(_t(t)){const{initial:s,animate:i}=t;return{initial:s===!1||dt(s)?s:void 0,animate:dt(i)?i:void 0}}return t.inherit!==!1?e:{}}function uc(t){const{initial:e,animate:s}=dc(t,y.useContext(Wt));return y.useMemo(()=>({initial:e,animate:s}),[Bi(e),Bi(s)])}function Bi(t){return Array.isArray(t)?t.join(" "):t}const hc=Symbol.for("motionComponentSymbol");function Ue(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mc(t,e,s){return y.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),s&&(typeof s=="function"?s(i):Ue(s)&&(s.current=i))},[e])}const ni=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pc="framerAppearId",Wr="data-"+ni(pc),Kr=y.createContext({});function fc(t,e,s,i,n){var a,o;const{visualElement:c}=y.useContext(Wt),l=y.useContext(Ur),d=y.useContext(_s),u=y.useContext(Er).reducedMotion,h=y.useRef(null);i=i||l.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:c,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,f=y.useContext(Kr);m&&!m.projection&&n&&(m.type==="html"||m.type==="svg")&&gc(h.current,s,n,f);const p=y.useRef(!1);y.useInsertionEffect(()=>{m&&p.current&&m.update(s,d)});const g=s[Wr],x=y.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return Ol(()=>{m&&(p.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),ei.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),y.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),x.current=!1))}),m}function gc(t,e,s,i){const{layoutId:n,layout:a,drag:o,dragConstraints:c,layoutScroll:l,layoutRoot:d}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:_r(t.parent)),t.projection.setOptions({layoutId:n,layout:a,alwaysMeasureLayout:!!o||c&&Ue(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:d})}function _r(t){if(t)return t.options.allowProjection!==!1?t.projection:_r(t.parent)}function xc({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:i,Component:n}){var a,o;t&&rc(t);function c(d,u){let h;const m={...y.useContext(Er),...d,layoutId:yc(d)},{isStatic:f}=m,p=uc(d),g=i(d,f);if(!f&&Ks){vc();const x=bc(m);h=x.MeasureLayout,p.visualElement=fc(n,g,m,e,x.ProjectionNode)}return r.jsxs(Wt.Provider,{value:p,children:[h&&p.visualElement?r.jsx(h,{visualElement:p.visualElement,...m}):null,s(n,d,mc(g,p.visualElement,u),g,f,p.visualElement)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${(o=(a=n.displayName)!==null&&a!==void 0?a:n.name)!==null&&o!==void 0?o:""})`}`;const l=y.forwardRef(c);return l[hc]=n,l}function yc({layoutId:t}){const e=y.useContext(Mr).id;return e&&t!==void 0?e+"-"+t:t}function vc(t,e){y.useContext(Ur).strict}function bc(t){const{drag:e,layout:s}=Ge;if(!e&&!s)return{};const i={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Gr=t=>e=>typeof e=="string"&&e.startsWith(t),ri=Gr("--"),wc=Gr("var(--"),ai=t=>wc(t)?jc.test(t.split("/*")[0].trim()):!1,jc=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ut={};function Sc(t){for(const e in t)ut[e]=t[e],ri(e)&&(ut[e].isCSSVariable=!0)}const Ye=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ve=new Set(Ye);function qr(t,{layout:e,layoutId:s}){return Ve.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!ut[t]||t==="opacity")}const Z=t=>!!(t&&t.getVelocity),Yr=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ge=(t,e,s)=>s>e?e:s<t?t:s,Xe={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ht={...Xe,transform:t=>ge(0,1,t)},St={...Xe,default:1},yt=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),we=yt("deg"),ue=yt("%"),A=yt("px"),Nc=yt("vh"),Cc=yt("vw"),Ui={...ue,parse:t=>ue.parse(t)/100,transform:t=>ue.transform(t*100)},Pc={borderWidth:A,borderTopWidth:A,borderRightWidth:A,borderBottomWidth:A,borderLeftWidth:A,borderRadius:A,radius:A,borderTopLeftRadius:A,borderTopRightRadius:A,borderBottomRightRadius:A,borderBottomLeftRadius:A,width:A,maxWidth:A,height:A,maxHeight:A,top:A,right:A,bottom:A,left:A,padding:A,paddingTop:A,paddingRight:A,paddingBottom:A,paddingLeft:A,margin:A,marginTop:A,marginRight:A,marginBottom:A,marginLeft:A,backgroundPositionX:A,backgroundPositionY:A},Tc={rotate:we,rotateX:we,rotateY:we,rotateZ:we,scale:St,scaleX:St,scaleY:St,scaleZ:St,skew:we,skewX:we,skewY:we,distance:A,translateX:A,translateY:A,translateZ:A,x:A,y:A,z:A,perspective:A,transformPerspective:A,opacity:ht,originX:Ui,originY:Ui,originZ:A},Hi={...Xe,transform:Math.round},oi={...Pc,...Tc,zIndex:Hi,size:A,fillOpacity:ht,strokeOpacity:ht,numOctaves:Hi},kc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ac=Ye.length;function Mc(t,e,s){let i="",n=!0;for(let a=0;a<Ac;a++){const o=Ye[a],c=t[o];if(c===void 0)continue;let l=!0;if(typeof c=="number"?l=c===(o.startsWith("scale")?1:0):l=parseFloat(c)===0,!l||s){const d=Yr(c,oi[o]);if(!l){n=!1;const u=kc[o]||o;i+=`${u}(${d}) `}s&&(e[o]=d)}}return i=i.trim(),s?i=s(e,n?"":i):n&&(i="none"),i}function li(t,e,s){const{style:i,vars:n,transformOrigin:a}=t;let o=!1,c=!1;for(const l in e){const d=e[l];if(Ve.has(l)){o=!0;continue}else if(ri(l)){n[l]=d;continue}else{const u=Yr(d,oi[l]);l.startsWith("origin")?(c=!0,a[l]=u):i[l]=u}}if(e.transform||(o||s?i.transform=Mc(e,t.transform,s):i.transform&&(i.transform="none")),c){const{originX:l="50%",originY:d="50%",originZ:u=0}=a;i.transformOrigin=`${l} ${d} ${u}`}}const ci=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xr(t,e,s){for(const i in e)!Z(e[i])&&!qr(i,s)&&(t[i]=e[i])}function Ec({transformTemplate:t},e){return y.useMemo(()=>{const s=ci();return li(s,e,t),Object.assign({},s.vars,s.style)},[e])}function Dc(t,e){const s=t.style||{},i={};return Xr(i,s,t),Object.assign(i,Ec(t,e)),i}function Lc(t,e){const s={},i=Dc(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=i,s}const Rc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function di(t){return typeof t!="string"||t.includes("-")?!1:!!(Rc.indexOf(t)>-1||/[A-Z]/u.test(t))}const Vc={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fc={offset:"strokeDashoffset",array:"strokeDasharray"};function Ic(t,e,s=1,i=0,n=!0){t.pathLength=1;const a=n?Vc:Fc;t[a.offset]=A.transform(-i);const o=A.transform(e),c=A.transform(s);t[a.array]=`${o} ${c}`}function zi(t,e,s){return typeof t=="string"?t:A.transform(e+s*t)}function Oc(t,e,s){const i=zi(e,t.x,t.width),n=zi(s,t.y,t.height);return`${i} ${n}`}function ui(t,{attrX:e,attrY:s,attrScale:i,originX:n,originY:a,pathLength:o,pathSpacing:c=1,pathOffset:l=0,...d},u,h){if(li(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:f,dimensions:p}=t;m.transform&&(p&&(f.transform=m.transform),delete m.transform),p&&(n!==void 0||a!==void 0||f.transform)&&(f.transformOrigin=Oc(p,n!==void 0?n:.5,a!==void 0?a:.5)),e!==void 0&&(m.x=e),s!==void 0&&(m.y=s),i!==void 0&&(m.scale=i),o!==void 0&&Ic(m,o,c,l,!1)}const Zr=()=>({...ci(),attrs:{}}),hi=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $c(t,e,s,i){const n=y.useMemo(()=>{const a=Zr();return ui(a,e,hi(i),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Xr(a,t.style,t),n.style={...a,...n.style}}return n}function Bc(t=!1){return(s,i,n,{latestValues:a},o)=>{const l=(di(s)?$c:Lc)(i,a,o,s),d=lc(i,typeof s=="string",t),u=s!==y.Fragment?{...d,...l,ref:n}:{},{children:h}=i,m=y.useMemo(()=>Z(h)?h.get():h,[h]);return y.createElement(s,{...u,children:m})}}function Wi(t){const e=[{},{}];return t==null||t.values.forEach((s,i)=>{e[0][i]=s.get(),e[1][i]=s.getVelocity()}),e}function mi(t,e,s,i){if(typeof e=="function"){const[n,a]=Wi(i);e=e(s!==void 0?s:t.custom,n,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,a]=Wi(i);e=e(s!==void 0?s:t.custom,n,a)}return e}const Ns=t=>Array.isArray(t),Uc=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Hc=t=>Ns(t)?t[t.length-1]||0:t;function At(t){const e=Z(t)?t.get():t;return Uc(e)?e.toValue():e}function zc({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},i,n,a){const o={latestValues:Wc(i,n,a,t),renderState:e()};return s&&(o.onMount=c=>s({props:i,current:c,...o}),o.onUpdate=c=>s(c)),o}const Jr=t=>(e,s)=>{const i=y.useContext(Wt),n=y.useContext(_s),a=()=>zc(t,e,i,n);return s?a():Il(a)};function Wc(t,e,s,i){const n={},a=i(t,{});for(const m in a)n[m]=At(a[m]);let{initial:o,animate:c}=t;const l=_t(t),d=zr(t);e&&d&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?c:o;if(h&&typeof h!="boolean"&&!Kt(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const p=mi(t,m[f]);if(p){const{transitionEnd:g,transition:x,...v}=p;for(const j in v){let S=v[j];if(Array.isArray(S)){const k=u?S.length-1:0;S=S[k]}S!==null&&(n[j]=S)}for(const j in g)n[j]=g[j]}}}return n}function pi(t,e,s){var i;const{style:n}=t,a={};for(const o in n)(Z(n[o])||e.style&&Z(e.style[o])||qr(o,t)||((i=s==null?void 0:s.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[o]=n[o]);return a}const Kc={useVisualState:Jr({scrapeMotionValuesFromProps:pi,createRenderState:ci})};function Qr(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function ea(t,{style:e,vars:s},i,n){Object.assign(t.style,e,n&&n.getProjectionStyles(i));for(const a in s)t.style.setProperty(a,s[a])}const ta=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sa(t,e,s,i){ea(t,e,void 0,i);for(const n in e.attrs)t.setAttribute(ta.has(n)?n:ni(n),e.attrs[n])}function ia(t,e,s){const i=pi(t,e,s);for(const n in t)if(Z(t[n])||Z(e[n])){const a=Ye.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;i[a]=t[n]}return i}const Ki=["x","y","width","height","cx","cy","r"],_c={useVisualState:Jr({scrapeMotionValuesFromProps:ia,createRenderState:Zr,onUpdate:({props:t,prevProps:e,current:s,renderState:i,latestValues:n})=>{if(!s)return;let a=!!t.drag;if(!a){for(const c in n)if(Ve.has(c)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let c=0;c<Ki.length;c++){const l=Ki[c];t[l]!==e[l]&&(o=!0)}o&&B.read(()=>{Qr(s,i),B.render(()=>{ui(i,n,hi(s.tagName),t.transformTemplate),sa(s,i)})})}})};function Gc(t,e){return function(i,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...di(i)?_c:Kc,preloadedFeatures:t,useRender:Bc(n),createVisualElement:e,Component:i};return xc(o)}}function mt(t,e,s){const i=t.getProps();return mi(i,e,s!==void 0?s:i.custom,t)}const na=new Set(["width","height","top","left","right","bottom",...Ye]);function qc(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,ct(s))}function Yc(t,e){const s=mt(t,e);let{transitionEnd:i={},transition:n={},...a}=s||{};a={...a,...i};for(const o in a){const c=Hc(a[o]);qc(t,o,c)}}function Xc(t){return!!(Z(t)&&t.add)}function Cs(t,e){const s=t.getValue("willChange");if(Xc(s))return s.add(e)}function ra(t){return t.props[Wr]}const aa=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Zc=1e-7,Jc=12;function Qc(t,e,s,i,n){let a,o,c=0;do o=e+(s-e)/2,a=aa(o,i,n)-t,a>0?s=o:e=o;while(Math.abs(a)>Zc&&++c<Jc);return o}function vt(t,e,s,i){if(t===e&&s===i)return ie;const n=a=>Qc(a,0,1,t,s);return a=>a===0||a===1?a:aa(n(a),e,i)}const oa=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,la=t=>e=>1-t(1-e),ca=vt(.33,1.53,.69,.99),fi=la(ca),da=oa(fi),ua=t=>(t*=2)<1?.5*fi(t):.5*(2-Math.pow(2,-10*(t-1))),gi=t=>1-Math.sin(Math.acos(t)),ha=la(gi),ma=oa(gi),pa=t=>/^0[^.\s]+$/u.test(t);function ed(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pa(t):!0}const nt=t=>Math.round(t*1e5)/1e5,xi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function td(t){return t==null}const sd=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yi=(t,e)=>s=>!!(typeof s=="string"&&sd.test(s)&&s.startsWith(t)||e&&!td(s)&&Object.prototype.hasOwnProperty.call(s,e)),fa=(t,e,s)=>i=>{if(typeof i!="string")return i;const[n,a,o,c]=i.match(xi);return{[t]:parseFloat(n),[e]:parseFloat(a),[s]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},id=t=>ge(0,255,t),es={...Xe,transform:t=>Math.round(id(t))},Ee={test:yi("rgb","red"),parse:fa("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:i=1})=>"rgba("+es.transform(t)+", "+es.transform(e)+", "+es.transform(s)+", "+nt(ht.transform(i))+")"};function nd(t){let e="",s="",i="",n="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),i=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),i=t.substring(3,4),n=t.substring(4,5),e+=e,s+=s,i+=i,n+=n),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}}const Ps={test:yi("#"),parse:nd,transform:Ee.transform},He={test:yi("hsl","hue"),parse:fa("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:i=1})=>"hsla("+Math.round(t)+", "+ue.transform(nt(e))+", "+ue.transform(nt(s))+", "+nt(ht.transform(i))+")"},X={test:t=>Ee.test(t)||Ps.test(t)||He.test(t),parse:t=>Ee.test(t)?Ee.parse(t):He.test(t)?He.parse(t):Ps.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ee.transform(t):He.transform(t)},rd=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ad(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xi))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(rd))===null||s===void 0?void 0:s.length)||0)>0}const ga="number",xa="color",od="var",ld="var(",_i="${}",cd=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pt(t){const e=t.toString(),s=[],i={color:[],number:[],var:[]},n=[];let a=0;const c=e.replace(cd,l=>(X.test(l)?(i.color.push(a),n.push(xa),s.push(X.parse(l))):l.startsWith(ld)?(i.var.push(a),n.push(od),s.push(l)):(i.number.push(a),n.push(ga),s.push(parseFloat(l))),++a,_i)).split(_i);return{values:s,split:c,indexes:i,types:n}}function ya(t){return pt(t).values}function va(t){const{split:e,types:s}=pt(t),i=e.length;return n=>{let a="";for(let o=0;o<i;o++)if(a+=e[o],n[o]!==void 0){const c=s[o];c===ga?a+=nt(n[o]):c===xa?a+=X.transform(n[o]):a+=n[o]}return a}}const dd=t=>typeof t=="number"?0:t;function ud(t){const e=ya(t);return va(t)(e.map(dd))}const Ne={test:ad,parse:ya,createTransformer:va,getAnimatableNone:ud},hd=new Set(["brightness","contrast","saturate","opacity"]);function md(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=s.match(xi)||[];if(!i)return t;const n=s.replace(i,"");let a=hd.has(e)?1:0;return i!==s&&(a*=100),e+"("+a+n+")"}const pd=/\b([a-z-]*)\(.*?\)/gu,Ts={...Ne,getAnimatableNone:t=>{const e=t.match(pd);return e?e.map(md).join(" "):t}},fd={...oi,color:X,backgroundColor:X,outlineColor:X,fill:X,stroke:X,borderColor:X,borderTopColor:X,borderRightColor:X,borderBottomColor:X,borderLeftColor:X,filter:Ts,WebkitFilter:Ts},ba=t=>fd[t];function wa(t,e){let s=ba(t);return s!==Ts&&(s=Ne),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const gd=new Set(["auto","none","0"]);function xd(t,e,s){let i=0,n;for(;i<t.length&&!n;){const a=t[i];typeof a=="string"&&!gd.has(a)&&pt(a).values.length&&(n=t[i]),i++}if(n&&s)for(const a of e)t[a]=wa(s,n)}const De=t=>t*180/Math.PI,ks=t=>{const e=De(Math.atan2(t[1],t[0]));return As(e)},yd={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ks,rotateZ:ks,skewX:t=>De(Math.atan(t[1])),skewY:t=>De(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},As=t=>(t=t%360,t<0&&(t+=360),t),Gi=ks,qi=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Yi=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),vd={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qi,scaleY:Yi,scale:t=>(qi(t)+Yi(t))/2,rotateX:t=>As(De(Math.atan2(t[6],t[5]))),rotateY:t=>As(De(Math.atan2(-t[2],t[0]))),rotateZ:Gi,rotate:Gi,skewX:t=>De(Math.atan(t[4])),skewY:t=>De(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Xi(t){return t.includes("scale")?1:0}function Ms(t,e){if(!t||t==="none")return Xi(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,n;if(s)i=vd,n=s;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=yd,n=c}if(!n)return Xi(e);const a=i[e],o=n[1].split(",").map(wd);return typeof a=="function"?a(o):o[a]}const bd=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Ms(s,e)};function wd(t){return parseFloat(t.trim())}const Zi=t=>t===Xe||t===A,jd=new Set(["x","y","z"]),Sd=Ye.filter(t=>!jd.has(t));function Nd(t){const e=[];return Sd.forEach(s=>{const i=t.getValue(s);i!==void 0&&(e.push([s,i.get()]),i.set(s.startsWith("scale")?1:0))}),e}const qe={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ms(e,"x"),y:(t,{transform:e})=>Ms(e,"y")};qe.translateX=qe.x;qe.translateY=qe.y;const Re=new Set;let Es=!1,Ds=!1;function ja(){if(Ds){const t=Array.from(Re).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),s=new Map;e.forEach(i=>{const n=Nd(i);n.length&&(s.set(i,n),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const n=s.get(i);n&&n.forEach(([a,o])=>{var c;(c=i.getValue(a))===null||c===void 0||c.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Ds=!1,Es=!1,Re.forEach(t=>t.complete()),Re.clear()}function Sa(){Re.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ds=!0)})}function Cd(){Sa(),ja()}class vi{constructor(e,s,i,n,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=i,this.motionValue=n,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Re.add(this),Es||(Es=!0,B.read(Sa),B.resolveKeyframes(ja))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:i,motionValue:n}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=n==null?void 0:n.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&s){const l=i.readValue(s,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),n&&o===void 0&&n.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Re.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Re.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Na=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Pd=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Td(t){const e=Pd.exec(t);if(!e)return[,];const[,s,i,n]=e;return[`--${s??i}`,n]}function Ca(t,e,s=1){const[i,n]=Td(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const o=a.trim();return Na(o)?parseFloat(o):o}return ai(n)?Ca(n,e,s+1):n}const Pa=t=>e=>e.test(t),kd={test:t=>t==="auto",parse:t=>t},Ta=[Xe,A,ue,we,Cc,Nc,kd],Ji=t=>Ta.find(Pa(t));class ka extends vi{constructor(e,s,i,n,a){super(e,s,i,n,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let d=e[l];if(typeof d=="string"&&(d=d.trim(),ai(d))){const u=Ca(d,s.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!na.has(i)||e.length!==2)return;const[n,a]=e,o=Ji(n),c=Ji(a);if(o!==c)if(Zi(o)&&Zi(c))for(let l=0;l<e.length;l++){const d=e[l];typeof d=="string"&&(e[l]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,i=[];for(let n=0;n<e.length;n++)ed(e[n])&&i.push(n);i.length&&xd(e,i,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qe[i](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&e.getValue(i,n).jump(n,!1)}measureEndState(){var e;const{element:s,name:i,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const a=s.getValue(i);a&&a.jump(this.measuredOrigin,!1);const o=n.length-1,c=n[o];n[o]=qe[i](s.measureViewportBox(),window.getComputedStyle(s.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,d])=>{s.getValue(l).set(d)}),this.resolveNoneKeyframes()}}const Qi=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ne.test(t)||t==="0")&&!t.startsWith("url("));function Ad(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function Md(t,e,s,i){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=Qi(n,e),c=Qi(a,e);return!o||!c?!1:Ad(t)||(s==="spring"||Js(s))&&i}const Ed=t=>t!==null;function Gt(t,{repeat:e,repeatType:s="loop"},i){const n=t.filter(Ed),a=e&&s!=="loop"&&e%2===1?0:n.length-1;return!a||i===void 0?n[a]:i}const Dd=40;class Aa{constructor({autoplay:e=!0,delay:s=0,type:i="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=de.now(),this.options={autoplay:e,delay:s,type:i,repeat:n,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Dd?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Cd(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=de.now(),this.hasAttemptedResolve=!0;const{name:i,type:n,velocity:a,delay:o,onComplete:c,onUpdate:l,isGenerator:d}=this.options;if(!d&&!Md(e,i,n,a))if(o)this.options.duration=0;else{l&&l(Gt(e,this.options,s)),c&&c(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,s);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...u},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const z=(t,e,s)=>t+(e-t)*s;function ts(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Ld({hue:t,saturation:e,lightness:s,alpha:i}){t/=360,e/=100,s/=100;let n=0,a=0,o=0;if(!e)n=a=o=s;else{const c=s<.5?s*(1+e):s+e-s*e,l=2*s-c;n=ts(l,c,t+1/3),a=ts(l,c,t),o=ts(l,c,t-1/3)}return{red:Math.round(n*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:i}}function Rt(t,e){return s=>s>0?e:t}const ss=(t,e,s)=>{const i=t*t,n=s*(e*e-i)+i;return n<0?0:Math.sqrt(n)},Rd=[Ps,Ee,He],Vd=t=>Rd.find(e=>e.test(t));function en(t){const e=Vd(t);if(!e)return!1;let s=e.parse(t);return e===He&&(s=Ld(s)),s}const tn=(t,e)=>{const s=en(t),i=en(e);if(!s||!i)return Rt(t,e);const n={...s};return a=>(n.red=ss(s.red,i.red,a),n.green=ss(s.green,i.green,a),n.blue=ss(s.blue,i.blue,a),n.alpha=z(s.alpha,i.alpha,a),Ee.transform(n))},Fd=(t,e)=>s=>e(t(s)),bt=(...t)=>t.reduce(Fd),Ls=new Set(["none","hidden"]);function Id(t,e){return Ls.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function Od(t,e){return s=>z(t,e,s)}function bi(t){return typeof t=="number"?Od:typeof t=="string"?ai(t)?Rt:X.test(t)?tn:Ud:Array.isArray(t)?Ma:typeof t=="object"?X.test(t)?tn:$d:Rt}function Ma(t,e){const s=[...t],i=s.length,n=t.map((a,o)=>bi(a)(a,e[o]));return a=>{for(let o=0;o<i;o++)s[o]=n[o](a);return s}}function $d(t,e){const s={...t,...e},i={};for(const n in s)t[n]!==void 0&&e[n]!==void 0&&(i[n]=bi(t[n])(t[n],e[n]));return n=>{for(const a in i)s[a]=i[a](n);return s}}function Bd(t,e){var s;const i=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][n[o]],l=(s=t.values[c])!==null&&s!==void 0?s:0;i[a]=l,n[o]++}return i}const Ud=(t,e)=>{const s=Ne.createTransformer(e),i=pt(t),n=pt(e);return i.indexes.var.length===n.indexes.var.length&&i.indexes.color.length===n.indexes.color.length&&i.indexes.number.length>=n.indexes.number.length?Ls.has(t)&&!n.values.length||Ls.has(e)&&!i.values.length?Id(t,e):bt(Ma(Bd(i,n),n.values),s):Rt(t,e)};function Ea(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?z(t,e,s):bi(t)(t,e)}const Hd=5;function Da(t,e,s){const i=Math.max(e-Hd,0);return Dr(s-t(i),e-i)}const K={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},is=.001;function zd({duration:t=K.duration,bounce:e=K.bounce,velocity:s=K.velocity,mass:i=K.mass}){let n,a,o=1-e;o=ge(K.minDamping,K.maxDamping,o),t=ge(K.minDuration,K.maxDuration,pe(t)),o<1?(n=d=>{const u=d*o,h=u*t,m=u-s,f=Rs(d,o),p=Math.exp(-h);return is-m/f*p},a=d=>{const h=d*o*t,m=h*s+s,f=Math.pow(o,2)*Math.pow(d,2)*t,p=Math.exp(-h),g=Rs(Math.pow(d,2),o);return(-n(d)+is>0?-1:1)*((m-f)*p)/g}):(n=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-is+u*h},a=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const c=5/t,l=Kd(n,a,c);if(t=me(t),isNaN(l))return{stiffness:K.stiffness,damping:K.damping,duration:t};{const d=Math.pow(l,2)*i;return{stiffness:d,damping:o*2*Math.sqrt(i*d),duration:t}}}const Wd=12;function Kd(t,e,s){let i=s;for(let n=1;n<Wd;n++)i=i-t(i)/e(i);return i}function Rs(t,e){return t*Math.sqrt(1-e*e)}const _d=["duration","bounce"],Gd=["stiffness","damping","mass"];function sn(t,e){return e.some(s=>t[s]!==void 0)}function qd(t){let e={velocity:K.velocity,stiffness:K.stiffness,damping:K.damping,mass:K.mass,isResolvedFromDuration:!1,...t};if(!sn(t,Gd)&&sn(t,_d))if(t.visualDuration){const s=t.visualDuration,i=2*Math.PI/(s*1.2),n=i*i,a=2*ge(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:K.mass,stiffness:n,damping:a}}else{const s=zd(t);e={...e,...s,mass:K.mass},e.isResolvedFromDuration=!0}return e}function La(t=K.visualDuration,e=K.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:n}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],c={done:!1,value:a},{stiffness:l,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:f}=qd({...s,velocity:-pe(s.velocity||0)}),p=m||0,g=d/(2*Math.sqrt(l*u)),x=o-a,v=pe(Math.sqrt(l/u)),j=Math.abs(x)<5;i||(i=j?K.restSpeed.granular:K.restSpeed.default),n||(n=j?K.restDelta.granular:K.restDelta.default);let S;if(g<1){const N=Rs(v,g);S=R=>{const D=Math.exp(-g*v*R);return o-D*((p+g*v*x)/N*Math.sin(N*R)+x*Math.cos(N*R))}}else if(g===1)S=N=>o-Math.exp(-v*N)*(x+(p+v*x)*N);else{const N=v*Math.sqrt(g*g-1);S=R=>{const D=Math.exp(-g*v*R),w=Math.min(N*R,300);return o-D*((p+g*v*x)*Math.sinh(w)+N*x*Math.cosh(w))/N}}const k={calculatedDuration:f&&h||null,next:N=>{const R=S(N);if(f)c.done=N>=h;else{let D=0;g<1&&(D=N===0?me(p):Da(S,N,R));const w=Math.abs(D)<=i,C=Math.abs(o-R)<=n;c.done=w&&C}return c.value=c.done?o:R,c},toString:()=>{const N=Math.min(Lr(k),js),R=Rr(D=>k.next(N*D).value,N,30);return N+"ms "+R}};return k}function nn({keyframes:t,velocity:e=0,power:s=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:l,restDelta:d=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},f=w=>c!==void 0&&w<c||l!==void 0&&w>l,p=w=>c===void 0?l:l===void 0||Math.abs(c-w)<Math.abs(l-w)?c:l;let g=s*e;const x=h+g,v=o===void 0?x:o(x);v!==x&&(g=v-h);const j=w=>-g*Math.exp(-w/i),S=w=>v+j(w),k=w=>{const C=j(w),T=S(w);m.done=Math.abs(C)<=d,m.value=m.done?v:T};let N,R;const D=w=>{f(m.value)&&(N=w,R=La({keyframes:[m.value,p(m.value)],velocity:Da(S,w,m.value),damping:n,stiffness:a,restDelta:d,restSpeed:u}))};return D(0),{calculatedDuration:null,next:w=>{let C=!1;return!R&&N===void 0&&(C=!0,k(w),D(w)),N!==void 0&&w>=N?R.next(w-N):(!C&&k(w),m)}}}const Yd=vt(.42,0,1,1),Xd=vt(0,0,.58,1),Ra=vt(.42,0,.58,1),Zd=t=>Array.isArray(t)&&typeof t[0]!="number",rn={linear:ie,easeIn:Yd,easeInOut:Ra,easeOut:Xd,circIn:gi,circInOut:ma,circOut:ha,backIn:fi,backInOut:da,backOut:ca,anticipate:ua},an=t=>{if(Qs(t)){ws(t.length===4);const[e,s,i,n]=t;return vt(e,s,i,n)}else if(typeof t=="string")return ws(rn[t]!==void 0),rn[t];return t};function Jd(t,e,s){const i=[],n=s||Ea,a=t.length-1;for(let o=0;o<a;o++){let c=n(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ie:e;c=bt(l,c)}i.push(c)}return i}function Qd(t,e,{clamp:s=!0,ease:i,mixer:n}={}){const a=t.length;if(ws(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Jd(e,i,n),l=c.length,d=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=_e(t[h],t[h+1],u);return c[h](m)};return s?u=>d(ge(t[0],t[a-1],u)):d}function eu(t,e){const s=t[t.length-1];for(let i=1;i<=e;i++){const n=_e(0,e,i);t.push(z(s,1,n))}}function tu(t){const e=[0];return eu(e,t.length-1),e}function su(t,e){return t.map(s=>s*e)}function iu(t,e){return t.map(()=>e||Ra).splice(0,t.length-1)}function Vt({duration:t=300,keyframes:e,times:s,ease:i="easeInOut"}){const n=Zd(i)?i.map(an):an(i),a={done:!1,value:e[0]},o=su(s&&s.length===e.length?s:tu(e),t),c=Qd(o,e,{ease:Array.isArray(n)?n:iu(e,n)});return{calculatedDuration:t,next:l=>(a.value=c(l),a.done=l>=t,a)}}const nu=t=>{const e=({timestamp:s})=>t(s);return{start:()=>B.update(e,!0),stop:()=>Se(e),now:()=>q.isProcessing?q.timestamp:de.now()}},ru={decay:nn,inertia:nn,tween:Vt,keyframes:Vt,spring:La},au=t=>t/100;class wi extends Aa{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:s,motionValue:i,element:n,keyframes:a}=this.options,o=(n==null?void 0:n.KeyframeResolver)||vi,c=(l,d)=>this.onKeyframesResolved(l,d);this.resolver=new o(a,c,s,i,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:a,velocity:o=0}=this.options,c=Js(s)?s:ru[s]||Vt;let l,d;c!==Vt&&typeof e[0]!="number"&&(l=bt(au,Ea(e[0],e[1])),e=[0,100]);const u=c({...this.options,keyframes:e});a==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Lr(u));const{calculatedDuration:h}=u,m=h+n,f=m*(i+1)-n;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:i}=this;if(!i){const{keyframes:w}=this.options;return{done:!0,value:w[w.length-1]}}const{finalKeyframe:n,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:l,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return a.next(0);const{delay:m,repeat:f,repeatType:p,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-m*(this.speed>=0?1:-1),j=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,k=a;if(f){const w=Math.min(this.currentTime,u)/h;let C=Math.floor(w),T=w%1;!T&&w>=1&&(T=1),T===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(T=1-T,g&&(T-=g/h)):p==="mirror"&&(k=o)),S=ge(0,1,T)*h}const N=j?{done:!1,value:l[0]}:k.next(S);c&&(N.value=c(N.value));let{done:R}=N;!j&&d!==null&&(R=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return D&&n!==void 0&&(N.value=Gt(l,this.options,n)),x&&x(N.value),D&&this.finish(),N}get duration(){const{resolved:e}=this;return e?pe(e.calculatedDuration):0}get time(){return pe(this.currentTime)}set time(e){e=me(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=pe(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nu,onPlay:s,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ou=new Set(["opacity","clipPath","filter","transform"]);function lu(t,e,s,{delay:i=0,duration:n=300,repeat:a=0,repeatType:o="loop",ease:c="easeInOut",times:l}={}){const d={[e]:s};l&&(d.offset=l);const u=Fr(c,n);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:i,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const cu=Ys(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ft=10,du=2e4;function uu(t){return Js(t.type)||t.type==="spring"||!Vr(t.ease)}function hu(t,e){const s=new wi({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const n=[];let a=0;for(;!i.done&&a<du;)i=s.sample(a),n.push(i.value),a+=Ft;return{times:void 0,keyframes:n,duration:a-Ft,ease:"linear"}}const Va={anticipate:ua,backInOut:da,circInOut:ma};function mu(t){return t in Va}class on extends Aa{constructor(e){super(e);const{name:s,motionValue:i,element:n,keyframes:a}=this.options;this.resolver=new ka(a,(o,c)=>this.onKeyframesResolved(o,c),s,i,n),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:i=300,times:n,ease:a,type:o,motionValue:c,name:l,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&Dt()&&mu(a)&&(a=Va[a]),uu(this.options)){const{onComplete:h,onUpdate:m,motionValue:f,element:p,...g}=this.options,x=hu(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),i=x.duration,n=x.times,a=x.ease,o="keyframes"}const u=lu(c.owner.current,l,e,{...this.options,duration:i,times:n,ease:a});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(Di(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;c.set(Gt(e,this.options,s)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:n,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return pe(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return pe(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:i}=s;i.currentTime=me(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:i}=s;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return ie;const{animation:i}=s;Di(i,e)}return ie}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:i,duration:n,type:a,ease:o,times:c}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:m,...f}=this.options,p=new wi({...f,keyframes:i,duration:n,type:a,ease:o,times:c,isGenerator:!0}),g=me(this.time);d.setWithVelocity(p.sample(g-Ft).value,p.sample(g).value,Ft)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:i,repeatDelay:n,repeatType:a,damping:o,type:c}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:d}=s.owner.getProps();return cu()&&i&&ou.has(i)&&!l&&!d&&!n&&a!=="mirror"&&o!==0&&c!=="inertia"}}const pu={type:"spring",stiffness:500,damping:25,restSpeed:10},fu=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),gu={type:"keyframes",duration:.8},xu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yu=(t,{keyframes:e})=>e.length>2?gu:Ve.has(t)?t.startsWith("scale")?fu(e[1]):pu:xu;function vu({when:t,delay:e,delayChildren:s,staggerChildren:i,staggerDirection:n,repeat:a,repeatType:o,repeatDelay:c,from:l,elapsed:d,...u}){return!!Object.keys(u).length}const ji=(t,e,s,i={},n,a)=>o=>{const c=Zs(i,t)||{},l=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-me(l);let u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:n};vu(c)||(u={...u,...yu(t,u)}),u.duration&&(u.duration=me(u.duration)),u.repeatDelay&&(u.repeatDelay=me(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),u.allowFlatten=!c.type&&!c.ease,h&&!a&&e.get()!==void 0){const m=Gt(u.keyframes,c);if(m!==void 0)return B.update(()=>{u.onUpdate(m),u.onComplete()}),new zl([])}return!a&&on.supports(u)?new on(u):new wi(u)};function bu({protectedKeys:t,needsAnimating:e},s){const i=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,i}function Fa(t,e,{delay:s=0,transitionOverride:i,type:n}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:c,...l}=e;i&&(o=i);const d=[],u=n&&t.animationState&&t.animationState.getState()[n];for(const h in l){const m=t.getValue(h,(a=t.latestValues[h])!==null&&a!==void 0?a:null),f=l[h];if(f===void 0||u&&bu(u,h))continue;const p={delay:s,...Zs(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const v=ra(t);if(v){const j=window.MotionHandoffAnimation(v,h,B);j!==null&&(p.startTime=j,g=!0)}}Cs(t,h),m.start(ji(h,m,f,t.shouldReduceMotion&&na.has(h)?{type:!1}:p,t,g));const x=m.animation;x&&d.push(x)}return c&&Promise.all(d).then(()=>{B.update(()=>{c&&Yc(t,c)})}),d}function Vs(t,e,s={}){var i;const n=mt(t,e,s.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const o=n?()=>Promise.all(Fa(t,n,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=a;return wu(t,e,u+d,h,m,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[o,c]:[c,o];return d().then(()=>u())}else return Promise.all([o(),c(s.delay)])}function wu(t,e,s=0,i=0,n=1,a){const o=[],c=(t.variantChildren.size-1)*i,l=n===1?(d=0)=>d*i:(d=0)=>c-d*i;return Array.from(t.variantChildren).sort(ju).forEach((d,u)=>{d.notify("AnimationStart",e),o.push(Vs(d,e,{...a,delay:s+l(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function ju(t,e){return t.sortNodePosition(e)}function Su(t,e,s={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const n=e.map(a=>Vs(t,a,s));i=Promise.all(n)}else if(typeof e=="string")i=Vs(t,e,s);else{const n=typeof e=="function"?mt(t,e,s.custom):e;i=Promise.all(Fa(t,n,s))}return i.then(()=>{t.notify("AnimationComplete",e)})}function Ia(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let i=0;i<s;i++)if(e[i]!==t[i])return!1;return!0}const Nu=ii.length;function Oa(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Oa(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Nu;s++){const i=ii[s],n=t.props[i];(dt(n)||n===!1)&&(e[i]=n)}return e}const Cu=[...si].reverse(),Pu=si.length;function Tu(t){return e=>Promise.all(e.map(({animation:s,options:i})=>Su(t,s,i)))}function ku(t){let e=Tu(t),s=ln(),i=!0;const n=l=>(d,u)=>{var h;const m=mt(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:f,transitionEnd:p,...g}=m;d={...d,...g,...p}}return d};function a(l){e=l(t)}function o(l){const{props:d}=t,u=Oa(t.parent)||{},h=[],m=new Set;let f={},p=1/0;for(let x=0;x<Pu;x++){const v=Cu[x],j=s[v],S=d[v]!==void 0?d[v]:u[v],k=dt(S),N=v===l?j.isActive:null;N===!1&&(p=x);let R=S===u[v]&&S!==d[v]&&k;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...f},!j.isActive&&N===null||!S&&!j.prevProp||Kt(S)||typeof S=="boolean")continue;const D=Au(j.prevProp,S);let w=D||v===l&&j.isActive&&!R&&k||x>p&&k,C=!1;const T=Array.isArray(S)?S:[S];let E=T.reduce(n(v),{});N===!1&&(E={});const{prevResolvedValues:b={}}=j,P={...b,...E},M=I=>{w=!0,m.has(I)&&(C=!0,m.delete(I)),j.needsAnimating[I]=!0;const Y=t.getValue(I);Y&&(Y.liveStyle=!1)};for(const I in P){const Y=E[I],H=b[I];if(f.hasOwnProperty(I))continue;let ae=!1;Ns(Y)&&Ns(H)?ae=!Ia(Y,H):ae=Y!==H,ae?Y!=null?M(I):m.add(I):Y!==void 0&&m.has(I)?M(I):j.protectedKeys[I]=!0}j.prevProp=S,j.prevResolvedValues=E,j.isActive&&(f={...f,...E}),i&&t.blockInitialAnimation&&(w=!1),w&&(!(R&&D)||C)&&h.push(...T.map(I=>({animation:I,options:{type:v}})))}if(m.size){const x={};if(typeof d.initial!="boolean"){const v=mt(t,Array.isArray(d.initial)?d.initial[0]:d.initial);v&&v.transition&&(x.transition=v.transition)}m.forEach(v=>{const j=t.getBaseTarget(v),S=t.getValue(v);S&&(S.liveStyle=!0),x[v]=j??null}),h.push({animation:x})}let g=!!h.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(h):Promise.resolve()}function c(l,d){var u;if(s[l].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(m=>{var f;return(f=m.animationState)===null||f===void 0?void 0:f.setActive(l,d)}),s[l].isActive=d;const h=o(l);for(const m in s)s[m].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>s,reset:()=>{s=ln(),i=!0}}}function Au(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ia(e,t):!1}function Ae(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ln(){return{animate:Ae(!0),whileInView:Ae(),whileHover:Ae(),whileTap:Ae(),whileDrag:Ae(),whileFocus:Ae(),exit:Ae()}}class Pe{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Mu extends Pe{constructor(e){super(e),e.animationState||(e.animationState=ku(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Eu=0;class Du extends Pe{constructor(){super(...arguments),this.id=Eu++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const n=this.node.animationState.setActive("exit",!e);s&&!e&&n.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Lu={animation:{Feature:Mu},exit:{Feature:Du}};function ft(t,e,s,i={passive:!0}){return t.addEventListener(e,s,i),()=>t.removeEventListener(e,s)}function wt(t){return{point:{x:t.pageX,y:t.pageY}}}const Ru=t=>e=>ti(e)&&t(e,wt(e));function rt(t,e,s,i){return ft(t,e,Ru(s),i)}function $a({top:t,left:e,right:s,bottom:i}){return{x:{min:e,max:s},y:{min:t,max:i}}}function Vu({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Fu(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}const Ba=1e-4,Iu=1-Ba,Ou=1+Ba,Ua=.01,$u=0-Ua,Bu=0+Ua;function ee(t){return t.max-t.min}function Uu(t,e,s){return Math.abs(t-e)<=s}function cn(t,e,s,i=.5){t.origin=i,t.originPoint=z(e.min,e.max,t.origin),t.scale=ee(s)/ee(e),t.translate=z(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Iu&&t.scale<=Ou||isNaN(t.scale))&&(t.scale=1),(t.translate>=$u&&t.translate<=Bu||isNaN(t.translate))&&(t.translate=0)}function at(t,e,s,i){cn(t.x,e.x,s.x,i?i.originX:void 0),cn(t.y,e.y,s.y,i?i.originY:void 0)}function dn(t,e,s){t.min=s.min+e.min,t.max=t.min+ee(e)}function Hu(t,e,s){dn(t.x,e.x,s.x),dn(t.y,e.y,s.y)}function un(t,e,s){t.min=e.min-s.min,t.max=t.min+ee(e)}function ot(t,e,s){un(t.x,e.x,s.x),un(t.y,e.y,s.y)}const hn=()=>({translate:0,scale:1,origin:0,originPoint:0}),ze=()=>({x:hn(),y:hn()}),mn=()=>({min:0,max:0}),_=()=>({x:mn(),y:mn()});function re(t){return[t("x"),t("y")]}function ns(t){return t===void 0||t===1}function Fs({scale:t,scaleX:e,scaleY:s}){return!ns(t)||!ns(e)||!ns(s)}function Me(t){return Fs(t)||Ha(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ha(t){return pn(t.x)||pn(t.y)}function pn(t){return t&&t!=="0%"}function It(t,e,s){const i=t-s,n=e*i;return s+n}function fn(t,e,s,i,n){return n!==void 0&&(t=It(t,n,i)),It(t,s,i)+e}function Is(t,e=0,s=1,i,n){t.min=fn(t.min,e,s,i,n),t.max=fn(t.max,e,s,i,n)}function za(t,{x:e,y:s}){Is(t.x,e.translate,e.scale,e.originPoint),Is(t.y,s.translate,s.scale,s.originPoint)}const gn=.999999999999,xn=1.0000000000001;function zu(t,e,s,i=!1){const n=s.length;if(!n)return;e.x=e.y=1;let a,o;for(let c=0;c<n;c++){a=s[c],o=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ke(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,za(t,o)),i&&Me(a.latestValues)&&Ke(t,a.latestValues))}e.x<xn&&e.x>gn&&(e.x=1),e.y<xn&&e.y>gn&&(e.y=1)}function We(t,e){t.min=t.min+e,t.max=t.max+e}function yn(t,e,s,i,n=.5){const a=z(t.min,t.max,n);Is(t,e,s,a,i)}function Ke(t,e){yn(t.x,e.x,e.scaleX,e.scale,e.originX),yn(t.y,e.y,e.scaleY,e.scale,e.originY)}function Wa(t,e){return $a(Fu(t.getBoundingClientRect(),e))}function Wu(t,e,s){const i=Wa(t,s),{scroll:n}=e;return n&&(We(i.x,n.offset.x),We(i.y,n.offset.y)),i}const Ka=({current:t})=>t?t.ownerDocument.defaultView:null,vn=(t,e)=>Math.abs(t-e);function Ku(t,e){const s=vn(t.x,e.x),i=vn(t.y,e.y);return Math.sqrt(s**2+i**2)}class _a{constructor(e,s,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=as(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,f=Ku(h.offset,{x:0,y:0})>=3;if(!m&&!f)return;const{point:p}=h,{timestamp:g}=q;this.history.push({...p,timestamp:g});const{onStart:x,onMove:v}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=rs(m,this.transformPagePoint),B.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=as(h.type==="pointercancel"?this.lastMoveEventInfo:rs(m,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,x),p&&p(h,x)},!ti(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=i,this.contextWindow=n||window;const o=wt(e),c=rs(o,this.transformPagePoint),{point:l}=c,{timestamp:d}=q;this.history=[{...l,timestamp:d}];const{onSessionStart:u}=s;u&&u(e,as(c,this.history)),this.removeListeners=bt(rt(this.contextWindow,"pointermove",this.handlePointerMove),rt(this.contextWindow,"pointerup",this.handlePointerUp),rt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Se(this.updatePoint)}}function rs(t,e){return e?{point:e(t.point)}:t}function bn(t,e){return{x:t.x-e.x,y:t.y-e.y}}function as({point:t},e){return{point:t,delta:bn(t,Ga(e)),offset:bn(t,_u(e)),velocity:Gu(e,.1)}}function _u(t){return t[0]}function Ga(t){return t[t.length-1]}function Gu(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,i=null;const n=Ga(t);for(;s>=0&&(i=t[s],!(n.timestamp-i.timestamp>me(e)));)s--;if(!i)return{x:0,y:0};const a=pe(n.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const o={x:(n.x-i.x)/a,y:(n.y-i.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qu(t,{min:e,max:s},i){return e!==void 0&&t<e?t=i?z(e,t,i.min):Math.max(t,e):s!==void 0&&t>s&&(t=i?z(s,t,i.max):Math.min(t,s)),t}function wn(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function Yu(t,{top:e,left:s,bottom:i,right:n}){return{x:wn(t.x,s,n),y:wn(t.y,e,i)}}function jn(t,e){let s=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,i]=[i,s]),{min:s,max:i}}function Xu(t,e){return{x:jn(t.x,e.x),y:jn(t.y,e.y)}}function Zu(t,e){let s=.5;const i=ee(t),n=ee(e);return n>i?s=_e(e.min,e.max-i,t.min):i>n&&(s=_e(t.min,t.max-n,e.min)),ge(0,1,s)}function Ju(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Os=.35;function Qu(t=Os){return t===!1?t=0:t===!0&&(t=Os),{x:Sn(t,"left","right"),y:Sn(t,"top","bottom")}}function Sn(t,e,s){return{min:Nn(t,e),max:Nn(t,s)}}function Nn(t,e){return typeof t=="number"?t:t[e]||0}const eh=new WeakMap;class th{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(wt(u).point)},a=(u,h)=>{const{drag:m,dragPropagation:f,onDragStart:p}=this.getProps();if(m&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Yl(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),re(x=>{let v=this.getAxisMotionValue(x).get()||0;if(ue.test(v)){const{projection:j}=this.visualElement;if(j&&j.layout){const S=j.layout.layoutBox[x];S&&(v=ee(S)*(parseFloat(v)/100))}}this.originPoint[x]=v}),p&&B.postRender(()=>p(u,h)),Cs(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=h;if(f&&this.currentDirection===null){this.currentDirection=sh(x),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),g&&g(u,h)},c=(u,h)=>this.stop(u,h),l=()=>re(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new _a(e,{onSessionStart:n,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Ka(this.visualElement)})}stop(e,s){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&B.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,i){const{drag:n}=this.getProps();if(!i||!Nt(e,n,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=qu(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&Ue(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=Yu(n.layoutBox,s):this.constraints=!1,this.elastic=Qu(i),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&re(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Ju(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Ue(e))return!1;const i=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const a=Wu(i,n.root,this.visualElement.getTransformPagePoint());let o=Xu(n.layout.layoutBox,a);if(s){const c=s(Vu(o));this.hasMutatedConstraints=!!c,c&&(o=$a(c))}return o}startAnimation(e){const{drag:s,dragMomentum:i,dragElastic:n,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),l=this.constraints||{},d=re(u=>{if(!Nt(u,s,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=n?200:1e6,f=n?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(d).then(c)}startAxisValueAnimation(e,s){const i=this.getAxisMotionValue(e);return Cs(this.visualElement,e),i.start(ji(e,i,0,s,this.visualElement,!1))}stopAnimation(){re(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){re(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),n=i[s];return n||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){re(s=>{const{drag:i}=this.getProps();if(!Nt(s,i,this.currentDirection))return;const{projection:n}=this.visualElement,a=this.getAxisMotionValue(s);if(n&&n.layout){const{min:o,max:c}=n.layout.layoutBox[s];a.set(e[s]-z(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!Ue(s)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};re(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const l=c.get();n[o]=Zu({min:l,max:l},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),re(o=>{if(!Nt(o,e,null))return;const c=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];c.set(z(l,d,n[o]))})}addListeners(){if(!this.visualElement.current)return;eh.set(this.visualElement,this);const e=this.visualElement.current,s=rt(e,"pointerdown",l=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ue(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,a=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),B.read(i);const o=ft(window,"resize",()=>this.scalePositionWithinConstraints()),c=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(re(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:o=Os,dragMomentum:c=!0}=e;return{...e,drag:s,dragDirectionLock:i,dragPropagation:n,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Nt(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function sh(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class ih extends Pe{constructor(e){super(e),this.removeGroupControls=ie,this.removeListeners=ie,this.controls=new th(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ie}unmount(){this.removeGroupControls(),this.removeListeners()}}const Cn=t=>(e,s)=>{t&&B.postRender(()=>t(e,s))};class nh extends Pe{constructor(){super(...arguments),this.removePointerDownListener=ie}onPointerDown(e){this.session=new _a(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ka(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:Cn(e),onStart:Cn(s),onMove:i,onEnd:(a,o)=>{delete this.session,n&&B.postRender(()=>n(a,o))}}}mount(){this.removePointerDownListener=rt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pn(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qe={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(A.test(t))t=parseFloat(t);else return t;const s=Pn(t,e.target.x),i=Pn(t,e.target.y);return`${s}% ${i}%`}},rh={correct:(t,{treeScale:e,projectionDelta:s})=>{const i=t,n=Ne.parse(t);if(n.length>5)return i;const a=Ne.createTransformer(t),o=typeof n[0]!="number"?1:0,c=s.x.scale*e.x,l=s.y.scale*e.y;n[0+o]/=c,n[1+o]/=l;const d=z(c,l,.5);return typeof n[2+o]=="number"&&(n[2+o]/=d),typeof n[3+o]=="number"&&(n[3+o]/=d),a(n)}};class ah extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:i,layoutId:n}=this.props,{projection:a}=e;Sc(oh),a&&(s.group&&s.group.add(a),i&&i.register&&n&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Mt.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:i,drag:n,isPresent:a}=this.props,o=i.projection;return o&&(o.isPresent=a,n||e.layoutDependency!==s||s===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||B.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ei.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qa(t){const[e,s]=$l(),i=y.useContext(Mr);return r.jsx(ah,{...t,layoutGroup:i,switchLayoutGroup:y.useContext(Kr),isPresent:e,safeToRemove:s})}const oh={borderRadius:{...Qe,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomLeftRadius:Qe,borderBottomRightRadius:Qe,boxShadow:rh};function lh(t,e,s){const i=Z(t)?t:ct(t);return i.start(ji("",i,e,s)),i.animation}function ch(t){return t instanceof SVGElement&&t.tagName!=="svg"}const dh=(t,e)=>t.depth-e.depth;class uh{constructor(){this.children=[],this.isDirty=!1}add(e){Gs(this.children,e),this.isDirty=!0}remove(e){qs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dh),this.isDirty=!1,this.children.forEach(e)}}function hh(t,e){const s=de.now(),i=({timestamp:n})=>{const a=n-s;a>=e&&(Se(i),t(a-e))};return B.read(i,!0),()=>Se(i)}const Ya=["TopLeft","TopRight","BottomLeft","BottomRight"],mh=Ya.length,Tn=t=>typeof t=="string"?parseFloat(t):t,kn=t=>typeof t=="number"||A.test(t);function ph(t,e,s,i,n,a){n?(t.opacity=z(0,s.opacity!==void 0?s.opacity:1,fh(i)),t.opacityExit=z(e.opacity!==void 0?e.opacity:1,0,gh(i))):a&&(t.opacity=z(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,i));for(let o=0;o<mh;o++){const c=`border${Ya[o]}Radius`;let l=An(e,c),d=An(s,c);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||kn(l)===kn(d)?(t[c]=Math.max(z(Tn(l),Tn(d),i),0),(ue.test(d)||ue.test(l))&&(t[c]+="%")):t[c]=d}(e.rotate||s.rotate)&&(t.rotate=z(e.rotate||0,s.rotate||0,i))}function An(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fh=Xa(0,.5,ha),gh=Xa(.5,.95,ie);function Xa(t,e,s){return i=>i<t?0:i>e?1:s(_e(t,e,i))}function Mn(t,e){t.min=e.min,t.max=e.max}function ne(t,e){Mn(t.x,e.x),Mn(t.y,e.y)}function En(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Dn(t,e,s,i,n){return t-=e,t=It(t,1/s,i),n!==void 0&&(t=It(t,1/n,i)),t}function xh(t,e=0,s=1,i=.5,n,a=t,o=t){if(ue.test(e)&&(e=parseFloat(e),e=z(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=z(a.min,a.max,i);t===a&&(c-=e),t.min=Dn(t.min,e,s,c,n),t.max=Dn(t.max,e,s,c,n)}function Ln(t,e,[s,i,n],a,o){xh(t,e[s],e[i],e[n],e.scale,a,o)}const yh=["x","scaleX","originX"],vh=["y","scaleY","originY"];function Rn(t,e,s,i){Ln(t.x,e,yh,s?s.x:void 0,i?i.x:void 0),Ln(t.y,e,vh,s?s.y:void 0,i?i.y:void 0)}function Vn(t){return t.translate===0&&t.scale===1}function Za(t){return Vn(t.x)&&Vn(t.y)}function Fn(t,e){return t.min===e.min&&t.max===e.max}function bh(t,e){return Fn(t.x,e.x)&&Fn(t.y,e.y)}function In(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ja(t,e){return In(t.x,e.x)&&In(t.y,e.y)}function On(t){return ee(t.x)/ee(t.y)}function $n(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wh{constructor(){this.members=[]}add(e){Gs(this.members,e),e.scheduleRender()}remove(e){if(qs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(n=>e===n);if(s===0)return!1;let i;for(let n=s;n>=0;n--){const a=this.members[n];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,s){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,s&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:i}=e;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jh(t,e,s){let i="";const n=t.x.translate/e.x,a=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((n||a||o)&&(i=`translate3d(${n}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:f,skewY:p}=s;d&&(i=`perspective(${d}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),m&&(i+=`rotateY(${m}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const c=t.x.scale*e.x,l=t.y.scale*e.y;return(c!==1||l!==1)&&(i+=`scale(${c}, ${l})`),i||"none"}const os=["","X","Y","Z"],Sh={visibility:"hidden"},Bn=1e3;let Nh=0;function ls(t,e,s,i){const{latestValues:n}=e;n[t]&&(s[t]=n[t],e.setStaticValue(t,0),i&&(i[t]=0))}function Qa(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=ra(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",B,!(n||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&Qa(i)}function eo({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(o={},c=e==null?void 0:e()){this.id=Nh++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Th),this.nodes.forEach(Dh),this.nodes.forEach(Lh),this.nodes.forEach(kh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uh)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xs),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const l=this.eventHandlers.get(o);l&&l.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ch(o),this.instance=o;const{layoutId:l,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=hh(m,250),Mt.hasAnimatedSinceResize&&(Mt.hasAnimatedSinceResize=!1,this.nodes.forEach(Hn))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Oh,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),j=!this.targetLayout||!Ja(this.targetLayout,p),S=!m&&f;if(this.options.layoutRoot||this.resumeFrom||S||m&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const k={...Zs(g,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||Hn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Se(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rh),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Qa(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:l}=this.options;if(c===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Un);return}this.isUpdating||this.nodes.forEach(Mh),this.isUpdating=!1,this.nodes.forEach(Eh),this.nodes.forEach(Ch),this.nodes.forEach(Ph),this.clearAllSnapshots();const c=de.now();q.delta=ge(0,1e3/60,c-q.timestamp),q.timestamp=c,q.isProcessing=!0,Jt.update.process(q),Jt.preRender.process(q),Jt.render.process(q),q.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ei.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ah),this.sharedNodes.forEach(Vh)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,B.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){B.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ee(this.snapshot.measuredBox.x)&&!ee(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Za(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(c||Me(this.latestValues)||u)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let l=this.removeElementScroll(c);return o&&(l=this.removeTransform(l)),$h(l),{animationId:this.root.animationId,measuredBox:c,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return _();const l=c.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Bh))){const{scroll:u}=this.root;u&&(We(l.x,u.offset.x),We(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=_();if(ne(l,o),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&ne(l,o),We(l.x,h.offset.x),We(l.y,h.offset.y))}return l}applyTransform(o,c=!1){const l=_();ne(l,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!c&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ke(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Me(u.latestValues)&&Ke(l,u.latestValues)}return Me(this.latestValues)&&Ke(l,this.latestValues),l}removeTransform(o){const c=_();ne(c,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!Me(d.latestValues))continue;Fs(d.latestValues)&&d.updateSnapshot();const u=_(),h=d.measurePageBox();ne(u,h),Rn(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Me(this.latestValues)&&Rn(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==q.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var c;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=q.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_(),this.relativeTargetOrigin=_(),ot(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_(),this.targetWithTransforms=_()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hu(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ne(this.target,this.layout.layoutBox),za(this.target,this.targetDelta)):ne(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_(),this.relativeTargetOrigin=_(),ot(this.relativeTargetOrigin,this.target,f.target),ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Fs(this.parent.latestValues)||Ha(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===q.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;ne(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;zu(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=_());const{target:p}=c;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(En(this.prevProjectionDelta.x,this.projectionDelta.x),En(this.prevProjectionDelta.y,this.projectionDelta.y)),at(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==f||!$n(this.projectionDelta.x,this.prevProjectionDelta.x)||!$n(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ze(),this.projectionDelta=ze(),this.projectionDeltaWithTransform=ze()}setAnimationOrigin(o,c=!1){const l=this.snapshot,d=l?l.latestValues:{},u={...this.latestValues},h=ze();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=_(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,x=this.getStack(),v=!x||x.members.length<=1,j=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Ih));this.animationProgress=0;let S;this.mixTargetDelta=k=>{const N=k/1e3;zn(h.x,o.x,N),zn(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ot(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fh(this.relativeTarget,this.relativeTargetOrigin,m,N),S&&bh(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=_()),ne(S,this.relativeTarget)),g&&(this.animationValues=u,ph(u,d,this.latestValues,N,j,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Se(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=B.update(()=>{Mt.hasAnimatedSinceResize=!0,this.currentAnimation=lh(0,Bn,{...o,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Bn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:l,layout:d,latestValues:u}=o;if(!(!c||!l||!d)){if(this!==o&&this.layout&&d&&to(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||_();const h=ee(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=ee(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}ne(c,l),Ke(c,u),at(this.projectionDeltaWithTransform,this.layoutCorrected,c,u)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wh),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:c}=this.options;return c?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:c}=this.options;return c?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(c=!0),!c)return;const d={};l.z&&ls("z",o,d,this.animationValues);for(let u=0;u<os.length;u++)ls(`rotate${os[u]}`,o,d,this.animationValues),ls(`skew${os[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var c,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Sh;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=At(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=At(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Me(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=jh(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x:f,y:p}=this.projectionDelta;d.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,h.animationValues?d.opacity=h===this?(l=(c=m.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in ut){if(m[g]===void 0)continue;const{correct:x,applyTo:v,isCSSVariable:j}=ut[g],S=d.transform==="none"?m[g]:x(m[g],h);if(v){const k=v.length;for(let N=0;N<k;N++)d[v[N]]=S}else j?this.options.visualElement.renderState.vars[g]=S:d[g]=S}return this.options.layoutId&&(d.pointerEvents=h===this?At(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(Un),this.root.sharedNodes.clear()}}}function Ch(t){t.updateLayout()}function Ph(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=t.layout,{animationType:a}=t.options,o=s.source!==t.layout.source;a==="size"?re(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],f=ee(m);m.min=i[h].min,m.max=m.min+f}):to(a,s.layoutBox,i)&&re(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],f=ee(i[h]);m.max=m.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const c=ze();at(c,i,s.layoutBox);const l=ze();o?at(l,t.applyTransform(n,!0),s.measuredBox):at(l,i,s.layoutBox);const d=!Za(c);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const p=_();ot(p,s.layoutBox,m.layoutBox);const g=_();ot(g,i,f.layoutBox),Ja(p,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:s,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Th(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kh(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ah(t){t.clearSnapshot()}function Un(t){t.clearMeasurements()}function Mh(t){t.isLayoutDirty=!1}function Eh(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Hn(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Dh(t){t.resolveTargetDelta()}function Lh(t){t.calcProjection()}function Rh(t){t.resetSkewAndRotation()}function Vh(t){t.removeLeadSnapshot()}function zn(t,e,s){t.translate=z(e.translate,0,s),t.scale=z(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Wn(t,e,s,i){t.min=z(e.min,s.min,i),t.max=z(e.max,s.max,i)}function Fh(t,e,s,i){Wn(t.x,e.x,s.x,i),Wn(t.y,e.y,s.y,i)}function Ih(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Oh={duration:.45,ease:[.4,0,.1,1]},Kn=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_n=Kn("applewebkit/")&&!Kn("chrome/")?Math.round:ie;function Gn(t){t.min=_n(t.min),t.max=_n(t.max)}function $h(t){Gn(t.x),Gn(t.y)}function to(t,e,s){return t==="position"||t==="preserve-aspect"&&!Uu(On(e),On(s),.2)}function Bh(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Uh=eo({attachResizeListener:(t,e)=>ft(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cs={current:void 0},so=eo({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cs.current){const t=new Uh({});t.mount(window),t.setOptions({layoutScroll:!0}),cs.current=t}return cs.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Hh={pan:{Feature:nh},drag:{Feature:ih,ProjectionNode:so,MeasureLayout:qa}};function qn(t,e,s){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,a=i[n];a&&B.postRender(()=>a(e,wt(e)))}class zh extends Pe{mount(){const{current:e}=this.node;e&&(this.unmount=Zl(e,(s,i)=>(qn(this.node,i,"Start"),n=>qn(this.node,n,"End"))))}unmount(){}}class Wh extends Pe{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bt(ft(this.node.current,"focus",()=>this.onFocus()),ft(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yn(t,e,s){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),a=i[n];a&&B.postRender(()=>a(e,wt(e)))}class Kh extends Pe{mount(){const{current:e}=this.node;e&&(this.unmount=tc(e,(s,i)=>(Yn(this.node,i,"Start"),(n,{success:a})=>Yn(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $s=new WeakMap,ds=new WeakMap,_h=t=>{const e=$s.get(t.target);e&&e(t)},Gh=t=>{t.forEach(_h)};function qh({root:t,...e}){const s=t||document;ds.has(s)||ds.set(s,{});const i=ds.get(s),n=JSON.stringify(e);return i[n]||(i[n]=new IntersectionObserver(Gh,{root:t,...e})),i[n]}function Yh(t,e,s){const i=qh(e);return $s.set(t,s),i.observe(t),()=>{$s.delete(t),i.unobserve(t)}}const Xh={some:0,all:1};class Zh extends Pe{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:i,amount:n="some",once:a}=e,o={root:s?s.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:Xh[n]},c=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(l)};return Yh(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(Jh(e,s))&&this.startObserver()}unmount(){}}function Jh({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const Qh={inView:{Feature:Zh},tap:{Feature:Kh},focus:{Feature:Wh},hover:{Feature:zh}},em={layout:{ProjectionNode:so,MeasureLayout:qa}},Bs={current:null},io={current:!1};function tm(){if(io.current=!0,!!Ks)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bs.current=t.matches;t.addListener(e),e()}else Bs.current=!1}const sm=[...Ta,X,Ne],im=t=>sm.find(Pa(t)),nm=new WeakMap;function rm(t,e,s){for(const i in e){const n=e[i],a=s[i];if(Z(n))t.addValue(i,n);else if(Z(a))t.addValue(i,ct(n,{owner:t}));else if(a!==n)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=t.getStaticValue(i);t.addValue(i,ct(o!==void 0?o:n,{owner:t}))}}for(const i in s)e[i]===void 0&&t.removeValue(i);return e}const Xn=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class am{scrapeMotionValuesFromProps(e,s,i){return{}}constructor({parent:e,props:s,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vi,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=de.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,B.render(this.render,!1,!0))};const{latestValues:l,renderState:d,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=_t(s),this.isVariantNode=zr(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in m){const p=m[f];l[f]!==void 0&&Z(p)&&p.set(l[f],!1)}}mount(e){this.current=e,nm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),io.current||tm(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bs.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Se(this.notifyUpdate),Se(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ve.has(e);i&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&B.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{n(),a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ge){const s=Ge[e];if(!s)continue;const{isEnabled:i,Feature:n}=s;if(!this.features[e]&&n&&i(this.props)&&(this.features[e]=new n(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<Xn.length;i++){const n=Xn[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const a="on"+n,o=e[a];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=rm(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const i=this.values.get(e);s!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&s!==void 0&&(i=ct(s===null?void 0:s,{owner:this}),this.addValue(e,i)),i}readValue(e,s){var i;let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Na(n)||pa(n))?n=parseFloat(n):!im(n)&&Ne.test(s)&&(n=wa(e,s)),this.setBaseTarget(e,Z(n)?n.get():n)),Z(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:i}=this.props;let n;if(typeof i=="string"||typeof i=="object"){const o=mi(this.props,i,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(n=o[e])}if(i&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Z(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Xs),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class no extends am{constructor(){super(...arguments),this.KeyframeResolver=ka}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:i}){delete s[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Z(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function om(t){return window.getComputedStyle(t)}class lm extends no{constructor(){super(...arguments),this.type="html",this.renderInstance=ea}readValueFromInstance(e,s){if(Ve.has(s))return bd(e,s);{const i=om(e),n=(ri(s)?i.getPropertyValue(s):i[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Wa(e,s)}build(e,s,i){li(e,s,i.transformTemplate)}scrapeMotionValuesFromProps(e,s,i){return pi(e,s,i)}}class cm extends no{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Qr(this.current,this.renderState)}}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ve.has(s)){const i=ba(s);return i&&i.default||0}return s=ta.has(s)?s:ni(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,i){return ia(e,s,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&B.postRender(this.updateDimensions)}build(e,s,i){ui(e,s,this.isSVGTag,i.transformTemplate)}renderInstance(e,s,i,n){sa(e,s,i,n)}mount(e){this.isSVGTag=hi(e.tagName),super.mount(e)}}const dm=(t,e)=>di(t)?new cm(e):new lm(e,{allowProjection:t!==y.Fragment}),um=Gc({...Lu,...Qh,...Hh,...em},dm),hm=cc(um),mm=({card:t,isFlipped:e,isMatched:s,onClick:i})=>{const n={flipped:{rotateY:180,transition:{duration:.3,ease:"easeOut"}},unflipped:{rotateY:0,transition:{duration:.3,ease:"easeOut"}},matched:{scale:[1,1.1,1],opacity:1,transition:{duration:.6}}},a=()=>{!e&&!s&&i()};return r.jsx(hm.div,{className:`memory-card relative cursor-pointer w-full pb-[100%] perspective-500 ${s?"matched":""}`,onClick:a,animate:s?"matched":e?"flipped":"unflipped",variants:n,children:r.jsxs("div",{className:`absolute inset-0 w-full h-full rounded-lg shadow-md transform-style-3d transition-all duration-300 ${e?"rotate-y-180":""} ${s?"border-2 border-green-500 shadow-green-100":""}`,children:[r.jsx("div",{className:`absolute inset-0 w-full h-full rounded-lg backface-hidden ${e?"invisible":""}`,children:r.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-purple-600 to-indigo-500 rounded-lg flex items-center justify-center",children:r.jsx("div",{className:"text-4xl text-white opacity-80",children:"?"})})}),r.jsxs("div",{className:`absolute inset-0 w-full h-full rounded-lg backface-hidden rotate-y-180 overflow-hidden ${e?"":"invisible"}`,children:[r.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover rounded-lg",onDragStart:o=>o.preventDefault()}),s&&r.jsx("div",{className:"absolute inset-0 bg-green-500 bg-opacity-20 flex items-center justify-center",children:r.jsx("div",{className:"bg-white bg-opacity-90 rounded-full p-2",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]})]})})},Ct={},Us={getMemoryImages(t,e){const s=[{url:"/assets/digital-humans/grandpa.jpg",name:"Family Elder"},{url:"/assets/digital-humans/grandma.jpg",name:"Family Matriarch"},{url:"/assets/digital-humans/uncle.jpg",name:"Uncle"},{url:"/assets/digital-humans/cousin1.jpg",name:"Cousin 1"},{url:"/assets/digital-humans/cousin2.jpg",name:"Cousin 2"},{url:"/assets/digital-humans/mother.jpg",name:"Mother"},{url:"/assets/digital-humans/me.jpg",name:"Self"},{url:"/assets/digital-humans/memory1.jpg",name:"Memory 1"},{url:"/assets/digital-humans/memory2.jpg",name:"Memory 2"},{url:"/assets/digital-humans/memory3.jpg",name:"Memory 3"},{url:"/assets/digital-humans/memory4.jpg",name:"Memory 4"},{url:"/assets/digital-humans/grandpa.jpg",name:"Grandfather"}];let i=[...s];if(e&&e.mediaFiles){const n=e.mediaFiles.filter(a=>a.type==="image").map(a=>({url:a.url,name:a.description||"Memory"}));n.length>=t?i=n:i=[...n,...s]}return this.shuffleArray(i).slice(0,t)},saveGameStats(t){try{const e=t.digitalHumanId||"demo";return Ct[e]||(Ct[e]=[]),Ct[e].unshift(t),console.log("Game stats saved:",t),!0}catch(e){return console.error("Error saving game stats:",e),G.error("Failed to save game progress"),!1}},async getGameStats(t){return Ct[t||"demo"]||[]},shuffleArray(t){const e=[...t];for(let s=e.length-1;s>0;s--){const i=Math.floor(Math.random()*(s+1));[e[s],e[i]]=[e[i],e[s]]}return e}},pm=({digitalHuman:t,onFinish:e})=>{const{t:s}=xe(),[i,n]=y.useState([]),[a,o]=y.useState([]),[c,l]=y.useState([]),[d,u]=y.useState(0),[h,m]=y.useState(!1),[f,p]=y.useState(!1),[g,x]=y.useState(0),[v,j]=y.useState("medium"),[S,k]=y.useState(null),N={easy:6,medium:8,hard:12};y.useEffect(()=>{if(h&&!f){const C=setInterval(()=>{x(T=>T+1)},1e3);return k(C),()=>clearInterval(C)}},[h,f]),y.useEffect(()=>()=>{S&&clearInterval(S)},[S]),y.useEffect(()=>{if(h&&c.length>0&&c.length===i.length/2){S&&clearInterval(S),p(!0);const C={digitalHumanId:(t==null?void 0:t.id)||"demo",moves:d,timeElapsed:g,difficulty:v,timestamp:new Date().toISOString()};Us.saveGameStats(C),G.success(s("games.memory.successMessage",{moves:d,time:w(g)})),e&&e(C)}},[c,i,h,d,g,v,t,s,S,e]);const R=()=>{S&&clearInterval(S),o([]),l([]),u(0),x(0),p(!1);const C=N[v],T=Us.getMemoryImages(C,t),E=[];T.forEach((P,M)=>{E.push({id:`card-${M}-a`,imageUrl:P.url,name:P.name||`Memory ${M+1}`}),E.push({id:`card-${M}-b`,imageUrl:P.url,name:P.name||`Memory ${M+1}`})});const b=[...E].sort(()=>Math.random()-.5);n(b),m(!0)},D=C=>{if(!(a.length===2||a.includes(C)||c.includes(i[C].name))&&(o([...a,C]),a.length===1)){u(d+1);const T=a[0];i[T].name===i[C].name?(l([...c,i[T].name]),o([]),console.log("Match found!")):(setTimeout(()=>{o([])},1e3),console.log("No match!"))}},w=C=>{const T=Math.floor(C/60),E=C%60;return`${T.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}`};return r.jsxs("div",{className:"memory-game p-4 bg-white rounded-xl shadow-lg",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s("games.memory.title")}),r.jsx("p",{className:"text-gray-600",children:s("games.memory.description")})]}),!h||f?r.jsxs("div",{className:"game-setup text-center py-8",children:[f&&r.jsxs("div",{className:"game-result mb-8 bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-xl font-semibold text-green-700 mb-2",children:s("games.memory.gameComplete")}),r.jsxs("div",{className:"text-green-600",children:[r.jsxs("p",{children:[s("games.memory.moves"),": ",r.jsx("strong",{children:d})]}),r.jsxs("p",{children:[s("games.memory.time"),": ",r.jsx("strong",{children:w(g)})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:s("games.memory.selectDifficulty")}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsx("button",{onClick:()=>j("easy"),className:`px-4 py-2 rounded-lg transition ${v==="easy"?"bg-green-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:s("games.memory.easy")}),r.jsx("button",{onClick:()=>j("medium"),className:`px-4 py-2 rounded-lg transition ${v==="medium"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:s("games.memory.medium")}),r.jsx("button",{onClick:()=>j("hard"),className:`px-4 py-2 rounded-lg transition ${v==="hard"?"bg-red-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:s("games.memory.hard")})]})]}),r.jsx("button",{onClick:R,className:"bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition shadow-md",children:s(f?"games.memory.playAgain":"games.memory.startGame")})]}):r.jsxs("div",{className:"game-board",children:[r.jsxs("div",{className:"game-stats flex justify-between items-center mb-4 bg-gray-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"font-medium",children:w(g)})]}),r.jsx("div",{children:r.jsxs("span",{className:"font-medium text-purple-700",children:[s("games.memory.difficulty"),": ",s(`games.memory.${v}`)]})}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),r.jsxs("span",{className:"font-medium",children:[d," ",s("games.memory.moves")]})]})]}),r.jsx("div",{className:`grid gap-3 ${v==="easy"||v==="medium"?"grid-cols-3 sm:grid-cols-4":"grid-cols-4 sm:grid-cols-6"}`,children:i.map((C,T)=>r.jsx(mm,{card:C,isFlipped:a.includes(T)||c.includes(C.name),isMatched:c.includes(C.name),onClick:()=>D(T)},C.id))})]})]})},Zn=()=>{const{t}=xe(),{digitalHumanId:e}=yr(),[s,i]=y.useState(null),[n,a]=y.useState(null),[o,c]=y.useState([]),[l,d]=y.useState(!1);y.useEffect(()=>{(async()=>{if(e){d(!0);try{const g=await se.getById(e);a(g);const x=await Us.getGameStats(e);c(x)}catch(g){console.error("Error loading digital human or game stats:",g),wl.error(t("games.errorLoading"))}finally{d(!1)}}})()},[e,t]);const u=[{id:"memory",name:t("games.memory.title"),description:t("games.memory.shortDescription"),image:"/assets/digital-humans/memory1.jpg",difficulty:"medium",timeEstimate:"5-10",component:pm}],h=p=>{const g=u.find(x=>x.id===p);i(g)},m=p=>{c(g=>[p,...g])},f=p=>{const g=new Date(p);return g.toLocaleDateString()+" "+g.toLocaleTimeString()};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:n?t("games.personalized",{name:n.name}):t("games.title")}),r.jsx("p",{className:"text-gray-600",children:n?t("games.personalizedDescription",{name:n.name}):t("games.description")}),n&&r.jsx("div",{className:"mt-3",children:r.jsxs(F,{to:"/digital-human",className:"text-purple-600 hover:text-purple-800 transition flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),t("general.backTo",{name:t("navigation.digitalHuman")})]})})]}),r.jsxs("div",{className:`${s?"grid grid-cols-1 lg:grid-cols-4 gap-6":""}`,children:[r.jsx("div",{className:s?"lg:col-span-1":"",children:s?r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:t("games.available")}),r.jsx("div",{className:"space-y-3",children:u.map(p=>r.jsxs("div",{onClick:()=>h(p.id),className:`p-3 flex items-center rounded-lg cursor-pointer transition ${(s==null?void 0:s.id)===p.id?"bg-purple-50 border-l-4 border-purple-500":"hover:bg-gray-50"}`,children:[r.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden mr-3 bg-gray-100 flex items-center justify-center",children:r.jsx("img",{src:p.image||"/assets/digital-humans/memory1.jpg",alt:p.name,className:"w-full h-full object-cover",onError:g=>{g.target.onerror=null,g.target.src="/assets/digital-humans/memory1.jpg"}})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:p.name}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1 space-x-2",children:[r.jsxs("span",{children:[t("games.difficulty"),": ",t(`games.${p.difficulty}`)]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:t("games.timeEstimate",{time:p.timeEstimate})})]})]})]},p.id))})]}),o.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:t("games.recentStats")}),r.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:o.slice(0,5).map((p,g)=>r.jsx("div",{className:"p-3 border border-gray-100 rounded-lg bg-gray-50",children:r.jsxs("div",{className:"text-sm text-gray-800",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:t(`games.${p.difficulty}`)}),r.jsx("span",{children:f(p.timestamp)})]}),r.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[r.jsxs("span",{children:[t("games.memory.moves"),": ",p.moves]}),r.jsxs("span",{children:[t("games.memory.time"),": ",Math.floor(p.timeElapsed/60),":",(p.timeElapsed%60).toString().padStart(2,"0")]})]})]})},g))})]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(p=>r.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transform transition hover:-translate-y-1 hover:shadow-lg",onClick:()=>h(p.id),children:[r.jsx("div",{className:"h-40 bg-gray-100",children:r.jsx("img",{src:p.image||"/assets/digital-humans/memory1.jpg",alt:p.name,className:"w-full h-full object-cover",onError:g=>{g.target.onerror=null,g.target.src="/assets/digital-humans/memory1.jpg"}})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-800",children:p.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:p.description}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1 space-x-3",children:[r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[t("games.difficulty"),": ",t(`games.${p.difficulty}`)]}),r.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:t("games.timeEstimate",{time:p.timeEstimate})})]})]})]},p.id))})}),s&&r.jsx("div",{className:"lg:col-span-3",children:mo.createElement(s.component,{digitalHuman:n,onFinish:m})})]})]})})},Jn=()=>{const{t,i18n:e}=xe(),[s,i]=y.useState(!1),n=[{code:"en",name:"English"},{code:"zh-CN",name:"简体中文"},{code:"zh-TW",name:"繁體中文"},{code:"ja",name:"日本語"},{code:"ko",name:"한국어"}],a=n.find(l=>l.code===e.language)||n[1],o=()=>{i(!s)},c=l=>{e.changeLanguage(l),i(!1)};return y.useEffect(()=>{const l=d=>{const u=document.getElementById("language-dropdown");u&&!u.contains(d.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]),r.jsxs("div",{className:"relative",id:"language-dropdown",children:[r.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-purple-600 focus:outline-none",onClick:o,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578l-.29 1.892A5.989 5.989 0 0110 8c.954 0 1.856.223 2.657.619l.667-2.619H12a1 1 0 110-2h4a1 1 0 011 1v1a1 1 0 01-1 1h-1.93l-1.407 5.507A6.003 6.003 0 0116 13a6 6 0 01-12 0 5.989 5.989 0 012.907-5.132L5 6.239A1.5 1.5 0 014.5 6a1.5 1.5 0 110-3H7zm1.5 3.253a1.5 1.5 0 000 2.993h1a1.5 1.5 0 000-2.993h-1zM8.5 15a4.5 4.5 0 100-9 4.5 4.5 0 000 9z",clipRule:"evenodd"})}),a.name,r.jsx("svg",{className:`ml-1 h-4 w-4 transition-transform ${s?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),s&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:r.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"language-menu",children:n.map(l=>r.jsx("button",{onClick:()=>c(l.code),className:`block w-full text-left px-4 py-2 text-sm ${a.code===l.code?"bg-purple-50 text-purple-600":"text-gray-700 hover:bg-gray-100"}`,role:"menuitem",children:t(`languages.${l.code}`)},l.code))})})]})},fm=()=>{const[t,e]=y.useState(!1),{t:s}=xe();return r.jsx("header",{className:"bg-white bg-opacity-95 backdrop-blur-sm shadow-md sticky top-0 z-50 transition-all duration-300",children:r.jsxs("div",{className:"container mx-auto px-4 py-3",children:[r.jsxs("div",{className:"flex items-center justify-between relative",children:[r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500"}),r.jsx("div",{className:"flex items-center",children:r.jsx(F,{to:"/",className:"flex items-center hover:opacity-90 transition-opacity",children:r.jsx(zs,{size:"md"})})}),r.jsxs("nav",{className:"hidden md:flex space-x-6",children:[r.jsxs(F,{to:"/",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:s("header.home")}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]}),r.jsxs(F,{to:"/companion",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:s("companion.selectCompanion")}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]}),r.jsxs(F,{to:"/pet",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:s("home.features.virtualPet.title")}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]}),r.jsxs(F,{to:"/digital-human",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:s("digitalHuman.title")}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]}),r.jsxs(F,{to:"/vr",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:"VR"}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]}),r.jsxs(F,{to:"/shop",className:"px-2 py-1 rounded-md text-gray-700 hover:text-purple-600 hover:bg-purple-50 relative group transition-all duration-200",children:[r.jsx("span",{children:s("header.shop")}),r.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-600 to-indigo-500 group-hover:w-full transition-all duration-300"})]})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsx(Jn,{}),r.jsx(F,{to:"/login",className:"text-gray-700 hover:text-purple-600 transition-colors duration-200 px-3 py-1.5 rounded-md hover:bg-gray-50 border border-transparent hover:border-gray-200",children:s("auth.login")}),r.jsxs(F,{to:"/register",className:"relative group overflow-hidden bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-5 py-1.5 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5",children:[r.jsx("span",{className:"relative z-10",children:s("auth.signup")}),r.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out"})]})]}),r.jsx("button",{className:"md:hidden text-gray-700 p-2 rounded-full hover:bg-purple-50 focus:outline-none focus:ring-2 focus:ring-purple-200 transition-all duration-200",onClick:()=>e(!t),"aria-label":"Toggle menu",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12",className:"text-purple-600"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),t&&r.jsx("nav",{className:"mt-4 md:hidden bg-white rounded-lg shadow-lg py-4 px-2 animate-fadeIn",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs(F,{to:"/",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 transform scale-0 group-hover:scale-100"}),s("header.home")]}),r.jsxs(F,{to:"/companion",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 opacity-0 group-hover:opacity-100"}),s("companion.selectCompanion")]}),r.jsxs(F,{to:"/pet",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 opacity-0 group-hover:opacity-100"}),s("home.features.virtualPet.title")]}),r.jsxs(F,{to:"/digital-human",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 opacity-0 group-hover:opacity-100"}),s("digitalHuman.title")]}),r.jsxs(F,{to:"/vr",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 opacity-0 group-hover:opacity-100"}),"VR"]}),r.jsxs(F,{to:"/shop",className:"px-3 py-3 text-gray-700 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 flex items-center",onClick:()=>e(!1),children:[r.jsx("span",{className:"w-1 h-5 bg-gradient-to-b from-purple-600 to-indigo-500 rounded-full mr-2 opacity-0 group-hover:opacity-100"}),s("header.shop")]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200 mt-2 space-y-3",children:[r.jsx("div",{className:"px-3",children:r.jsx(Jn,{})}),r.jsxs("div",{className:"flex flex-col space-y-2 px-3",children:[r.jsx(F,{to:"/login",className:"text-gray-700 hover:text-purple-600 px-4 py-2 rounded-lg border border-gray-200 hover:border-purple-200 hover:bg-purple-50 transition-all duration-200 text-center",onClick:()=>e(!1),children:s("auth.login")}),r.jsx(F,{to:"/register",className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:shadow-md transition-all duration-200 text-center",onClick:()=>e(!1),children:s("auth.signup")})]})]})]})})]})})},gm=()=>{const{t}=xe();return y.useEffect(()=>{const e=document.querySelectorAll(".footer-animate"),s=new IntersectionObserver(i=>{i.forEach(n=>{n.isIntersecting&&n.target.classList.add("opacity-100","translate-y-0")})},{threshold:.1});return e.forEach(i=>{s.observe(i)}),()=>{e.forEach(i=>s.unobserve(i))}},[]),r.jsxs("footer",{className:"bg-gray-900 text-gray-300 py-10 relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden",style:{transform:"rotate(180deg)",height:"50px"},children:r.jsx(ms,{color:"#111827",opacity:.9})}),r.jsxs("div",{className:"container mx-auto px-4 pt-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-100",children:[r.jsx("div",{className:"mb-4",children:r.jsx(zs,{variant:"white",size:"md"})}),r.jsx("p",{className:"text-sm",children:t("footer.description")})]}),r.jsxs("div",{className:"footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-200",children:[r.jsx("h4",{className:"text-white font-medium mb-4 border-b border-gray-700 pb-2",children:t("footer.services")}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(F,{to:"/companion",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("companion.selectCompanion")})}),r.jsx("li",{children:r.jsx(F,{to:"/pet",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("home.features.virtualPet.title")})}),r.jsx("li",{children:r.jsx(F,{to:"/digital-human",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("home.features.digitalImmortality.title")})}),r.jsx("li",{children:r.jsx(F,{to:"/vr",className:"hover:text-white hover:pl-1 transition-all duration-200",children:"VR"})})]})]}),r.jsxs("div",{className:"footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-300",children:[r.jsx("h4",{className:"text-white font-medium mb-4 border-b border-gray-700 pb-2",children:t("footer.aboutUs")}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(F,{to:"/about",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("footer.aboutCompany")})}),r.jsx("li",{children:r.jsx(F,{to:"/team",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("footer.team")})}),r.jsx("li",{children:r.jsx(F,{to:"/contact",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("footer.contact")})}),r.jsx("li",{children:r.jsx(F,{to:"/join",className:"hover:text-white hover:pl-1 transition-all duration-200",children:t("footer.joinUs")})})]})]}),r.jsxs("div",{className:"footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-400",children:[r.jsx("h4",{className:"text-white font-medium mb-4 border-b border-gray-700 pb-2",children:t("footer.contactMethods")}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsxs("li",{className:"flex items-center",children:[r.jsx("span",{className:"text-purple-400 mr-2",children:"@"}),t("footer.email"),": uploadsoul@outlook.com"]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx("span",{className:"text-purple-400 mr-2",children:"☏"}),t("footer.phone"),": +1-888-123-4567"]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx("span",{className:"text-purple-400 mr-2",children:"⌖"}),t("footer.address"),": ",t("footer.addressDetails")]})]})]})]}),r.jsxs("div",{className:"flex justify-center space-x-8 mt-10 mb-8 footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-500",children:[r.jsxs("a",{href:"https://github.com/UploadSoulzhgrain/uploadsoul.github.io",className:"text-gray-400 hover:text-white transition-all duration-300 hover:scale-110 transform group",target:"_blank",rel:"noopener noreferrer",children:[r.jsx("span",{className:"sr-only",children:"GitHub"}),r.jsx("div",{className:"p-3 rounded-full bg-gray-800 group-hover:bg-gray-700 transition-colors duration-300",children:r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})]}),r.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-all duration-300 hover:scale-110 transform group",target:"_blank",rel:"noopener noreferrer",children:[r.jsx("span",{className:"sr-only",children:"Twitter"}),r.jsx("div",{className:"p-3 rounded-full bg-gray-800 group-hover:bg-gray-700 transition-colors duration-300",children:r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})]}),r.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-all duration-300 hover:scale-110 transform group",target:"_blank",rel:"noopener noreferrer",children:[r.jsx("span",{className:"sr-only",children:"LinkedIn"}),r.jsx("div",{className:"p-3 rounded-full bg-gray-800 group-hover:bg-gray-700 transition-colors duration-300",children:r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),r.jsxs("div",{className:"border-t border-gray-700 mt-8 pt-6 text-sm text-center footer-animate opacity-0 translate-y-4 transition-all duration-700 delay-600",children:[r.jsxs("p",{className:"mb-3",children:["© ",new Date().getFullYear()," ",r.jsx("span",{className:"text-purple-400 font-medium",children:"UploadSoul"})," ",t("footer.platformName"),". ",t("footer.copyright")]}),r.jsxs("div",{className:"flex justify-center space-x-6 text-gray-400",children:[r.jsx(F,{to:"/privacy",className:"hover:text-white transition-colors hover:underline",children:t("footer.privacy")}),r.jsx(F,{to:"/terms",className:"hover:text-white transition-colors hover:underline",children:t("footer.terms")}),r.jsx(F,{to:"/sitemap",className:"hover:text-white transition-colors hover:underline",children:t("footer.sitemap")})]})]})]})]})},xm=()=>r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(fm,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(po,{children:[r.jsx(ye,{path:"/",element:r.jsx(So,{})}),r.jsx(ye,{path:"/companion",element:r.jsx(No,{})}),r.jsx(ye,{path:"/digital-human",element:r.jsx(Rl,{})}),r.jsx(ye,{path:"/digital-human/family-tree/:digitalHumanId?",element:r.jsx(Vl,{})}),r.jsx(ye,{path:"/games",element:r.jsx(Zn,{})}),r.jsx(ye,{path:"/games/:digitalHumanId",element:r.jsx(Zn,{})}),r.jsx(ye,{path:"/shop",element:r.jsx(Fl,{})}),r.jsx(ye,{path:"*",element:r.jsx(fo,{to:"/",replace:!0})})]})}),r.jsx(gm,{})]});function ym(){return r.jsxs(go,{children:[r.jsx(jr,{}),r.jsx(xm,{})]})}const L=t=>typeof t=="string",et=()=>{let t,e;const s=new Promise((i,n)=>{t=i,e=n});return s.resolve=t,s.reject=e,s},Qn=t=>t==null?"":""+t,vm=(t,e,s)=>{t.forEach(i=>{e[i]&&(s[i]=e[i])})},bm=/###/g,er=t=>t&&t.indexOf("###")>-1?t.replace(bm,"."):t,tr=t=>!t||L(t),lt=(t,e,s)=>{const i=L(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(tr(t))return{};const a=er(i[n]);!t[a]&&s&&(t[a]=new s),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++n}return tr(t)?{}:{obj:t,k:er(i[n])}},sr=(t,e,s)=>{const{obj:i,k:n}=lt(t,e,Object);if(i!==void 0||e.length===1){i[n]=s;return}let a=e[e.length-1],o=e.slice(0,e.length-1),c=lt(t,o,Object);for(;c.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),c=lt(t,o,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${a}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=s},wm=(t,e,s,i)=>{const{obj:n,k:a}=lt(t,e,Object);n[a]=n[a]||[],n[a].push(s)},Ot=(t,e)=>{const{obj:s,k:i}=lt(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,i))return s[i]},jm=(t,e,s)=>{const i=Ot(t,s);return i!==void 0?i:Ot(e,s)},ro=(t,e,s)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?L(t[i])||t[i]instanceof String||L(e[i])||e[i]instanceof String?s&&(t[i]=e[i]):ro(t[i],e[i],s):t[i]=e[i]);return t},Ie=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Sm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Nm=t=>L(t)?t.replace(/[&<>"'\/]/g,e=>Sm[e]):t;class Cm{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Pm=[" ",",","?","!",";"],Tm=new Cm(20),km=(t,e,s)=>{e=e||"",s=s||"";const i=Pm.filter(o=>e.indexOf(o)<0&&s.indexOf(o)<0);if(i.length===0)return!0;const n=Tm.getRegExp(`(${i.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!n.test(t);if(!a){const o=t.indexOf(s);o>0&&!n.test(t.substring(0,o))&&(a=!0)}return a},Hs=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const i=e.split(s);let n=t;for(let a=0;a<i.length;){if(!n||typeof n!="object")return;let o,c="";for(let l=a;l<i.length;++l)if(l!==a&&(c+=s),c+=i[l],o=n[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<i.length-1)continue;a+=l-a+1;break}n=o}return n},$t=t=>t==null?void 0:t.replace("_","-"),Am={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var s,i;(i=(s=console==null?void 0:console[t])==null?void 0:s.apply)==null||i.call(s,console,e)}};class Bt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,s)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=e||Am,this.options=s,this.debug=s.debug}log(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return this.forward(s,"log","",!0)}warn(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return this.forward(s,"warn","",!0)}error(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return this.forward(s,"error","")}deprecate(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,i,n){return n&&!this.debug?null:(L(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Bt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Bt(this.logger,e)}}var ce=new Bt;class qt{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(s)||0;this.observers[i].set(s,n+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[c,l]=o;for(let d=0;d<l;d++)c(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[c,l]=o;for(let d=0;d<l;d++)c.apply(c,[e,...i])})}}class ir extends qt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,i){var d,u;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,o=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,s],i&&(Array.isArray(i)?c.push(...i):L(i)&&a?c.push(...i.split(a)):c.push(i)));const l=Ot(this.data,c);return!l&&!s&&!i&&e.indexOf(".")>-1&&(e=c[0],s=c[1],i=c.slice(2).join(".")),l||!o||!L(i)?l:Hs((u=(d=this.data)==null?void 0:d[e])==null?void 0:u[s],i,a)}addResource(e,s,i,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,s];i&&(c=c.concat(o?i.split(o):i)),e.indexOf(".")>-1&&(c=e.split("."),n=s,s=c[1]),this.addNamespaces(s),sr(this.data,c,n),a.silent||this.emit("added",e,s,i,n)}addResources(e,s,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in i)(L(i[a])||Array.isArray(i[a]))&&this.addResource(e,s,a,i[a],{silent:!0});n.silent||this.emit("added",e,s,i)}addResourceBundle(e,s,i,n,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,s];e.indexOf(".")>-1&&(c=e.split("."),n=i,i=s,s=c[1]),this.addNamespaces(s);let l=Ot(this.data,c)||{};o.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?ro(l,i,a):l={...l,...i},sr(this.data,c,l),o.silent||this.emit("added",e,s,i)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(n=>s[n]&&Object.keys(s[n]).length>0)}toJSON(){return this.data}}var ao={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,i,n){return t.forEach(a=>{var o;e=((o=this.processors[a])==null?void 0:o.process(e,s,i,n))??e}),e}};const nr={},rr=t=>!L(t)&&typeof t!="boolean"&&typeof t!="number";class Ut extends qt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vm(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ce.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,s);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,s){let i=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const o=i&&e.indexOf(i)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!km(e,i,n);if(o&&!c){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:L(a)?[a]:a};const d=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(d[0])>-1)&&(a=d.shift()),e=d.join(n)}return{key:e,namespaces:L(a)?[a]:a}}translate(e,s,i){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],s),l=c[c.length-1],d=s.lng||this.language,u=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode"){if(u){const E=s.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${E}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:`${l}${E}${o}`}return n?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:o}const h=this.resolve(e,s);let m=h==null?void 0:h.res;const f=(h==null?void 0:h.usedKey)||o,p=(h==null?void 0:h.exactUsedKey)||o,g=["[object Number]","[object Function]","[object RegExp]"],x=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,j=s.count!==void 0&&!L(s.count),S=Ut.hasDefaultValue(s),k=j?this.pluralResolver.getSuffix(d,s.count,s):"",N=s.ordinal&&j?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",R=j&&!s.ordinal&&s.count===0,D=R&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${k}`]||s[`defaultValue${N}`]||s.defaultValue;let w=m;v&&!m&&S&&(w=D);const C=rr(w),T=Object.prototype.toString.apply(w);if(v&&w&&C&&g.indexOf(T)<0&&!(L(x)&&Array.isArray(w))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,w,{...s,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(h.res=E,h.usedParams=this.getUsedParamsDetails(s),h):E}if(a){const E=Array.isArray(w),b=E?[]:{},P=E?p:f;for(const M in w)if(Object.prototype.hasOwnProperty.call(w,M)){const O=`${P}${a}${M}`;S&&!m?b[M]=this.translate(O,{...s,defaultValue:rr(D)?D[M]:void 0,joinArrays:!1,ns:c}):b[M]=this.translate(O,{...s,joinArrays:!1,ns:c}),b[M]===O&&(b[M]=w[M])}m=b}}else if(v&&L(x)&&Array.isArray(m))m=m.join(x),m&&(m=this.extendTranslation(m,e,s,i));else{let E=!1,b=!1;!this.isValidLookup(m)&&S&&(E=!0,m=D),this.isValidLookup(m)||(b=!0,m=o);const M=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&b?void 0:m,O=S&&D!==m&&this.options.updateMissing;if(b||E||O){if(this.logger.log(O?"updateKey":"missingKey",d,l,o,O?D:m),a){const H=this.resolve(o,{...s,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let U=[];const I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&I&&I[0])for(let H=0;H<I.length;H++)U.push(I[H]);else this.options.saveMissingTo==="all"?U=this.languageUtils.toResolveHierarchy(s.lng||this.language):U.push(s.lng||this.language);const Y=(H,ae,Ze)=>{var Ni;const Si=S&&Ze!==m?Ze:M;this.options.missingKeyHandler?this.options.missingKeyHandler(H,l,ae,Si,O,s):(Ni=this.backendConnector)!=null&&Ni.saveMissing&&this.backendConnector.saveMissing(H,l,ae,Si,O,s),this.emit("missingKey",H,l,ae,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?U.forEach(H=>{const ae=this.pluralResolver.getSuffixes(H,s);R&&s[`defaultValue${this.options.pluralSeparator}zero`]&&ae.indexOf(`${this.options.pluralSeparator}zero`)<0&&ae.push(`${this.options.pluralSeparator}zero`),ae.forEach(Ze=>{Y([H],o+Ze,s[`defaultValue${Ze}`]||D)})}):Y(U,o,D))}m=this.extendTranslation(m,e,s,h,i),b&&m===o&&this.options.appendNamespaceToMissingKey&&(m=`${l}:${o}`),(b||E)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,E?m:void 0))}return n?(h.res=m,h.usedParams=this.getUsedParamsDetails(s),h):m}extendTranslation(e,s,i,n,a){var d,u;var o=this;if((d=this.i18nFormat)!=null&&d.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const h=L(e)&&(((u=i==null?void 0:i.interpolation)==null?void 0:u.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(h){const p=e.match(this.interpolator.nestingRegexp);m=p&&p.length}let f=i.replace&&!L(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,i.lng||this.language||n.usedLng,i),h){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;m<g&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return(a==null?void 0:a[0])===g[0]&&!i.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${s[0]}`),null):o.translate(...g,s)},i)),i.interpolation&&this.interpolator.reset()}const c=i.postProcess||this.options.postProcess,l=L(c)?[c]:c;return e!=null&&(l!=null&&l.length)&&i.applyPostProcessor!==!1&&(e=ao.handle(l,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n,a,o,c;return L(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(l,s),u=d.key;n=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=s.count!==void 0&&!L(s.count),f=m&&!s.ordinal&&s.count===0,p=s.context!==void 0&&(L(s.context)||typeof s.context=="number")&&s.context!=="",g=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);h.forEach(x=>{var v,j;this.isValidLookup(i)||(c=x,!nr[`${g[0]}-${x}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((j=this.utils)!=null&&j.hasLoadedNamespace(c))&&(nr[`${g[0]}-${x}`]=!0,this.logger.warn(`key "${n}" for languages "${g.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(S=>{var R;if(this.isValidLookup(i))return;o=S;const k=[u];if((R=this.i18nFormat)!=null&&R.addLookupKeys)this.i18nFormat.addLookupKeys(k,u,S,x,s);else{let D;m&&(D=this.pluralResolver.getSuffix(S,s.count,s));const w=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(k.push(u+D),s.ordinal&&D.indexOf(C)===0&&k.push(u+D.replace(C,this.options.pluralSeparator)),f&&k.push(u+w)),p){const T=`${u}${this.options.contextSeparator}${s.context}`;k.push(T),m&&(k.push(T+D),s.ordinal&&D.indexOf(C)===0&&k.push(T+D.replace(C,this.options.pluralSeparator)),f&&k.push(T+w))}}let N;for(;N=k.pop();)this.isValidLookup(i)||(a=N,i=this.getResource(S,x,N,s))}))})}),{res:i,usedKey:n,exactUsedKey:a,usedLng:o,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,i){var a;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,s,i,n):this.resourceStore.getResource(e,s,i,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!L(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const a of s)delete n[a]}return n}static hasDefaultValue(e){const s="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&s===i.substring(0,s.length)&&e[i]!==void 0)return!0;return!1}}class ar{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ce.create("languageUtils")}getScriptPartFromCode(e){if(e=$t(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=$t(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(L(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(i=>{if(s)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(s=n)}),!s&&this.options.supportedLngs&&e.forEach(i=>{if(s)return;const n=this.getLanguagePartFromCode(i);if(this.isSupportedCode(n))return s=n;s=this.options.supportedLngs.find(a=>{if(a===n)return a;if(!(a.indexOf("-")<0&&n.indexOf("-")<0)&&(a.indexOf("-")>0&&n.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===n||a.indexOf(n)===0&&n.length>1))return a})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),L(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let i=e[s];return i||(i=e[this.getScriptPartFromCode(s)]),i||(i=e[this.formatLanguageCode(s)]),i||(i=e[this.getLanguagePartFromCode(s)]),i||(i=e.default),i||[]}toResolveHierarchy(e,s){const i=this.getFallbackCodes(s||this.options.fallbackLng||[],e),n=[],a=o=>{o&&(this.isSupportedCode(o)?n.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return L(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):L(e)&&a(this.formatLanguageCode(e)),i.forEach(o=>{n.indexOf(o)<0&&a(this.formatLanguageCode(o))}),n}}const or={zero:0,one:1,two:2,few:3,many:4,other:5},lr={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Mm{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=s,this.logger=ce.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=$t(e==="dev"?"en":e),n=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:n});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),lr;if(!e.match(/-|_/))return lr;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,s)}return this.pluralRulesCache[a]=o,o}needsPlural(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,s);return i||(i=this.getRule("dev",s)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(n=>`${s}${n}`)}getSuffixes(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,s);return i||(i=this.getRule("dev",s)),i?i.resolvedOptions().pluralCategories.sort((n,a)=>or[n]-or[a]).map(n=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,i))}}const cr=function(t,e,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=jm(t,e,s);return!a&&n&&L(s)&&(a=Hs(t,s,i),a===void 0&&(a=Hs(e,s,i))),a},us=t=>t.replace(/\$/g,"$$$$");class Em{constructor(){var s;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ce.create("interpolator"),this.options=e,this.format=((s=e==null?void 0:e.interpolation)==null?void 0:s.format)||(i=>i),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:i,useRawValueToEscape:n,prefix:a,prefixEscaped:o,suffix:c,suffixEscaped:l,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:x,maxReplaces:v,alwaysFormat:j}=e.interpolation;this.escape=s!==void 0?s:Nm,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=a?Ie(a):o||"{{",this.suffix=c?Ie(c):l||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?Ie(m):f||Ie("$t("),this.nestingSuffix=p?Ie(p):g||Ie(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=v||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,i)=>(s==null?void 0:s.source)===i?(s.lastIndex=0,s):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,i,n){var f;let a,o,c;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=p=>{if(p.indexOf(this.formatSeparator)<0){const j=cr(s,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(j,void 0,i,{...n,...s,interpolationkey:p}):j}const g=p.split(this.formatSeparator),x=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(cr(s,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),v,i,{...n,...s,interpolationkey:x})};this.resetRegExp();const u=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((f=n==null?void 0:n.interpolation)==null?void 0:f.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>us(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?us(this.escape(p)):us(p)}].forEach(p=>{for(c=0;a=p.regex.exec(e);){const g=a[1].trim();if(o=d(g),o===void 0)if(typeof u=="function"){const v=u(e,a,n);o=L(v)?v:""}else if(n&&Object.prototype.hasOwnProperty.call(n,g))o="";else if(h){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else!L(o)&&!this.useRawValueToEscape&&(o=Qn(o));const x=p.safeValue(o);if(e=e.replace(a[0],x),h?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=a[0].length):p.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,a,o;const c=(l,d)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let m=`{${h[1]}`;l=h[0],m=this.interpolate(m,o);const f=m.match(/'/g),p=m.match(/"/g);(((f==null?void 0:f.length)??0)%2===0&&!p||p.length%2!==0)&&(m=m.replace(/'/g,'"'));try{o=JSON.parse(m),d&&(o={...d,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${u}${m}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;n=this.nestingRegexp.exec(e);){let l=[];o={...i},o=o.replace&&!L(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const u=n[1].split(this.formatSeparator).map(h=>h.trim());n[1]=u.shift(),l=u,d=!0}if(a=s(c.call(this,n[1].trim(),o),o),a&&n[0]===e&&!L(a))return a;L(a)||(a=Qn(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),a=""),d&&(a=l.reduce((u,h)=>this.format(u,h,i.lng,{...i,interpolationkey:n[1].trim()}),a.trim())),e=e.replace(n[0],a),this.regexp.lastIndex=0}return e}}const Dm=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?s.currency||(s.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?s.range||(s.range=n.trim()):n.split(";").forEach(o=>{if(o){const[c,...l]=o.split(":"),d=l.join(":").trim().replace(/^'+|'+$/g,""),u=c.trim();s[u]||(s[u]=d),d==="false"&&(s[u]=!1),d==="true"&&(s[u]=!0),isNaN(d)||(s[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:s}},Oe=t=>{const e={};return(s,i,n)=>{let a=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(a={...a,[n.interpolationkey]:void 0});const o=i+JSON.stringify(a);let c=e[o];return c||(c=t($t(i),n),e[o]=c),c(s)}};class Lm{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ce.create("formatter"),this.options=e,this.formats={number:Oe((s,i)=>{const n=new Intl.NumberFormat(s,{...i});return a=>n.format(a)}),currency:Oe((s,i)=>{const n=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>n.format(a)}),datetime:Oe((s,i)=>{const n=new Intl.DateTimeFormat(s,{...i});return a=>n.format(a)}),relativetime:Oe((s,i)=>{const n=new Intl.RelativeTimeFormat(s,{...i});return a=>n.format(a,i.range||"day")}),list:Oe((s,i)=>{const n=new Intl.ListFormat(s,{...i});return a=>n.format(a)})},this.init(e)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=Oe(s)}format(e,s,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,l)=>{var h;const{formatName:d,formatOptions:u}=Dm(l);if(this.formats[d]){let m=c;try{const f=((h=n==null?void 0:n.formatParams)==null?void 0:h[n.interpolationkey])||{},p=f.locale||f.lng||n.locale||n.lng||i;m=this.formats[d](c,p,{...u,...n,...f})}catch(f){this.logger.warn(f)}return m}else this.logger.warn(`there was no format function for ${d}`);return c},e)}}const Rm=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Vm extends qt{constructor(e,s,i){var a,o;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=s,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=ce.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(o=(a=this.backend)==null?void 0:a.init)==null||o.call(a,i,n.backend,n)}queueLoad(e,s,i,n){const a={},o={},c={},l={};return e.forEach(d=>{let u=!0;s.forEach(h=>{const m=`${d}|${h}`;!i.reload&&this.store.hasResourceBundle(d,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?o[m]===void 0&&(o[m]=!0):(this.state[m]=1,u=!1,o[m]===void 0&&(o[m]=!0),a[m]===void 0&&(a[m]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(c[d]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(l)}}loaded(e,s,i){const n=e.split("|"),a=n[0],o=n[1];s&&this.emit("failedLoading",a,o,s),!s&&i&&this.store.addResourceBundle(a,o,i,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&i&&(this.state[e]=0);const c={};this.queue.forEach(l=>{wm(l.loaded,[a],o),Rm(l,e),s&&l.errors.push(s),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(d=>{c[d]||(c[d]={});const u=l.loaded[d];u.length&&u.forEach(h=>{c[d][h]===void 0&&(c[d][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(l=>!l.done)}read(e,s,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:i,tried:n,wait:a,callback:o});return}this.readingCalls++;const c=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,i,n+1,a*2,o)},a);return}o(d,u)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const d=l(e,s);d&&typeof d.then=="function"?d.then(u=>c(null,u)).catch(c):c(null,d)}catch(d){c(d)}return}return l(e,s,c)}prepareLoading(e,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();L(e)&&(e=this.languageUtils.toResolveHierarchy(e)),L(s)&&(s=[s]);const a=this.queueLoad(e,s,i,n);if(!a.toLoad.length)return a.pending.length||n(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,s,i){this.prepareLoading(e,s,{},i)}reload(e,s,i){this.prepareLoading(e,s,{reload:!0},i)}loadOne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),n=i[0],a=i[1];this.read(n,a,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${s}loading namespace ${a} for language ${n} failed`,o),!o&&c&&this.logger.log(`${s}loaded namespace ${a} for language ${n}`,c),this.loaded(e,o,c)})}saveMissing(e,s,i,n,a){var l,d,u,h,m;let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((d=(l=this.services)==null?void 0:l.utils)!=null&&d.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${i}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((m=this.backend)!=null&&m.create){const f={...o,isUpdate:a},p=this.backend.create.bind(this.backend);if(p.length<6)try{let g;p.length===5?g=p(e,s,i,n,f):g=p(e,s,i,n),g&&typeof g.then=="function"?g.then(x=>c(null,x)).catch(c):c(null,g)}catch(g){c(g)}else p(e,s,i,n,c,f)}!e||!e[0]||this.store.addResource(e[0],s,i,n)}}}const dr=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),L(t[1])&&(e.defaultValue=t[1]),L(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(i=>{e[i]=s[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ur=t=>{var e,s;return L(t.ns)&&(t.ns=[t.ns]),L(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),L(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((s=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:s.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Pt=()=>{},Fm=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class gt extends qt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ur(e),this.services={},this.logger=ce,this.modules={external:[]},Fm(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(){var e=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(i=s,s={}),s.defaultNS==null&&s.ns&&(L(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const n=dr();this.options={...n,...this.options,...ur(s)},this.options.interpolation={...n.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const a=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?ce.init(a(this.modules.logger),this.options):ce.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Lm;const h=new ar(this.options);this.store=new ir(this.options.resources,this.options);const m=this.services;m.logger=ce,m.resourceStore=this.store,m.languageUtils=h,m.pluralResolver=new Mm(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(m.formatter=a(u),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new Em(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new Vm(a(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),x=1;x<p;x++)g[x-1]=arguments[x];e.emit(f,...g)}),this.modules.languageDetector&&(m.languageDetector=a(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=a(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Ut(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),x=1;x<p;x++)g[x-1]=arguments[x];e.emit(f,...g)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Pt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=et(),d=()=>{const u=(h,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(m),i(h,m)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(e){var a,o;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt;const n=L(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const c=[],l=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(h=>{h!=="cimode"&&c.indexOf(h)<0&&c.push(h)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),(o=(a=this.options.preload)==null?void 0:a.forEach)==null||o.call(a,d=>l(d)),this.services.backendConnector.load(c,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(d)})}else i(null)}reloadResources(e,s,i){const n=et();return typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),i||(i=Pt),this.services.backendConnector.reload(e,s,a=>{n.resolve(),i(a)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ao.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let s=0;s<this.languages.length;s++){const i=this.languages[s];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,s){var i=this;this.isLanguageChangingTo=e;const n=et();this.emit("languageChanging",e);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,d)=>{d?(a(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve(function(){return i.t(...arguments)}),s&&s(l,function(){return i.t(...arguments)})},c=l=>{var u,h;!e&&!l&&this.services.languageDetector&&(l=[]);const d=L(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);d&&(this.language||a(d),this.translator.language||this.translator.changeLanguage(d),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,d)),this.loadResources(d,m=>{o(m,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,s,i){var n=this;const a=function(o,c){let l;if(typeof c!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),h=2;h<d;h++)u[h-2]=arguments[h];l=n.options.overloadTranslationOptionHandler([o,c].concat(u))}else l={...c};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||a.keyPrefix);const m=n.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(p=>`${l.keyPrefix}${m}${p}`):f=l.keyPrefix?`${l.keyPrefix}${m}${o}`:o,n.t(f,l)};return L(e)?a.lng=e:a.lngs=e,a.ns=s,a.keyPrefix=i,a}t(){var n;for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return(n=this.translator)==null?void 0:n.translate(...s)}exists(){var n;for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return(n=this.translator)==null?void 0:n.exists(...s)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=s.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const o=(c,l)=>{const d=this.services.backendConnector.state[`${c}|${l}`];return d===-1||d===0||d===2};if(s.precheck){const c=s.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(i,e)&&(!n||o(a,e)))}loadNamespaces(e,s){const i=et();return this.options.ns?(L(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),s&&s(n)}),i):(s&&s(),Promise.resolve())}loadLanguages(e,s){const i=et();L(e)&&(e=[e]);const n=this.options.preload||[],a=e.filter(o=>n.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=n.concat(a),this.loadResources(o=>{i.resolve(),s&&s(o)}),i):(s&&s(),Promise.resolve())}dir(e){var n,a;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((a=this.services)==null?void 0:a.languageUtils)||new ar(dr());return s.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new gt(e,s)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},a=new gt(n);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i){const c=Object.keys(this.store.data).reduce((l,d)=>(l[d]={...this.store.data[d]},Object.keys(l[d]).reduce((u,h)=>(u[h]={...l[d][h]},u),{})),{});a.store=new ir(c,n),a.services.resourceStore=a.store}return a.translator=new Ut(a.services,n),a.translator.on("*",function(c){for(var l=arguments.length,d=new Array(l>1?l-1:0),u=1;u<l;u++)d[u-1]=arguments[u];a.emit(c,...d)}),a.init(n,s),a.translator.options=n,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const J=gt.createInstance();J.createInstance=gt.createInstance;J.createInstance;J.dir;J.init;J.loadResources;J.reloadResources;J.use;J.changeLanguage;J.getFixedT;J.t;J.exists;J.setDefaultNamespace;J.hasLoadedNamespace;J.loadNamespaces;J.loadLanguages;const{slice:Im,forEach:Om}=[];function $m(t){return Om.call(Im.call(arguments,1),e=>{if(e)for(const s in e)t[s]===void 0&&(t[s]=e[s])}),t}const hr=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Bm=function(t,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(e);let a=`${t}=${n}`;if(i.maxAge>0){const o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(o)}`}if(i.domain){if(!hr.test(i.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${i.domain}`}if(i.path){if(!hr.test(i.path))throw new TypeError("option path is invalid");a+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a},mr={create(t,e,s,i){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};s&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+s*60*1e3)),i&&(n.domain=i),document.cookie=Bm(t,encodeURIComponent(e),n)},read(t){const e=`${t}=`,s=document.cookie.split(";");for(let i=0;i<s.length;i++){let n=s[i];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(e)===0)return n.substring(e.length,n.length)}return null},remove(t){this.create(t,"",-1)}};var Um={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return mr.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:s,cookieMinutes:i,cookieDomain:n,cookieOptions:a}=e;s&&typeof document<"u"&&mr.create(s,t,i,n,a)}},Hm={name:"querystring",lookup(t){var i;let{lookupQuerystring:e}=t,s;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&((i=window.location.hash)==null?void 0:i.indexOf("?"))>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const o=n.substring(1).split("&");for(let c=0;c<o.length;c++){const l=o[c].indexOf("=");l>0&&o[c].substring(0,l)===e&&(s=o[c].substring(l+1))}}return s}};let $e=null;const pr=()=>{if($e!==null)return $e;try{if($e=typeof window<"u"&&window.localStorage!==null,!$e)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{$e=!1}return $e};var zm={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&pr())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:s}=e;s&&pr()&&window.localStorage.setItem(s,t)}};let Be=null;const fr=()=>{if(Be!==null)return Be;try{if(Be=typeof window<"u"&&window.sessionStorage!==null,!Be)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Be=!1}return Be};var Wm={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&fr())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:s}=e;s&&fr()&&window.sessionStorage.setItem(s,t)}},Km={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:s,userLanguage:i,language:n}=navigator;if(s)for(let a=0;a<s.length;a++)e.push(s[a]);i&&e.push(i),n&&e.push(n)}return e.length>0?e:void 0}},_m={name:"htmlTag",lookup(t){let{htmlTag:e}=t,s;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(s=i.getAttribute("lang")),s}},Gm={name:"path",lookup(t){var n;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const s=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?(n=s[typeof e=="number"?e:0])==null?void 0:n.replace("/",""):void 0}},qm={name:"subdomain",lookup(t){var n,a;let{lookupFromSubdomainIndex:e}=t;const s=typeof e=="number"?e+1:1,i=typeof window<"u"&&((a=(n=window.location)==null?void 0:n.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[s]}};let oo=!1;try{document.cookie,oo=!0}catch{}const lo=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];oo||lo.splice(1,1);const Ym=()=>({order:lo,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class co{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,s)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=$m(s,this.options||{},Ym()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Um),this.addDetector(Hm),this.addDetector(zm),this.addDetector(Wm),this.addDetector(Km),this.addDetector(_m),this.addDetector(Gm),this.addDetector(qm)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,s=[];return e.forEach(i=>{if(this.detectors[i]){let n=this.detectors[i].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(s=s.concat(n))}}),s=s.map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}cacheUserLanguage(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;s&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||s.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}co.type="languageDetector";const Xm={title:"UploadSoul - Virtual World, Digital Immortality",description:"UploadSoul - Holographic emotional companion, virtual pet, digital immortality and other services"},Zm={title:"Digital Humans",description:"Create and interact with digital versions of your loved ones",createButton:"Create Digital Human",familyTree:"Family Tree",visualTree:"View Visual Family Tree",creation:{title:"Create Digital Human",description:"By uploading photos, voice, videos and precious memories, create a digital version of your loved ones to preserve these memories forever.",previous:"Previous",next:"Next",createButton:"Create Digital Human",step1Title:"Basic Information",step2Title:"Upload Photos",step3Title:"Upload Voice Samples",step4Title:"Upload Videos",step5Title:"Add Memories",nameLabel:"Name",namePlaceholder:"Enter name",relationshipLabel:"Relationship",selectRelationship:"Select relationship",photoUploadLabel:"Upload Main Photo",photoUploadInstruction:"Click or drag and drop photo",photoUploadFormats:"Supports JPG, PNG formats",additionalPhotosLabel:"Upload Additional Photos",voiceUploadLabel:"Upload Voice Samples",voiceUploadInstruction:"Upload clear voice recordings for better voice model training",voiceUploadFormats:"Supports MP3, WAV formats",recordVoice:"Record Voice",videoUploadLabel:"Upload Videos",videoUploadInstruction:"Videos help create more realistic digital humans",videoUploadFormats:"Supports MP4, MOV formats",memoryLabel:"Add Memories",memoryPlaceholder:"Share memories, stories, or characteristics...",privacyNote:"Your data is securely stored and will only be used to create your digital human.",files:"files selected",memoryInstruction:"Add stories, memories, and characteristics that make this person special",addButton:"Add",addedMemories:"Added Memories:",changePhoto:"Click to change photo",uploadVideos:"Click or drag to upload videos",voiceTipsTitle:"Tips for best results:",voiceTip1:"Upload at least 3 audio samples of the person speaking",voiceTip2:"Each clip should be 5-30 seconds in length",voiceTip3:"Clear audio without background noise works best",voiceTip4:"Samples should capture the person's natural speaking voice",uploadVoiceSamples:"Upload Voice Samples",processing:"Processing your request...",success:"Digital human created successfully",error:"Error creating digital human",descriptionLabel:"Description",descriptionPlaceholder:"Describe this person...",relationships:{parent:"Parent",child:"Child",sibling:"Sibling",grandparent:"Grandparent",grandchild:"Grandchild",friend:"Friend",spouse:"Spouse",other:"Other"}},voiceChat:{welcome:"Hello! I'm {{name}}. How can I talk with you today?",defaultName:"Digital Human",companion:"AI Companion",userAudioMessage:"Voice message sent",thinking:"Thinking...",tapToTalk:"Tap to talk",tapToStop:"Tap to stop",play:"Play audio",pause:"Pause audio",microphoneError:"Error accessing microphone. Please check your permissions.",responses:{howAreYou:"It's so good to hear your voice. How have you been?",goodMemories:"I was just thinking about the good times we had together.",missYou:"I've missed our conversations. Tell me what's new with you.",loveTalking:"I love talking with you. It brings back so many memories.",rememberWhen:"Do you remember when we used to spend hours talking about life?"}},conversation:{intro:"You can converse with the digital human, explore precious memories, and experience their personality and thoughts.",startVoiceChat:"Start Voice Chat"},memories:{title:"Memory Library",addNew:"Add New Memory",added:"Memory added successfully",placeholder:"Record a precious memory about this person...",save:"Save"},reunionFeatures:{title:"Family Reunion",description:"Explore your family connections and preserve your family history through our interactive family tree."}},Jm={home:"Home",explore:"Explore",companions:"Companions",about:"About",login:"Login",signup:"Sign Up",language:"Language",shop:"Virtual Mall"},Qm={aboutUs:"About Us",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",contactUs:"Contact Us",copyright:"All rights reserved.",services:"Our Services",aboutCompany:"Company Introduction",team:"Our Team",contact:"Contact Us",joinUs:"Join Us",contactMethods:"Contact Information",email:"Email",phone:"Phone",address:"Address",addressDetails:"Vancouver, Canada",platformName:"Virtual World, Digital Immortality"},ep={hero:{title:"Your Digital Emotional Companion",subtitle:"Experience the future of emotional companionship with advanced AI technology",cta:"Try Now"},features:{title:"Platform Features",emotionalCompanion:{title:"Holographic Emotional Companion",description:"Create your personalized AI companion with unique personality traits"},virtualPet:{title:"Virtual Pet",description:"Adopt and nurture digital pets with advanced AI behaviors"},digitalImmortality:{title:"Digital Immortality",description:"Preserve your memories and personality in a digital form"}},testimonials:{title:"User Testimonials",seeMore:"See More"}},tp={selectCompanion:"Select Your AI Companion",startConversation:"Start a conversation with",sendMessage:"Send",inputPlaceholder:"Enter message...",record:"Record",uploadImage:"Upload Image",addEmoji:"Add Emoji"},sp={login:"Login",signup:"Sign Up",email:"Email",password:"Password",forgotPassword:"Forgot Password?",orContinueWith:"Or continue with"},ip={en:"English","zh-CN":"简体中文","zh-TW":"繁體中文",ja:"日本語"},np={app:Xm,digitalHuman:Zm,header:Jm,footer:Qm,home:ep,companion:tp,auth:sp,languages:ip},rp={title:"UploadSoul 传灵 虚拟世界，数字永生",description:"UploadSoul 传灵 - 全息情感陪伴、虚拟宠物、数字永生等服务"},ap={home:"首页",explore:"探索",companions:"伴侣",about:"关于",login:"登录",signup:"注册",language:"语言",shop:"虚拟商城"},op={aboutUs:"关于我们",privacyPolicy:"隐私政策",termsOfService:"服务条款",contactUs:"联系我们",copyright:"版权所有。",services:"产品服务",aboutCompany:"公司介绍",team:"团队成员",contact:"联系我们",joinUs:"加入我们",contactMethods:"联系方式",email:"邮箱",phone:"电话",address:"地址",addressDetails:"加拿大温哥华",platformName:"传灵 虚拟世界，数字永生"},lp={hero:{title:"您的数字情感伴侣",subtitle:"通过先进的AI技术体验情感陪伴的未来",cta:"立即体验"},features:{title:"平台特色",emotionalCompanion:{title:"全息情感陪伴",description:"创建您的个性化AI伴侣，拥有独特的性格特点"},virtualPet:{title:"虚拟宠物",description:"领养并培养具有高级AI行为的数字宠物"},digitalImmortality:{title:"数字永生",description:"以数字形式保存您的记忆和个性"}},testimonials:{title:"用户评价",seeMore:"查看更多"}},cp={selectCompanion:"选择您的AI伙伴",startConversation:"开始与以下对象的对话",sendMessage:"发送",inputPlaceholder:"输入消息...",record:"录音",uploadImage:"上传图片",addEmoji:"添加表情"},dp={login:"登录",signup:"注册",email:"电子邮件",password:"密码",forgotPassword:"忘记密码？",orContinueWith:"或继续使用"},up={en:"English","zh-CN":"简体中文","zh-TW":"繁體中文",ja:"日本語"},hp={title:"数字人",description:"创建并与您所爱之人的数字版本互动",createButton:"创建数字人",familyTree:"家族树",visualTree:"查看可视化家族树",creation:{title:"创建数字人",description:"通过上传照片、声音、视频和珍贵记忆，创建您所爱之人的数字版本，永久保存这些记忆。",previous:"上一步",next:"下一步",createButton:"创建数字人",step1Title:"基本信息",step2Title:"上传照片",step3Title:"上传语音样本",step4Title:"上传视频",step5Title:"添加记忆",nameLabel:"姓名",namePlaceholder:"输入姓名",relationshipLabel:"关系",selectRelationship:"选择关系",photoUploadLabel:"上传主照片",photoUploadInstruction:"点击或拖放照片",photoUploadFormats:"支持JPG、PNG格式",additionalPhotosLabel:"上传其他照片",voiceUploadLabel:"上传语音样本",voiceUploadInstruction:"上传清晰的语音录音，以便更好地训练语音模型",voiceUploadFormats:"支持MP3、WAV格式",recordVoice:"录制语音",videoUploadLabel:"上传视频",videoUploadInstruction:"视频有助于创建更逼真的数字人",videoUploadFormats:"支持MP4、MOV格式",memoryLabel:"添加记忆",memoryPlaceholder:"分享记忆、故事或特点...",privacyNote:"您的数据将被安全存储，仅用于创建数字人。",files:"已选择文件",memoryInstruction:"添加故事、记忆和使这个人特别的特点",addButton:"添加",addedMemories:"已添加的记忆：",changePhoto:"点击更换照片",uploadVideos:"点击或拖放上传视频",voiceTipsTitle:"获得最佳效果的技巧：",voiceTip1:"至少上传3个人说话的音频样本",voiceTip2:"每个片段长度应在5-30秒之间",voiceTip3:"没有背景噪音的清晰音频效果最佳",voiceTip4:"样本应捕捉人的自然说话声音",uploadVoiceSamples:"上传语音样本",processing:"正在处理您的请求...",success:"数字人创建成功",error:"创建数字人时出错",descriptionLabel:"描述",descriptionPlaceholder:"描述这个人...",relationships:{parent:"父母",child:"孩子",sibling:"兄弟姐妹",grandparent:"祖父母",grandchild:"孙子女",friend:"朋友",spouse:"配偶",other:"其他"}},voiceChat:{welcome:"你好！我是 {{name}}。今天我能跟你聊些什么呢？",defaultName:"数字人",companion:"AI伴侣",userAudioMessage:"已发送语音信息",thinking:"思考中...",tapToTalk:"点击说话",tapToStop:"点击停止",play:"播放语音",pause:"暂停语音",microphoneError:"访问麦克风时出错。请检查您的权限。",processingError:"处理您的请求时出现问题。",serverError:"服务器暂时无法响应。",fallbackToText:"语音录制不可用。请使用文字聊天。",fallbackMessage:"我们暂时无法连接到服务器，这里是一个预设回应：",responses:{howAreYou:"很高兴听到你的声音。你最近怎么样？",goodMemories:"我刚刚在想我们一起度过的美好时光。",missYou:"我很想念我们的对话。告诉我你最近有什么新鲜事。",loveTalking:"我喜欢和你聊天。这让我想起了很多回忆。",rememberWhen:"你还记得我们曾经花几个小时讨论生活的时候吗？"}},conversation:{intro:"您可以与数字人交流，探索珍贵的记忆，体验他们的个性和想法。",startVoiceChat:"开始语音聊天"},memories:{title:"记忆库",addNew:"添加新记忆",added:"记忆添加成功",placeholder:"记录关于此人的珍贵记忆...",save:"保存"},errors:{loadFailed:"加载数字人失败",creation:{error:"创建数字人时出错"}},reunionFeatures:{title:"家族团聚",description:"通过我们的交互式家族树探索您的家族联系并保存家族历史。"}},gr={app:rp,header:ap,footer:op,home:lp,companion:cp,auth:dp,languages:up,digitalHuman:hp},mp={title:"UploadSoul 傳靈 虛擬世界，數字永生",description:"UploadSoul 傳靈 - 全息情感陪伴、虛擬寵物、數字永生等服務"},pp={home:"首頁",explore:"探索",companions:"伴侶",about:"關於",login:"登入",signup:"註冊",language:"語言",shop:"虛擬商城"},fp={title:"數字人類",description:"創建您所愛的人的數字人類，隨時隨地享受對話。",createNew:"新建",voiceChat:{welcome:"您好，我是{name}。讓我們聊天吧。",defaultName:"數字人類",companion:"數字伴侶",tapToTalk:"點擊開始對話",tapToStop:"點擊停止",thinking:"思考中...",play:"播放",userAudioMessage:"語音訊息",microphoneError:"無法訪問麥克風",processingError:"處理語音時出錯",serverError:"伺服器連接問題",fallbackToText:"語音錄製不可用。請使用文字聊天。",fallbackMessage:"現在是演示模式。",responses:{howAreYou:"今天感覺如何？",goodMemories:"我們一起度過了美好的時光。",missYou:"我一直在想你。",loveTalking:"我喜歡與你交談。",rememberWhen:"記得那天嗎？那是很美好的時光。"}},intro:"您可以與數字人類交談，探索珍貴記憶，體驗他們的個性和思想。",startVoiceChat:"開始語音聊天",memories:{title:"記憶庫",addNew:"添加新記憶",added:"成功添加記憶",placeholder:"記錄關於這個人的珍貴記憶...",save:"保存"},reunionFeatures:{title:"家庭團聚",description:"透過互動式家譜探索您的家庭連結並保存家族歷史。"}},gp={aboutUs:"關於我們",privacyPolicy:"隱私政策",termsOfService:"服務條款",contactUs:"聯絡我們",copyright:"版權所有。",services:"產品服務",aboutCompany:"公司介紹",team:"團隊成員",contact:"聯絡我們",joinUs:"加入我們",contactMethods:"聯絡方式",email:"郵箱",phone:"電話",address:"地址",addressDetails:"加拿大溫哥華",platformName:"傳靈 虛擬世界，數字永生"},xp={hero:{title:"您的數字情感伴侶",subtitle:"通過先進的AI技術體驗情感陪伴的未來",cta:"立即體驗"},features:{title:"平台特色",emotionalCompanion:{title:"全息情感陪伴",description:"創建您的個性化AI伴侶，擁有獨特的性格特點"},virtualPet:{title:"虛擬寵物",description:"領養並培養具有高級AI行為的數字寵物"},digitalImmortality:{title:"數字永生",description:"以數字形式保存您的記憶和個性"}},testimonials:{title:"用戶評價",seeMore:"查看更多"}},yp={selectCompanion:"選擇您的AI夥伴",startConversation:"開始與以下對象的對話",sendMessage:"發送",inputPlaceholder:"輸入訊息...",record:"錄音",uploadImage:"上傳圖片",addEmoji:"添加表情"},vp={login:"登入",signup:"註冊",email:"電子郵件",password:"密碼",forgotPassword:"忘記密碼？",orContinueWith:"或繼續使用"},bp={en:"English","zh-CN":"简体中文","zh-TW":"繁體中文",ja:"日本語"},wp={app:mp,header:pp,digitalHuman:fp,footer:gp,home:xp,companion:yp,auth:vp,languages:bp},jp={title:"UploadSoul - バーチャル世界、デジタル不死",description:"UploadSoul - ホログラフィック感情伴侶、仮想ペット、デジタル不死などのサービス"},Sp={home:"ホーム",explore:"探索",companions:"伴侶",about:"について",login:"ログイン",signup:"登録",language:"言語",shop:"バーチャルモール"},Np={title:"デジタルヒューマン",description:"あなたの愛する人のデジタルヒューマンを作成し、いつでもどこでも会話を楽しめます。",createNew:"新規作成",voiceChat:{welcome:"こんにちは、{name}です。お話ししましょう。",defaultName:"デジタルヒューマン",companion:"デジタルコンパニオン",tapToTalk:"タップして話す",tapToStop:"タップして停止",thinking:"考え中...",play:"再生",userAudioMessage:"音声メッセージ",microphoneError:"マイクへのアクセスができません",processingError:"音声の処理中にエラーが発生しました",serverError:"サーバーとの通信に問題が発生しました",fallbackToText:"音声録音が利用できません。テキストチャットをご利用ください。",fallbackMessage:"現在デモモードです。",responses:{howAreYou:"今日はどうですか？",goodMemories:"一緒に過ごした素敵な思い出がありますね。",missYou:"あなたのことをいつも考えています。",loveTalking:"あなたとの会話が大好きです。",rememberWhen:"あの日のことを覚えていますか？素晴らしい時間でした。"}},intro:"このデジタルヒューマンと会話し、大切な思い出を探索し、その個性や考えを体験することができます。",startVoiceChat:"音声チャットを開始",memories:{title:"メモリーライブラリ",addNew:"新しい思い出を追加",added:"思い出が追加されました",placeholder:"この人についての大切な思い出を記録...",save:"保存"},reunionFeatures:{title:"家族再会",description:"インタラクティブな家系図を通じて家族のつながりを探索し、家族の歴史を保存します。"}},Cp={aboutUs:"会社概要",privacyPolicy:"プライバシーポリシー",termsOfService:"利用規約",contactUs:"お問い合わせ",copyright:"すべての権利を保有。",services:"サービス",aboutCompany:"会社紹介",team:"チームメンバー",contact:"お問い合わせ",joinUs:"採用情報",contactMethods:"連絡先",email:"メール",phone:"電話",address:"住所",addressDetails:"カナダ、バンクーバー",platformName:"バーチャル世界、デジタル不死"},Pp={hero:{title:"あなたのデジタル感情伴侶",subtitle:"先進的なAI技術で感情伴侶の未来を体験してください",cta:"今すぐ試す"},features:{title:"プラットフォームの特徴",emotionalCompanion:{title:"ホログラフィック感情伴侶",description:"独自の性格特性を持つパーソナライズされたAI伴侶を作成"},virtualPet:{title:"仮想ペット",description:"高度なAI行動を備えたデジタルペットを養子にして育てる"},digitalImmortality:{title:"デジタル不死",description:"あなたの記憶と個性をデジタル形式で保存"}},testimonials:{title:"ユーザーの声",seeMore:"もっと見る"}},Tp={selectCompanion:"AIコンパニオンを選択",startConversation:"との会話を開始",sendMessage:"送信",inputPlaceholder:"メッセージを入力...",record:"録音",uploadImage:"画像をアップロード",addEmoji:"絵文字を追加"},kp={login:"ログイン",signup:"登録",email:"メールアドレス",password:"パスワード",forgotPassword:"パスワードをお忘れですか？",orContinueWith:"または次で続行"},Ap={en:"English","zh-CN":"简体中文","zh-TW":"繁體中文",ja:"日本語"},Mp={app:jp,header:Sp,digitalHuman:Np,footer:Cp,home:Pp,companion:Tp,auth:kp,languages:Ap},Ep={title:"UploadSoul - 가상 세계, 디지털 불멸",description:"UploadSoul - 홀로그램 감정 동반자, 가상 반려동물, 디지털 불멸 및 기타 서비스"},Dp={home:"홈",explore:"탐색",companions:"동반자",about:"소개",login:"로그인",signup:"회원가입",language:"언어",shop:"상점",digitalHuman:"디지털 휴먼"},Lp={aboutUs:"회사 소개",privacyPolicy:"개인정보 보호정책",termsOfService:"서비스 약관",contactUs:"문의하기",copyright:"모든 권리 보유.",services:"서비스",aboutCompany:"회사 소개",team:"팀 소개",contact:"연락처",joinUs:"채용 정보",contactMethods:"연락 정보",email:"이메일",phone:"전화번호",address:"주소",addressDetails:"밴쿠버, 캐나다",platformName:"가상 세계, 디지털 불멸"},Rp={hero:{title:"사랑하는 이들과 다시 만나 영원히 함께하세요",subtitle:"이별은 더 이상 영원하지 않습니다. UploadSoul을 통해 소중한 사람들과 다시 연결되세요.",cta:"지금 시작하기"},features:{title:"따스한 재회, 영원한 연결",emotionalCompanion:{title:"홀로그램 감정 동반자",description:"고유한 성격 특성을 가진 맞춤형 AI 동반자를 만들어보세요"},virtualPet:{title:"가상 반려동물",description:"첨단 AI 행동을 갖춘 디지털 반려동물을 입양하고 키워보세요"},digitalImmortality:{title:"디지털 부활",description:"사랑하는 사람을 디지털 세계에서 새롭게 만나보세요"},familyReunion:{title:"가족 재회 공간",description:"가상 공간에서 멀리 있거나 떠난 가족들과 함께 소중한 시간을 보내세요"},memorySharing:{title:"추억 공유",description:"소중한 추억을 함께 나누고 새로운 기억을 만들어가세요"}},testimonials:{title:"소중한 재회의 이야기",subtitle:"UploadSoul을 통해 사랑하는 이들과 다시 만난 사용자들의 이야기",seeMore:"더보기"}},Vp={selectCompanion:"AI 동반자 선택하기",startConversation:"대화 시작하기",sendMessage:"전송",inputPlaceholder:"메시지를 입력하세요...",record:"녹음",uploadImage:"이미지 업로드",addEmoji:"이모티콘 추가"},Fp={login:"로그인",signup:"회원가입",email:"이메일",password:"비밀번호",forgotPassword:"비밀번호를 잊으셨나요?",orContinueWith:"또는 계속하기"},Ip={title:"디지털 부활",description:"이별은 끝이 아닙니다. 디지털 세계에서 영원히 함께하세요.",createButton:"디지털 휴먼 생성",myDigitalHumans:"내 디지털 휴먼",createNew:"디지털 휴먼 생성",memories:"기억 보관소",conversation:"대화",mediaFiles:"미디어 파일",familyTree:"가족 트리",familyMemberAdded:"가족 구성원이 추가되었습니다",memorialCreated:"추모 페이지가 생성되었습니다",addMemory:"추억 추가하기",addMemoryFeature:"곧 추억 추가 기능이 제공될 예정입니다",audioNotSupported:"오디오가 지원되지 않습니다",detailedFamilyTree:"상세 가족 트리",reunionSpace:"재회의 공간",memorySharing:"추억 공유하기",specialDays:"특별한 날",addRelative:"가족 구성원 추가",loadingFamilyTree:"가족 트리를 불러오는 중...",name:"이름",relationship:"관계",photo:"사진",dateOfBirth:"생년월일",dateOfDeath:"사망일",leaveEmptyIfAlive:"생존 중인 경우 비워두세요",bio:"약력",edit:"편집",remove:"삭제",loading:"로딩중...",created:"생성일",exportFamilyData:"가족 데이터 내보내기",importFamilyData:"가족 데이터 가져오기",visualTree:"시각적 트리",relationshipsList:"관계 목록",familyTimeline:"가족 타임라인",immediateFamily:"직계 가족",extendedFamily:"확대 가족",noRelationshipsYet:"아직 추가된 관계가 없습니다. '가족 구성원 추가' 버튼을 클릭하여 추가하세요.",grandparentsBorn:"조부모 출생",parentsBorn:"부모 출생",selfBorn:"본인 출생",digitalHumanCreated:"디지털 휴먼 생성됨",familySettings:"가족 설정",privacySettings:"개인정보 설정",private:"비공개",friendsOnly:"친구만",public:"공개",privacySettingsDescription:"가족 트리를 볼 수 있는 사용자를 설정합니다.",notificationSettings:"알림 설정",birthdayNotifications:"생일 알림",anniversaryNotifications:"기념일 알림",relationshipSuggestions:"관계 추천",relationshipTypes:{self:"본인",parent:"부모",child:"자녀",sibling:"형제자매",spouse:"배우자",grandparent:"조부모",grandchild:"손주"},reunionFeatures:{title:"재회의 공간",description:"가상 세계에서 사랑하는 이들과 다시 만나세요",createRoom:"재회 공간 만들기",joinRoom:"재회 공간 참여하기",specialDays:"특별한 날 함께하기",virtualActivities:"가상 활동",shareMemories:"추억 공유하기",saveMemories:"추억 저장하기"},eternalPresence:"영원한 존재",digitalReunion:"디지털 재회",loveNeverDies:"사랑은 결코 죽지 않습니다",togetherAgain:"다시 함께"},Op={title:"가상 상점",subtitle:"가상 아이템을 구매하여 AI 동반자 경험을 강화하세요",cart:"장바구니",addToCart:"장바구니에 추가",checkout:"결제하기",emptyCart:"장바구니가 비어 있습니다",continueShopping:"쇼핑 계속하기",total:"총계",categories:{all:"전체",membership:"멤버십 서비스",character:"캐릭터 아이템",pet:"반려동물용품",scene:"배경 장면",digitalHuman:"디지털 인간 서비스",reunionGifts:"재회 선물",memorialItems:"추모 아이템",specialMoments:"특별한 순간",eternityPackages:"영원 패키지"}},$p={en:"English","zh-CN":"简体中文","zh-TW":"繁體中文",ja:"日本語",ko:"한국어"},Bp={app:Ep,header:Dp,footer:Lp,home:Rp,companion:Vp,auth:Fp,digitalHuman:Ip,shop:Op,languages:$p},Up={common:{welcome:"Welcome to MGX AI Digital Emotional Companion Platform",loading:"Loading...",error:"An error occurred",retry:"Retry",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",create:"Create",search:"Search",more:"More",back:"Back",submit:"Submit",next:"Next",previous:"Previous",finish:"Finish",yes:"Yes",no:"No",success:"Success",failed:"Failed",notFound:"Not Found",unknown:"Unknown",all:"All"},nav:{home:"Home",aiCompanion:"AI Companion",virtualPet:"Virtual Pet",digitalHuman:"Digital Immortality",vrExperience:"VR Experience",store:"Store",feedback:"User Feedback",investment:"Investment & Jobs",profile:"Profile",settings:"Settings"},auth:{login:"Login",register:"Register",logout:"Logout",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password?",resetPassword:"Reset Password",name:"Name",phone:"Phone",verificationCode:"Verification Code",sendVerificationCode:"Send Code",loginWithEmail:"Email Login",loginWithPhone:"Phone Login",registerWithEmail:"Email Registration",registerWithPhone:"Phone Registration",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",loginSuccess:"Login Successful",registerSuccess:"Registration Successful",logoutSuccess:"Logout Successful",passwordResetSuccess:"Password Reset Successful",passwordsDontMatch:"Passwords don't match",invalidEmail:"Invalid email format",invalidPhone:"Invalid phone number format",weakPassword:"Password is too weak, use at least 8 characters with letters and numbers",membershipStatus:"Membership Status",standardMember:"Standard Member",premiumMember:"Premium Member",upgradeMembership:"Upgrade Membership"},aiCompanion:{title:"AI Emotional Companion",description:"Have warm conversations with AI characters and build emotional connections",characters:"Characters",createCharacter:"Create Character",characterName:"Character Name",personality:"Personality",backstory:"Backstory",voiceType:"Voice Type",chatHistory:"Chat History",clearChat:"Clear Chat",sendMessage:"Send Message",voiceChat:"Voice Chat",roleplay:"Role Play",emotionalSupport:"Emotional Support",virtualDating:"Virtual Dating",companionship:"Companionship",messageInput:"Type a message...",emotionAnalysis:"Emotion Analysis",memories:"Memories",relationship:"Relationship Level",customizeAppearance:"Customize Appearance",publicCharacters:"Public Characters",myCharacters:"My Characters",avatarSelection:"Select Avatar"},virtualPet:{title:"Virtual Pet",description:"Raise and nurture your own virtual pet",myPets:"My Pets",createPet:"Create Pet",petName:"Pet Name",species:"Species",feed:"Feed",play:"Play",train:"Train",sleep:"Sleep",clean:"Clean",health:"Health",happiness:"Happiness",energy:"Energy",intelligence:"Intelligence",level:"Level",experience:"Experience",skills:"Skills",inventory:"Inventory",shop:"Pet Shop",foodItems:"Food Items",toys:"Toys",accessories:"Accessories",interactionHistory:"Interaction History"},digitalHuman:{title:"Digital Immortality",description:"Create and preserve digitized personalities and memories",myDigitalHumans:"My Digital Humans",createDigitalHuman:"Create Digital Human",name:"Name",uploadMedia:"Upload Media",trainMemory:"Train Memory",familyTree:"Family Tree",relationships:"Relationships",memories:"Memories",importantEvents:"Important Events",timeline:"Timeline",personalityTraits:"Personality Traits",conversationStyle:"Conversation Style",voiceModel:"Voice Model",recordVoice:"Record Voice",memoriesDatabase:"Memories Database",exportData:"Export Data",importData:"Import Data",privacySettings:"Privacy Settings",trainingStatus:"Training Status",chatWithDigitalHuman:"Chat with Digital Human"},vrExperience:{title:"VR Experience",description:"Immersive virtual reality interactions",enterVR:"Enter VR Mode",exitVR:"Exit VR Mode",environments:"Environments",characters:"Characters",interactions:"Interactions",vrDevices:"Supported Devices",vrTutorial:"VR Tutorial",compatibility:"Compatibility Check",performanceSettings:"Performance Settings",navigation:"Navigation Controls",immersiveModes:"Immersive Modes",virtualRoom:"Virtual Room",outdoorScenes:"Outdoor Scenes",fantasyWorlds:"Fantasy Worlds",historyScenes:"Historical Scenes",deviceRequired:"VR Device Required",webVRExperience:"Web VR Experience",fullVRExperience:"Full VR Experience"},store:{title:"Store",description:"Purchase various digital goods and services",products:"Products",cart:"Cart",orders:"Orders",checkout:"Checkout",payment:"Payment",totalAmount:"Total Amount",addToCart:"Add to Cart",removeFromCart:"Remove from Cart",continueShopping:"Continue Shopping",emptyCart:"Your cart is empty",orderHistory:"Order History",orderDate:"Order Date",orderStatus:"Order Status",productDetails:"Product Details",relatedProducts:"Related Products",categories:{all:"All Categories",avatar:"Avatars",accessory:"Accessories",background:"Backgrounds",voice:"Voices",feature:"Features"},filter:"Filter",sort:"Sort",priceRange:"Price Range"},feedback:{title:"User Feedback",description:"Share your experience and suggestions",submitFeedback:"Submit Feedback",feedbackType:"Feedback Type",subject:"Subject",message:"Message",rating:"Rating",bug:"Bug Report",suggestion:"Feature Suggestion",complaint:"Complaint",praise:"Praise",other:"Other",attachScreenshot:"Attach Screenshot",yourFeedback:"Your Feedback",feedbackHistory:"Feedback History",responseFromTeam:"Response from Team",feedbackSubmitted:"Feedback Submitted",thanksForFeedback:"Thank you for your feedback",waitingForResponse:"Waiting for response"},investment:{title:"Investment & Jobs",description:"Investment opportunities and join our team",investmentOpportunities:"Investment Opportunities",careers:"Careers",aboutUs:"About Us",companyVision:"Company Vision",contactUs:"Contact Us",investorRelations:"Investor Relations",jobOpenings:"Job Openings",applyNow:"Apply Now",requiredSkills:"Required Skills",responsibilities:"Responsibilities",qualifications:"Qualifications",location:"Location",remote:"Remote",salary:"Salary",sendResume:"Send Resume",meetTeam:"Meet the Team",fundingRounds:"Funding Rounds",partnerships:"Partnerships"},settings:{title:"Settings",account:"Account Settings",profile:"Profile",security:"Security",privacy:"Privacy",notifications:"Notifications",language:"Language",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",autoTheme:"Auto Theme",dataUsage:"Data Usage",syncSettings:"Sync Settings",deleteAccount:"Delete Account",updateProfile:"Update Profile",changePassword:"Change Password",linkedAccounts:"Linked Accounts",twoFactorAuth:"Two-Factor Authentication",dataSharingOptions:"Data Sharing Options",pushNotifications:"Push Notifications",emailNotifications:"Email Notifications",paymentMethods:"Payment Methods",billingHistory:"Billing History",autoRenewal:"Auto-Renewal"},errors:{general:"Something went wrong, please try again later",network:"Network connection failed",unauthorized:"Unauthorized, please log in",forbidden:"Access forbidden",notFound:"Requested resource not found",serverError:"Server error",validation:"Validation failed",timeout:"Request timed out",loginRequired:"Login required",expiredSession:"Your session has expired, please log in again",rateLimited:"Too many requests, please try again later"}},xr={common:{welcome:"欢迎来到MGX AI数字情感陪伴平台",loading:"加载中...",error:"发生错误",retry:"重试",save:"保存",cancel:"取消",confirm:"确认",delete:"删除",edit:"编辑",create:"创建",search:"搜索",more:"更多",back:"返回",submit:"提交",next:"下一步",previous:"上一步",finish:"完成",yes:"是",no:"否",success:"成功",failed:"失败",notFound:"未找到",unknown:"未知",all:"全部"},nav:{home:"首页",aiCompanion:"全息情感陪伴",virtualPet:"虚拟宠物",digitalHuman:"数字永生",vrExperience:"VR体验专区",store:"模拟商城",feedback:"用户反馈",investment:"投资招聘",profile:"个人中心",settings:"设置"},auth:{login:"登录",register:"注册",logout:"退出登录",email:"邮箱",password:"密码",confirmPassword:"确认密码",forgotPassword:"忘记密码？",resetPassword:"重置密码",name:"姓名",phone:"手机号",verificationCode:"验证码",sendVerificationCode:"发送验证码",loginWithEmail:"邮箱登录",loginWithPhone:"手机号登录",registerWithEmail:"邮箱注册",registerWithPhone:"手机号注册",alreadyHaveAccount:"已有账号？",dontHaveAccount:"没有账号？",loginSuccess:"登录成功",registerSuccess:"注册成功",logoutSuccess:"退出成功",passwordResetSuccess:"密码重置成功",passwordsDontMatch:"两次输入的密码不一致",invalidEmail:"邮箱格式不正确",invalidPhone:"手机号格式不正确",weakPassword:"密码太弱，请使用至少8位包含字母和数字的组合",membershipStatus:"会员状态",standardMember:"普通会员",premiumMember:"高级会员",upgradeMembership:"升级会员"},aiCompanion:{title:"全息情感陪伴",description:"与AI角色进行有温度的对话，建立情感连接",characters:"角色列表",createCharacter:"创建角色",characterName:"角色名称",personality:"性格特点",backstory:"背景故事",voiceType:"语音类型",chatHistory:"对话历史",clearChat:"清空对话",sendMessage:"发送消息",voiceChat:"语音聊天",roleplay:"角色扮演",emotionalSupport:"心理疏导",virtualDating:"虚拟恋爱",companionship:"日常陪伴",messageInput:"输入消息...",emotionAnalysis:"情感分析",memories:"记忆库",relationship:"关系等级",customizeAppearance:"自定义外观",publicCharacters:"公共角色",myCharacters:"我的角色",avatarSelection:"选择头像"},virtualPet:{title:"虚拟宠物",description:"抚养和培养您的专属虚拟宠物",myPets:"我的宠物",createPet:"创建宠物",petName:"宠物名称",species:"宠物种类",feed:"喂食",play:"玩耍",train:"训练",sleep:"睡觉",clean:"清洁",health:"健康",happiness:"开心度",energy:"能量",intelligence:"智力",level:"等级",experience:"经验",skills:"技能",inventory:"物品",shop:"宠物商店",foodItems:"食物",toys:"玩具",accessories:"配饰",interactionHistory:"互动记录"},digitalHuman:{title:"数字永生",description:"创建和保存数字化的人格记忆",myDigitalHumans:"我的数字人",createDigitalHuman:"创建数字人",name:"姓名",uploadMedia:"上传媒体",trainMemory:"训练记忆",familyTree:"家族树",relationships:"人际关系",memories:"记忆",importantEvents:"重要事件",timeline:"时间线",personalityTraits:"个性特征",conversationStyle:"对话风格",voiceModel:"语音模型",recordVoice:"录制声音",memoriesDatabase:"记忆数据库",exportData:"导出数据",importData:"导入数据",privacySettings:"隐私设置",trainingStatus:"训练状态",chatWithDigitalHuman:"与数字人对话"},vrExperience:{title:"VR体验专区",description:"沉浸式虚拟现实互动体验",enterVR:"进入VR模式",exitVR:"退出VR模式",environments:"环境选择",characters:"角色选择",interactions:"交互方式",vrDevices:"支持设备",vrTutorial:"VR教程",compatibility:"兼容性检查",performanceSettings:"性能设置",navigation:"导航控制",immersiveModes:"沉浸模式",virtualRoom:"虚拟房间",outdoorScenes:"户外场景",fantasyWorlds:"奇幻世界",historyScenes:"历史场景",deviceRequired:"需要VR设备",webVRExperience:"网页VR体验",fullVRExperience:"完整VR体验"},store:{title:"模拟商城",description:"购买各种数字商品和服务",products:"商品",cart:"购物车",orders:"订单",checkout:"结算",payment:"支付",totalAmount:"总金额",addToCart:"加入购物车",removeFromCart:"从购物车移除",continueShopping:"继续购物",emptyCart:"购物车为空",orderHistory:"订单历史",orderDate:"订单日期",orderStatus:"订单状态",productDetails:"商品详情",relatedProducts:"相关商品",categories:{all:"全部分类",avatar:"头像",accessory:"配饰",background:"背景",voice:"语音",feature:"功能"},filter:"筛选",sort:"排序",priceRange:"价格区间"},feedback:{title:"用户反馈",description:"分享您的体验和建议",submitFeedback:"提交反馈",feedbackType:"反馈类型",subject:"主题",message:"留言",rating:"评分",bug:"问题报告",suggestion:"功能建议",complaint:"投诉",praise:"称赞",other:"其他",attachScreenshot:"附上截图",yourFeedback:"您的反馈",feedbackHistory:"反馈历史",responseFromTeam:"团队回复",feedbackSubmitted:"反馈已提交",thanksForFeedback:"感谢您的反馈",waitingForResponse:"等待回复"},investment:{title:"投资招聘",description:"投资机会和加入团队",investmentOpportunities:"投资机会",careers:"招聘岗位",aboutUs:"关于我们",companyVision:"公司愿景",contactUs:"联系我们",investorRelations:"投资者关系",jobOpenings:"职位空缺",applyNow:"立即申请",requiredSkills:"所需技能",responsibilities:"职责",qualifications:"资格要求",location:"地点",remote:"远程",salary:"薪资",sendResume:"发送简历",meetTeam:"团队成员",fundingRounds:"融资轮次",partnerships:"合作伙伴"},settings:{title:"设置",account:"账户设置",profile:"个人资料",security:"安全设置",privacy:"隐私设置",notifications:"通知设置",language:"语言",theme:"主题",darkMode:"深色模式",lightMode:"浅色模式",autoTheme:"自动主题",dataUsage:"数据使用",syncSettings:"同步设置",deleteAccount:"删除账号",updateProfile:"更新个人资料",changePassword:"更改密码",linkedAccounts:"关联账号",twoFactorAuth:"两步验证",dataSharingOptions:"数据共享选项",pushNotifications:"推送通知",emailNotifications:"邮件通知",paymentMethods:"支付方式",billingHistory:"账单历史",autoRenewal:"自动续订"},errors:{general:"出错了，请稍后再试",network:"网络连接失败",unauthorized:"未授权，请登录",forbidden:"无权访问",notFound:"未找到请求的资源",serverError:"服务器错误",validation:"输入验证失败",timeout:"请求超时",loginRequired:"需要登录",expiredSession:"会话已过期，请重新登录",rateLimited:"请求过于频繁，请稍后再试"}},hs=(t,e)=>({...e,...t}),Hp={en:{translation:hs(np,Up)},"zh-CN":{translation:hs(gr,xr)},"zh-TW":{translation:wp},ja:{translation:Mp},ko:{translation:Bp},zh:{translation:hs(gr,xr)}};J.use(co).use(Fo).init({resources:Hp,fallbackLng:"zh-CN",debug:!1,interpolation:{escapeValue:!1},detection:{order:["querystring","cookie","localStorage","navigator"],lookupQuerystring:"lang",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage","cookie"]},react:{useSuspense:!0,wait:!0}});wr(document.getElementById("root")).render(r.jsx(y.StrictMode,{children:r.jsx(ym,{})}));
//# sourceMappingURL=index-en5idPbV.js.map
